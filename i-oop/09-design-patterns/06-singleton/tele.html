<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Finally, let’s look at one other common creational pattern: the singleton pattern. The singleton pattern is a simple pattern that allows a program to enforce the limitation that there is only a single instance of a class in use within the entire program. So, when another class needs an instance of this class, instead of instantiating a new one, it will simply get a reference to the single existing object. This allows the entire program to share a single instance of an object, and that instance can be used to coordinate actions across the entire system."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Singleton Pattern :: CC 410 Textbook"><meta name=twitter:description content="Finally, let’s look at one other common creational pattern: the singleton pattern. The singleton pattern is a simple pattern that allows a program to enforce the limitation that there is only a single instance of a class in use within the entire program. So, when another class needs an instance of this class, instead of instantiating a new one, it will simply get a reference to the single existing object. This allows the entire program to share a single instance of an object, and that instance can be used to coordinate actions across the entire system."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/09-design-patterns/06-singleton/"><meta property="og:site_name" content="CC 410 Textbook"><meta property="og:title" content="Singleton Pattern :: CC 410 Textbook"><meta property="og:description" content="Finally, let’s look at one other common creational pattern: the singleton pattern. The singleton pattern is a simple pattern that allows a program to enforce the limitation that there is only a single instance of a class in use within the entire program. So, when another class needs an instance of this class, instead of instantiating a new one, it will simply get a reference to the single existing object. This allows the entire program to share a single instance of an object, and that instance can be used to coordinate actions across the entire system."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="OOP"><meta property="article:modified_time" content="2023-08-10T16:05:23-05:00"><meta itemprop=name content="Singleton Pattern :: CC 410 Textbook"><meta itemprop=description content="Finally, let’s look at one other common creational pattern: the singleton pattern. The singleton pattern is a simple pattern that allows a program to enforce the limitation that there is only a single instance of a class in use within the entire program. So, when another class needs an instance of this class, instead of instantiating a new one, it will simply get a reference to the single existing object. This allows the entire program to share a single instance of an object, and that instance can be used to coordinate actions across the entire system."><meta itemprop=dateModified content="2023-08-10T16:05:23-05:00"><meta itemprop=wordCount content="724"><title>Singleton Pattern :: CC 410 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cc410/i-oop/09-design-patterns/06-singleton/ rel=canonical type=text/html title="Singleton Pattern :: CC 410 Textbook"><link href=/cc410/i-oop/09-design-patterns/06-singleton/index.xml rel=alternate type=application/rss+xml title="Singleton Pattern :: CC 410 Textbook"><link href=/cc410/i-oop/09-design-patterns/06-singleton/index.print.html rel=alternate type=text/html title="Singleton Pattern :: CC 410 Textbook"><link href=/cc410/i-oop/09-design-patterns/06-singleton/embed.html rel=alternate type=text/html title="Singleton Pattern :: CC 410 Textbook"><link href=/cc410/images/favicon.ico?1719507172 rel=icon type=image/x-icon sizes=any><link href=/cc410/css/fontawesome-all.min.css?1719507352 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fontawesome-all.min.css?1719507352 rel=stylesheet></noscript><link href=/cc410/css/nucleus.css?1719507352 rel=stylesheet><link href=/cc410/css/auto-complete.css?1719507352 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/auto-complete.css?1719507352 rel=stylesheet></noscript><link href=/cc410/css/perfect-scrollbar.min.css?1719507352 rel=stylesheet><link href=/cc410/css/fonts.css?1719507352 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fonts.css?1719507352 rel=stylesheet></noscript><link href=/cc410/css/theme.css?1719507352 rel=stylesheet><link href=/cc410/css/theme-auto.css?1719507352 rel=stylesheet id=R-variant-style><link href=/cc410/css/chroma-auto.css?1719507352 rel=stylesheet id=R-variant-chroma-style><link href=/cc410/css/variant.css?1719507352 rel=stylesheet><link href=/cc410/css/print.css?1719507352 rel=stylesheet media=print><script src=/cc410/js/variant.js?1719507352></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cc410",window.index_js_url="/cc410/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cc410/css/custom.css?1719507352 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cc410/i-oop/09-design-patterns/06-singleton/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=singleton-pattern>Singleton Pattern</h1><p>Finally, let&rsquo;s look at one other common creational pattern: the <strong>singleton pattern</strong>. The <a href=https://en.wikipedia.org/wiki/Singleton_pattern rel=external target=_blank>singleton pattern</a> is a simple pattern that allows a program to enforce the limitation that there is only a single instance of a class in use within the entire program. So, when another class needs an instance of this class, instead of instantiating a new one, it will simply get a <strong>reference</strong> to the single existing object. This allows the entire program to share a single instance of an object, and that instance can be used to coordinate actions across the entire system.</p><p><a href=#R-image-7d30dad5ddc3d534a4a9b081c1e48bb7 class=lightbox-link><img alt="Singleton UML" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cc410/images/12/singleton.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7d30dad5ddc3d534a4a9b081c1e48bb7><img alt="Singleton UML" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cc410/images/12/singleton.png></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>The UML diagram for the singleton pattern is super simple. The class implementing the singleton pattern simply defines a private constructor, making sure that no other class can construct it. Instead, it stores a static reference to a single instance of itself, and includes a <code>get</code> method to access that single instance.</p><p>Let&rsquo;s look at how this could work in our ongoing example.</p><h3 id=singleton-factory>Singleton Factory</h3><p>Let&rsquo;s update our <code>DeckFactory</code> class to use the singleton pattern.</p><div class=tab-panel data-tab-group=67ebe19a00f71f7015e68117cd248496><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=java class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("67ebe19a00f71f7015e68117cd248496","java")'>
<span class=tab-nav-text>Java</span>
</button>
<button data-tab-item=python class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("67ebe19a00f71f7015e68117cd248496","python")'>
<span class=tab-nav-text>Python</span></button></div><div class=tab-content-container><div data-tab-item=java class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DeckFactory</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// private static single reference</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>DeckFactory</span><span class=w> </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// private constructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>DeckFactory</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// do nothing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>DeckFactory</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// only instantiate if it is called at least once</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=n>DeckFactory</span><span class=p>.</span><span class=na>instance</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>DeckFactory</span><span class=p>.</span><span class=na>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DeckFactory</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>DeckFactory</span><span class=p>.</span><span class=na>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Deck</span><span class=w> </span><span class=nf>getDeck</span><span class=p>(</span><span class=n>DeckType</span><span class=w> </span><span class=n>deck</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// existing code omitted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=python class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><p>There are actually two different ways to implement this in Python. The first is closer to the implementation seen in Java above and in C++ in the original book.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DeckFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># private static single reference</span>
</span></span><span class=line><span class=cl>    <span class=n>_instance</span><span class=p>:</span> <span class=n>DeckFactory</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># constructor that cannot be called</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&#34;Cannot Construct New Object!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_instance</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DeckFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># only instantiate if it is called at least once</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># call `__new__()` directly to bypass __init__</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_deck</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>deck</span><span class=p>:</span> <span class=n>DeckType</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Deck</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># existing code omitted</span></span></span></code></pre></div><p>A more Pythonic way would be to simply make use of the <code>__new__()</code> method itself to create the singleton and return it anytime the <code>__init__()</code> method is called. In Python, when any class is constructed normally, as in <code>DeckFactory()</code>, the <code>__new__()</code> method is called on the class first to create the instance, and then the <code>__init__()</code> method is called to set the instance&rsquo;s attributes and perform any other initialization. So, by ensuring that the <code>__new__()</code> method consistently returns the same instance, we can guarantee that only a single instance exists.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DeckFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># private static single reference</span>
</span></span><span class=line><span class=cl>    <span class=n>_instance</span><span class=p>:</span> <span class=n>DeckFactory</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># new method to construct the instance</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DeckFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># call `__new__()` on the parent `Object` class</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_deck</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>deck</span><span class=p>:</span> <span class=n>DeckType</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Deck</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># existing code omitted</span></span></span></code></pre></div><p>In this way, any calls to construct a <code>DeckInstance()</code> in the traditional way would just return the same object. Very Pythonic!</p><p>See <a href=https://python-patterns.guide/gang-of-four/singleton/ rel=external target=_blank>Singleton</a> on the excellent Python Design Patterns website for a discussion of these two implementations.</p></div></div></div></div><h3 id=using-a-singleton>Using a Singleton</h3><p>Now we can update our main method code to use our singleton <code>DeckFactory</code> instance instead of creating one when it is needed:</p><div class=tab-panel data-tab-group=b563af4a3817ef43057b94461e47ec0f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=java class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b563af4a3817ef43057b94461e47ec0f","java")'>
<span class=tab-nav-text>Java</span>
</button>
<button data-tab-item=python class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("b563af4a3817ef43057b94461e47ec0f","python")'>
<span class=tab-nav-text>Python</span></button></div><div class=tab-content-container><div data-tab-item=java class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CardGame</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ask user for input and store in `deckType`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>deckType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Standard 52&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Deck</span><span class=w> </span><span class=n>cards</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>DeckFactory</span><span class=p>.</span><span class=na>getInstance</span><span class=p>().</span><span class=na>getDeck</span><span class=p>((</span><span class=n>DeckType</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>deckType</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// game code goes here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=python class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CardGame</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># ask user for input and store in `deck_type`</span>
</span></span><span class=line><span class=cl>        <span class=n>deck_type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;Standard 52&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cards</span><span class=p>:</span> <span class=n>Deck</span> <span class=o>=</span> <span class=n>DeckFactory</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span><span class=o>.</span><span class=n>get_deck</span><span class=p>(</span><span class=n>DeckType</span><span class=p>(</span><span class=n>deck_type</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=c1># Python method described above means the code doesn&#39;t change!</span>
</span></span><span class=line><span class=cl>        <span class=c1># cards: Deck = DeckFactory().get_deck(DeckType(deck_type))</span>
</span></span><span class=line><span class=cl>        <span class=c1># game code goes here</span></span></span></code></pre></div></div></div></div></div><p>Why would we want to do this? Let&rsquo;s assume we&rsquo;re writing software for a multiplayer game server. In that case, we may not want to instantiate a new copy of the <code>DeckFactory</code> class for each player. Instead, using the singleton pattern, we can guarantee that only one instance of the class exists in the entire system.</p><p>Likewise, if we need a system to assign unique numbers to objects, such as orders in a restaurant, we can create a singleton class that assigns those numbers across all of the point of sale systems in the entire store. This might be useful in your ongoing class project.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href="https://commons.wikimedia.org/w/index.php?title=File:Singleton_UML_class_diagram.svg&oldid=488033377" rel=external target=_blank>https://commons.wikimedia.org/w/index.php?title=File:Singleton_UML_class_diagram.svg&oldid=488033377</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article></div></main></div></div><script src=/cc410/js/clipboard.min.js?1719507352 defer></script><script src=/cc410/js/perfect-scrollbar.min.js?1719507352 defer></script><script src=/cc410/js/theme.js?1719507352 defer></script><script src=/cc410/js/tele-scroll.js?1719507352 defer></script></body></html>