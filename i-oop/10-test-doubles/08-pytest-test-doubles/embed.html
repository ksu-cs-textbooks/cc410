




  
	
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
	  

  
	
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Video Materials
To create test doubles in Python, we’ll rely on the built-in unittest.mock library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we’re already using.
Adding Mocks to a Test Class There are many different ways to use the unittest.mock library. One of the easiest ways is to import the patch annotation">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Test Doubles in pytest :: CC 410 Textbook">
    <meta name="twitter:description" content="Video Materials
To create test doubles in Python, we’ll rely on the built-in unittest.mock library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we’re already using.
Adding Mocks to a Test Class There are many different ways to use the unittest.mock library. One of the easiest ways is to import the patch annotation">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/embed.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Test Doubles in pytest :: CC 410 Textbook">
    <meta property="og:description" content="Video Materials
To create test doubles in Python, we’ll rely on the built-in unittest.mock library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we’re already using.
Adding Mocks to a Test Class There are many different ways to use the unittest.mock library. One of the easiest ways is to import the patch annotation">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Test Doubles in pytest :: CC 410 Textbook">
    <meta itemprop="description" content="Video Materials
To create test doubles in Python, we’ll rely on the built-in unittest.mock library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we’re already using.
Adding Mocks to a Test Class There are many different ways to use the unittest.mock library. One of the easiest ways is to import the patch annotation">
    <meta itemprop="dateModified" content="2024-06-17T14:13:48-05:00">
    <meta itemprop="wordCount" content="953">
    <title>Test Doubles in pytest :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/" rel="canonical" type="text/html" title="Test Doubles in pytest :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/index.xml" rel="alternate" type="application/rss+xml" title="Test Doubles in pytest :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/index.print.html" rel="alternate" type="text/html" title="Test Doubles in pytest :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/tele.html" rel="alternate" type="text/html" title="Test Doubles in pytest :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1737485125" rel="icon" type="image/x-icon" sizes="any">
    
  <link href="/cc410/css/fontawesome-all.min.css?1737485166" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/css/fontawesome-all.min.css?1737485166" rel="stylesheet"></noscript>
  <link href="/cc410/css/nucleus.css?1737485166" rel="stylesheet">
  <link href="/cc410/css/auto-complete.css?1737485166" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/css/auto-complete.css?1737485166" rel="stylesheet"></noscript>
  <link href="/cc410/css/perfect-scrollbar.min.css?1737485166" rel="stylesheet">
  <link href="/cc410/css/fonts.css?1737485166" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/css/fonts.css?1737485166" rel="stylesheet"></noscript>
  <link href="/cc410/css/theme.css?1737485166" rel="stylesheet">
  
  
  
  <link href="/cc410/css/theme-light-theme.css?1737485166" rel="stylesheet" id="R-variant-style">
  <link href="/cc410/css/chroma-relearn-light.css?1737485166" rel="stylesheet" id="R-variant-chroma-style">
  <link href="/cc410/css/variant.css?1737485166" rel="stylesheet">
  <link href="/cc410/css/print.css?1737485166" rel="stylesheet" media="print">
  
  
  
  <script>
    window.relearn = window.relearn || {};
    window.relearn.relBasePath='..\/..\/..';
    window.relearn.relBaseUri='..\/..\/..\/..';
    window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
    window.index_js_url="/cc410/index.search.js";
    // variant stuff
    window.variants && variants.init( [ 'light-theme' ] );
    // translations
    window.T_Copy_to_clipboard = `Copy to clipboard`;
    window.T_Copied_to_clipboard = `Copied to clipboard!`;
    window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
    window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
    window.T_Reset_view = `Reset view`;
    window.T_View_reset = `View reset!`;
    window.T_No_results_found = `No results found for "{0}"`;
    window.T_N_results_found = `{1} results found for "{0}"`;
  </script>
  
  <link href="/cc410/css/custom.css?1737485166" rel="stylesheet">
    
  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/embed.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/pNqcrx785Gs" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p><a href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/video/embed.html">Video Materials</a></p>
<p>To create test doubles in Python, we&rsquo;ll rely on the built-in <a href="https://docs.python.org/3/library/unittest.mock.html" rel="external" target="_blank">unittest.mock</a> library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we&rsquo;re already using.</p>
<h2 id="adding-mocks-to-a-test-class">Adding Mocks to a Test Class</h2>
<p>There are many different ways to use the <code>unittest.mock</code> library. One of the easiest ways is to import the <code>patch</code> annotation</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># tests here</span>
</span></span><span class="line"><span class="cl">    </span></span></code></pre></div><h2 id="creating-fake-objects">Creating Fake Objects</h2>
<p>Once we&rsquo;ve imported the <code>patch</code> annotation, we can use it to create fake objects for our test methods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Person</span> <span class="kn">import</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Teacher</span> <span class="kn">import</span> <span class="n">Teacher</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">places.Classroom</span> <span class="kn">import</span> <span class="n">Classroom</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Teacher&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Person&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_classroom_has_teacher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fake_person</span><span class="p">,</span> <span class="n">fake_teacher</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># test code</span>
</span></span><span class="line"><span class="cl">    </span></span></code></pre></div><p>This will create fake objects <code>fake_person</code> and <code>fake_teacher</code> that mimic the attributes and methods contained in the <code>Person</code> and <code>Teacher</code> classes, respectively. However, by default, those objects won&rsquo;t do anything, and most methods will not actually work by default.</p>
<p>Notice that the fake objects are added as parameters to our test method, but they are added in reverse order. This is because method annotations are interpreted &ldquo;inside-out&rdquo;, so the one at the bottom, closest to the method, is interpreted first. So, in this example, our <code>fake_person</code> will be created first, followed by our <code>fake_teacher</code>.</p>
<p>Without doing anything else, we can use these fake objects in place of the real ones, as in this test:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Person</span> <span class="kn">import</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Teacher</span> <span class="kn">import</span> <span class="n">Teacher</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">places.Classroom</span> <span class="kn">import</span> <span class="n">Classroom</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Teacher&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Person&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_classroom_has_teacher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fake_person</span><span class="p">,</span> <span class="n">fake_teacher</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="p">:</span> <span class="n">Classroom</span> <span class="o">=</span> <span class="n">Classroom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">classroom</span><span class="o">.</span><span class="n">has_teacher</span> <span class="o">==</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="o">.</span><span class="n">add_teacher</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">classroom</span><span class="o">.</span><span class="n">has_teacher</span> <span class="o">==</span> <span class="kc">True</span> </span></span></code></pre></div><p>As we can see, we are able to add the <code>fake_teacher</code> object to our classroom, and it is treated just like any other <code>Teacher</code> object, at least as far as the system is concerned thus far.</p>
<p>However, if we want those fake objects to do something, we have to include method stubs as well.</p>
<h2 id="adding-stubs">Adding Stubs</h2>
<p>To add a method stub to a fake object, we can set the <code>return_value</code> of the method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Person</span> <span class="kn">import</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Teacher</span> <span class="kn">import</span> <span class="n">Teacher</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">places.Classroom</span> <span class="kn">import</span> <span class="n">Classroom</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Teacher&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Person&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_classroom_get_teacher_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fake_person</span><span class="p">,</span> <span class="n">fake_teacher</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># create a method stub for `get_name` method</span>
</span></span><span class="line"><span class="cl">        <span class="n">fake_teacher</span><span class="o">.</span><span class="n">get_name</span><span class="o">.</span><span class="n">return_value</span> <span class="o">=</span> <span class="s2">&#34;Teacher Person&#34;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="p">:</span> <span class="n">Classroom</span> <span class="o">=</span> <span class="n">Classroom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="o">.</span><span class="n">add_teacher</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># assert that the classroom returns the teacher&#39;s name</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">classroom</span><span class="o">.</span><span class="n">get_teacher_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&#34;Teacher Person&#34;</span></span></span></code></pre></div><p>In this example, we are adding a method stub to our <code>fake_teacher</code> object that will return <code>&quot;Teacher Person&quot;</code> whenever the <code>get_name()</code> method is called. Then, we are adding that fake <code>Teacher</code> object to the <code>Classroom</code> class that we are testing, and calling the <code>get_teacher_name()</code> method. We&rsquo;re assuming that the <code>get_teacher_name()</code> method in the <code>Classroom</code> class calls the <code>get_name()</code> method of the <code>Teacher</code> object contained in the class. However, instead of using a real <code>Teacher</code> instance, we&rsquo;ve provided a fake object that only knows what to do when that one method is called. So, it returns the value we expect, which passes our test!</p>
<h2 id="stubbing-properties">Stubbing Properties</h2>
<p>If our classes use properties instead of traditional getter and setter methods, we have to create our property stubs in a slightly different way:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span><span class="p">,</span> <span class="n">PropertyMock</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Person</span> <span class="kn">import</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Teacher</span> <span class="kn">import</span> <span class="n">Teacher</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">places.Classroom</span> <span class="kn">import</span> <span class="n">Classroom</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Teacher&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Person&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_classroom_get_teacher_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fake_person</span><span class="p">,</span> <span class="n">fake_teacher</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># create a property stub for `get_name` property</span>
</span></span><span class="line"><span class="cl">        <span class="nb">type</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">PropertyMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="s2">&#34;Teacher Person&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="p">:</span> <span class="n">Classroom</span> <span class="o">=</span> <span class="n">Classroom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">classroom</span><span class="o">.</span><span class="n">add_teacher</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># assert that the classroom returns the teacher&#39;s name</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">classroom</span><span class="o">.</span><span class="n">get_teacher_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&#34;Teacher Person&#34;</span></span></span></code></pre></div><p>In this case, we are creating an instance of the <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.PropertyMock" rel="external" target="_blank">PropertyMock</a> class that acts as a fake property for an object. However, because of how fake objects work, we cannot directly attach the <code>PropertyMock</code> instance directly to the <code>fake_teacher</code> object. Instead, we must attach it to the mock type object, which we can access by using the <code>type</code> method. Thankfully, even if we have several fake instances of the same class, these properties will be unique to the fake instance, not to the class they are faking.</p>
<h2 id="faking-static-classes">Faking Static Classes</h2>
<p>There is one more complex use case we may run into in our testing - creating a fake version of a class with static methods.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span><span class="p">,</span> <span class="n">PropertyMock</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Person</span> <span class="kn">import</span> <span class="n">Person</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">people.Teacher</span> <span class="kn">import</span> <span class="n">Teacher</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">places.Classroom</span> <span class="kn">import</span> <span class="n">Classroom</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rules.TeacherRules</span> <span class="kn">import</span> <span class="n">TeacherRules</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pytest</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestClassroom</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Teacher&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Teacher</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;people.Person&#39;</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_teacher_fails_minimum_age_requirement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fake_person</span><span class="p">,</span> <span class="n">fake_teacher</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># create a fake version of the static method</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">object</span><span class="p">(</span><span class="n">TeacherRules</span><span class="p">,</span> <span class="s1">&#39;get_minimum_age&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">            <span class="c1"># Add a fake property to the teacher</span>
</span></span><span class="line"><span class="cl">            <span class="nb">type</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">PropertyMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">classroom</span><span class="p">:</span> <span class="n">Classroom</span> <span class="o">=</span> <span class="n">Classroom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">classroom</span><span class="o">.</span><span class="n">add_teacher</span><span class="p">(</span><span class="n">fake_teacher</span><span class="p">)</span></span></span></code></pre></div><p>In this example, we have a <code>TeacherRules</code> class that includes a static method <code>get_minimum_age()</code> that returns the minimum age allowed for a teacher. To test this, we are creating a fake version of that static method using the <code>patch.object</code> method. We have to do this in a with statement, which makes sure that the fake method does not persist outside of this test. In this case, we&rsquo;ll set that method to return a value of <code>16</code>.</p>
<p>We&rsquo;ll also add a method stub to return an invalid age on our fake <code>Teacher</code> object. Finally, when we try to add that teacher to a classroom, it should raise an exception since the teacher is not old enough.</p>
<p>This is a very brief introduction to using test doubles made with the unittest.mock library, but it should be enough for our use in this class. Feel free to refer to some of the documentation linked below for more examples and information.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://docs.python.org/3/library/unittest.mock.html" rel="external" target="_blank">unittest.mock</a> Documentatio</li>
<li><a href="https://realpython.com/python-mock-library/" rel="external" target="_blank">Understanding the Python Mock Object Library</a> from Real Python</li>
</ul>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>



<script src="/cc410/js/clipboard.min.js?1737485166" defer></script>
<script src="/cc410/js/perfect-scrollbar.min.js?1737485166" defer></script>
<script src="/cc410/js/theme.js?1737485166" defer></script>

<script src="/cc410/js/embed-iframe.js?1737485166" defer></script>
</body>
</html>
