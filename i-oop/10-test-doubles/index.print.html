<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Mimicking and making a “mock&#34;ery of testing!">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Test Doubles :: CC 410 Textbook">
    <meta name="twitter:description" content="Mimicking and making a “mock&#34;ery of testing!">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Test Doubles :: CC 410 Textbook">
    <meta property="og:description" content="Mimicking and making a “mock&#34;ery of testing!">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Test Doubles :: CC 410 Textbook">
    <meta itemprop="description" content="Mimicking and making a “mock&#34;ery of testing!">
    <meta itemprop="datePublished" content="2021-08-17T00:00:00+00:00">
    <meta itemprop="dateModified" content="2023-08-10T16:05:23-05:00">
    <meta itemprop="wordCount" content="7">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Test Doubles :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/index.html" rel="canonical" type="text/html" title="Test Doubles :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/index.xml" rel="alternate" type="application/rss+xml" title="Test Doubles :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/tele.html" rel="alternate" type="text/html" title="Test Doubles :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/embed.html" rel="alternate" type="text/html" title="Test Doubles :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1755708720" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1755708720" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1755708720" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1755708720" defer></script>
    <script src="/cc410/js/search.min.js?1755708720" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1755708720";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1755708720" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1755708720" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1755708720" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1755708720" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1755708720" rel="stylesheet">
    <link href="/cc410/css/format-print.min.css?1755708720" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/i-oop\/10-test-doubles\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1755708720" rel="stylesheet">
  </head>
  <body class="mobile-support embed print" data-url="/cc410/i-oop/10-test-doubles/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable i-oop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="test-doubles">Test Doubles</h1>

<p>Mimicking and making a &ldquo;mock&quot;ery of testing!</p>

  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Test Doubles</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="introduction">Introduction</h1>

<p>Earlier in this course, we learned about unit testing and how we can write code to help us verify that parts of our program are performing as intended. However, what if the portion of our program we&rsquo;d like to test depends on other parts working correctly? In that case, any errors in our tests might be due to our code having a bug, but it could also be due to a bug in another part of the program that our code depends on.</p>
<p>So, we need some way to test parts of our code <em>in isolation</em> from the rest of the program. In that way, we can make sure our code is working as intended, even if the parts it depends on to function aren&rsquo;t working.</p>
<p>Enter <strong>test doubles</strong> - items such as <strong>stubs</strong>, <strong>fakes</strong> and <strong>mocks</strong> - which are temporary objects we can include in our unit tests to mimic, or &ldquo;double,&rdquo; the functionality of another part in our program. In that way, we can write our test as if the other portion is working, regardless of whether it is or not.</p>
<p>In this chapter, we&rsquo;ll learn about the following key terms and ideas:</p>
<ul>
<li>Test Doubles</li>
<li>Stub Methods, or Stubs</li>
<li>Fake Objects, or Fakes</li>
<li>Mock Objects, or Mocks</li>
<li>Arrange, Act, Assert</li>
</ul>
<p>We&rsquo;ll also see a brief example for how to create and use some of these items in our chosen programming language. After reviewing this content, we should be able to use some test doubles in our own unit test code.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="need-for-test-doubles">Need for Test Doubles</h1>


<a href="https://www.youtube.com/watch?v=mJIS9K260_o">YouTube Video</a>

<p><a href="/cc410/i-oop/10-test-doubles/02-need-test-doubles/video/index.html">Video Materials</a></p>
<p>As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the <strong>application programming interface</strong> or <strong>API</strong> of the module.</p>
<p>Ideally, we&rsquo;d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program. This is a key part of the design principle <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" rel="external" target="_blank"><strong>separation of concerns</strong></a>, which involves breaking larger systems down into distinct sections that address a particular &ldquo;concern&rdquo; within the larger system.</p>
<p><a href="#R-image-051b0d33adc07efbf982855ca2cea05f" class="lightbox-link"><img alt="Complexity to Categorization" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/13/complex1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-051b0d33adc07efbf982855ca2cea05f"><img alt="Complexity to Categorization" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/13/complex1.png"></a><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>So, by categorizing the individual classes in our application based on similarity, we can then start to organize our application into modules of code that are somewhat independent of each other. They still interact through the public APIs of each module, but the internal workings of one module should not be visible to another.</p>
<p><a href="#R-image-fc37e08709c31b4cf432f7f151114c7d" class="lightbox-link"><img alt="Categorization to Abstraction" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/13/complex2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fc37e08709c31b4cf432f7f151114c7d"><img alt="Categorization to Abstraction" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/13/complex2.png"></a><sup id="fnref1:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>Once we start writing unit tests for our code, we can start to <strong>abstract</strong> away the details of other modules in the system, and focus just on the internal workings of the single unit of code, usually a class or method, that we intend to test.</p>
<p>However, this is difficult when our code has to call methods that are present in another module. How can we test our code and make sure it works, without also having to test that the module it is calling also works correctly and returns a correct value? If we cannot figure out a way to do this, then unit testing our code is not very helpful since it won&rsquo;t allow us to accurately pinpoint the location of an error.</p>
<h2 id="test-doubles">Test Doubles</h2>
<p>This is where the concept of <strong>test doubles</strong> comes in. Let&rsquo;s say our code needs to call a method called <code>getArea()</code> that is part of the API of another module, which will calculate the area of a given shape. All our code needs to do is compare the returned value of that method with a few key values, and display a result.</p>
<p>Depending on the shape, calculating the area can be a computationally intensive process, so we probably don&rsquo;t want to do that many times in our unit tests. In addition, since that method is contained in another module, we definitely don&rsquo;t want to test that it actually returns the correct answer.</p>
<p>Instead, we just know that the API of that module says that the <code>getArea()</code> method will return a floating-point value that is non-negative. This is a postcondition that is well documented in the API, so as long as that module is working correctly, we know that the <code>getArea()</code> method will return some non-negative floating-point value.</p>
<p>Therefore, instead of calling the <code>getArea()</code> method that is contained in the external module, we can create a <strong>stub method</strong> that simply returns a non-negative floating-point value. Then, whenever our code calls <code>getArea()</code>, we can intercept that message and direct it instead to our stub method, which quickly returns a valid value that we can use in our tests. We can even modify the stub to return either the exact values we want, or just any random value.</p>
<p>There are many more powerful things we can do with these test doubles, such as:</p>
<ul>
<li>Verify that a particular method is called within our code based on an input condition</li>
<li>Produce some fake data that our code can operate on that is not provided via arguments (an &ldquo;indirect input&rdquo;)</li>
<li>Verify that our code updates data in another module properly (an &ldquo;indirect output&rdquo;)</li>
<li>Observe how many times our code instantiates a particular type of object.</li>
</ul>
<p>Test doubles are a crucial part of writing more useful and advanced unit tests, especially as our programs become larger and we wish to test portions of the code that are integrated with other modules.</p>
<h4 id="references">References</h4>
<ul>
<li><a href="http://xunitpatterns.com/Test%20Double.html" rel="external" target="_blank">Test Double</a> at xUnit Patterns</li>
<li><a href="https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da" rel="external" target="_blank">Test Doubles - Fakes, Mocks and Stubs</a> at Pragmatists blog</li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://medium.com/upstart-tech/software-design-separation-of-concerns-unit-testing-b38ece31e5f3" rel="external" target="_blank">https://medium.com/upstart-tech/software-design-separation-of-concerns-unit-testing-b38ece31e5f3</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a>&#160;<a href="#fnref1:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="arrange-act-assert">Arrange, Act, Assert</h1>

<p>Most of our unit tests have been following a particular pattern, commonly called <strong>arrange, act, assert.</strong> Let&rsquo;s quickly review that pattern, as it is very important to understand how it integrates with the use of test doubles later in this chapter.</p>
<p>A simple unit test following the arrange, act, assert pattern consists of three major steps:</p>
<ol>
<li><strong>Arrange</strong> - first, the objects to be tested and any supporting data is created within the test.</li>
<li><strong>Act</strong> - secondly, the operation being tested is carried out, usually by calling one or more methods.</li>
<li><strong>Assert</strong> - once the operation is complete, we use assertions to verify that the outcome of the operation is correct.</li>
</ol>
<p>In some instances, we may also include a fourth step, <strong>Teardown</strong>, which is used to reset the state back to its initial state, if needed. There are times when our arrange step makes some changes to the environment that must be reversed before we can continue.</p>
<p>Let&rsquo;s go back to a unit test you may have explored in example 3 and see how it fits the arrange, act, assert pattern.</p>
<div class="tab-panel" data-tab-group="17d72203954d3a29a8ee02efcb7ed2ac">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="java"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('17d72203954d3a29a8ee02efcb7ed2ac','java')"
    >
      <span class="tab-nav-text">Java</span>
    </button>
    <button
      data-tab-item="python"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('17d72203954d3a29a8ee02efcb7ed2ac','python')"
    >
      <span class="tab-nav-text">Python</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="java"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSevenWrongGuessesShouldLose</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Arrange</span>
</span></span><span style="display:flex;"><span>    GuessingGame game <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> GuessingGame(<span style="color:#e6db74">&#34;secret&#34;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Act</span>
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;a&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;b&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;d&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;f&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;g&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;h&#39;</span>);
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">guess</span>(<span style="color:#e6db74">&#39;i&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Assert</span>
</span></span><span style="display:flex;"><span>    assertTrue(game.<span style="color:#a6e22e">isLost</span>());
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
      </div>
    </div>
    <div
      data-tab-item="python"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_seven_wrong_guesses_should_lose</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Arrange</span>
</span></span><span style="display:flex;"><span>    game <span style="color:#f92672">=</span> GuessingGame(<span style="color:#e6db74">&#34;secret&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Act</span>
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;b&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;d&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;f&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;g&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;h&#39;</span>)
</span></span><span style="display:flex;"><span>    game<span style="color:#f92672">.</span>guess(<span style="color:#e6db74">&#39;i&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Assert</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">assert</span> game<span style="color:#f92672">.</span>lost</span></span></code></pre></div>
      </div>
    </div>
  </div>
</div>
<p>In both of these tests, we start in the <strong>arrange</strong> portion by instantiating a <code>GuessingGame</code> object, which is the object we will be testing. Then, in the <strong>act</strong> phase, we call several methods in the <code>GuessingGame</code> object - in this case, we are checking that seven incorrect guesses should cause the game to be lost, so we must make seven incorrect guesses. Finally, in the <strong>assert</strong> section, we use a simple assertion to make sure the game has been lost.</p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Behavior-Driven Development
  </summary>
  <div class="box-content">
<p>One common alternative to this approach comes from <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="external" target="_blank"><strong>behavior-driven development</strong></a>. In this development process, which is effectively an extension of the <a href="https://en.wikipedia.org/wiki/Test-driven_development" rel="external" target="_blank">test-driven development</a> process we&rsquo;ve learned about, software specifications are written to match the behaviors that a user might expect to see when the application is running. Such a specification typically follows a <a href="https://en.wikipedia.org/wiki/Given-When-Then" rel="external" target="_blank"><strong>given, when, then</strong></a> structure. Here&rsquo;s a short example of a specification from <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="external" target="_blank">Wikipedia</a>.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>Given a 5 by 5 game
</span></span><span style="display:flex;"><span>When I toggle the cell at (3, 2)
</span></span><span style="display:flex;"><span>Then the grid should look like
</span></span><span style="display:flex;"><span>.....
</span></span><span style="display:flex;"><span>.....
</span></span><span style="display:flex;"><span>.....
</span></span><span style="display:flex;"><span>..X..
</span></span><span style="display:flex;"><span>.....</span></span></code></pre></div>
<p>The beauty of such a specification is that it can be easily read by a non-technical user, and allows quick and easy discussion with end users and clients regarding how the software should actually function. Once the specification is developed, we can then write unit tests that will use the specification and verify that the program operates as intended. Here&rsquo;s an example from <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="external" target="_blank">Wikipedia</a> in Java using the <a href="https://jbehave.org/" rel="external" target="_blank">JBehave</a> framework.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Game game;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> StringRenderer renderer;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Given</span>(<span style="color:#e6db74">&#34;a $width by $height game&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">theGameIsRunning</span>(<span style="color:#66d9ef">int</span> width, <span style="color:#66d9ef">int</span> height) {
</span></span><span style="display:flex;"><span>    game <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Game(width, height);
</span></span><span style="display:flex;"><span>    renderer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringRenderer();
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">setObserver</span>(renderer);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@When</span>(<span style="color:#e6db74">&#34;I toggle the cell at ($column, $row)&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">iToggleTheCellAt</span>(<span style="color:#66d9ef">int</span> column, <span style="color:#66d9ef">int</span> row) {
</span></span><span style="display:flex;"><span>    game.<span style="color:#a6e22e">toggleCellAt</span>(column, row);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Then</span>(<span style="color:#e6db74">&#34;the grid should look like $grid&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">theGridShouldLookLike</span>(String grid) {
</span></span><span style="display:flex;"><span>    assertThat(renderer.<span style="color:#a6e22e">asString</span>(), equalTo(grid));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>This testing strategy requires a bit more work than the unit testing we&rsquo;ve covered in this course, but it can be very powerful when put into use.</p>
  </div>
</details>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="stubs">Stubs</h1>


<a href="https://www.youtube.com/watch?v=SQUTcxc3RYo">YouTube Video</a>

<p><a href="/cc410/i-oop/10-test-doubles/04-stubs/video/index.html">Video Materials</a></p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Inconsistent Naming
  </summary>
  <div class="box-content">
<p>Unfortunately, the naming of many of these test doubles, such as stubs, mocks, and fakes, are used either inconsistently or interchangeably within different systems, documentation, and other resources. I&rsquo;m going to stick to one particular naming scheme, which is best described in the resources linked earlier in this chapter. However, in practice, these terms may be used differently in different areas.</p>
  </div>
</details>
<p>There are three major types of test doubles that we&rsquo;ll cover in this chapter. The first are <strong>stubs</strong>, sometimes referred to as <strong>stub methods</strong> or <strong>method stubs</strong>. A <a href="https://en.wikipedia.org/wiki/Method_stub" rel="external" target="_blank">stub</a> is simply an object that is used to return predefined data when its methods are called, without any internal logic.</p>
<p><a href="#R-image-b1b548aa9827a0a9b42a89d4cc0a5014" class="lightbox-link"><img alt="Stub" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/13/stub.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b1b548aa9827a0a9b42a89d4cc0a5014"><img alt="Stub" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/13/stub.png"></a><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>For example, if the methods we are testing should sum up the data that results from several calls to a method that is outside of our module, we could create a stub that simply returns the values 1 - 5, and then verify that our method calculates the sum of 15. In this way, we&rsquo;re verifying that our code works as intended (it sums the values), without really worrying whether the other module returns correct data or not.</p>
<p>The only thing we must be careful with when creating these stubs is that the data they return is plausible for the test we are performing. If the data should be valid, then we should be careful to return values that are the correct type and within the correct range. Likewise, if we want to test any possible error conditions or invalid values, we&rsquo;ll have to make sure our stub returns the appropriate values as the real object would.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da" rel="external" target="_blank">https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="fakes">Fakes</h1>

<p>Another commonly used test double is a <strong>fake</strong>, sometimes referred to as a <strong>fake object</strong>. A <a href="https://en.wikipedia.org/wiki/Mock_object" rel="external" target="_blank">fake</a> is an object that implements the same external interface that the real object would implement - it includes all of the same publicly available methods and attributes. However, the implementations of those methods may take certain shortcuts to mimic pieces of functionality that are not really needed in order to produce valid results. (Many test frameworks use the term <strong>mock object</strong> for the same concept; however, we&rsquo;ll use that term on the next page for a slightly different use.)</p>
<p><a href="#R-image-f9f2d46a057a47721d3449874637c888" class="lightbox-link"><img alt="Fake" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/13/fake.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f9f2d46a057a47721d3449874637c888"><img alt="Fake" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/13/fake.png"></a><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>For example, if we have an object responsible for storing data in a database, we could create a fake version of it that can store data in a hash table instead. It will still be able to store objects and retrieve them, but instead of using a real database with millions of records, it will just store a few items in a hash table that can be reloaded for each unit test.</p>
<p>Likewise, if the object performs a long, complex calculation, a fake version of the object might include precomputed data that can be quickly returned without performing the computation. In that way, the data stored in the object corresponds to the results it provides, without the need to perform any costly computational steps during each unit test.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da" rel="external" target="_blank">https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="mocks">Mocks</h1>

<p>The third type of test double we&rsquo;ll cover is the <strong>mock object</strong>, sometimes referred to as a <strong>test spy</strong>. A mock object is typically used to verify that our code performs the correct actions on other parts of the system. Usually, the mock object will simply listen for any incoming method calls, and then once our action is complete we can verify that the correct methods were called with the correct inputs by examining our mock object.</p>
<p><a href="#R-image-f059866cefb41c657ef5535f673faf5b" class="lightbox-link"><img alt="Mock" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/13/mock.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f059866cefb41c657ef5535f673faf5b"><img alt="Mock" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/13/mock.png"></a><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>For example, if the code we are testing is responsible for calling a method in another module to update the GUI for our application, we can replace that GUI with a mock object, run the code, and then verify that the correct method in our mock object was called during the test. Likewise, we can make sure that other methods were not called.</p>
<p>This is another great example of an &ldquo;indirect output&rdquo; of our code. However, instead of data being the output, the messages sent as method calls are the data that our code is producing.</p>
<p>As we can see, test doubles are powerful tools we can use to enhance our ability to perform unit tests on our system. On the following pages, we&rsquo;ll briefly review how to use different test doubles in both Java and Python. As always, feel free to skip to the page for the language you are learning, but both pages may contain helpful information.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da" rel="external" target="_blank">https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="test-doubles-in-junit">Test Doubles in JUnit</h1>


<a href="https://www.youtube.com/watch?v=sSokD2zkA8A">YouTube Video</a>

<p><a href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/video/index.html">Video Materials</a></p>
<p>To create test doubles in JUnit, we&rsquo;ll rely on a separate library called Mockito. <a href="https://site.mockito.org/" rel="external" target="_blank">Mockito</a> is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.</p>
<h2 id="installing-mockito-in-gradle">Installing Mockito in Gradle</h2>
<p>To install Mockito, we just update the <code>testImplementation</code> line in our <code>build.gradle</code> file to include both the <code>mockito-inline</code> library, as well as the <code>mockito-junit-jupiter</code> library that allows Mockito and JUnit to work together seamlessly.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>dependencies <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter API for testing.
</span></span></span><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"></span>    testImplementation <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-api:5.6.2&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.hamcrest:hamcrest:2.2&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-params&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.mockito:mockito-inline:3.8.0&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.mockito:mockito-junit-jupiter:3.8.0&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter Engine for testing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    testRuntimeOnly <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-engine&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This dependency is used by the application.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    implementation <span style="color:#e6db74">&#39;com.google.guava:guava:29.0-jre&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<h2 id="adding-mockito-to-a-test-class">Adding Mockito to a Test Class</h2>
<p>There are many different ways to use Mockito with JUnit. One of the easiest ways that works in the latest versions of Mockito and JUnit is to use the <code>@ExtendWith</code> annotation above our test class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.extension.ExtendWith;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoExtension;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ExtendWith</span>(MockitoExtension.<span style="color:#a6e22e">class</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>By including that annotation above our test class declaration, Mockito will automatically perform any setup steps required. In earlier versions of JUnit and Mockito, we would have to do these steps manually, but this process has been greatly simplified recently.</p>
<p>One thing we can do is modify this a bit to set Mockito to use <a href="https://javadoc.io/static/org.mockito/mockito-core/3.8.0/org/mockito/quality/Strictness.html#STRICT_STUBS" rel="external" target="_blank">STRICT_STUBS</a>. This tells Mockito to print errors when we create any test doubles that aren&rsquo;t used, and the ones that are used are created properly. So, instead of using <code>@ExtendWith</code>, we can instead use <code>@MockitoSettings</code>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Since this is recommended by the Mockito documentation, we&rsquo;ll go ahead and use it in our code.</p>
<h2 id="creating-fake-objects">Creating Fake Objects</h2>
<p>Once we&rsquo;ve added Mockito to our test class, we can create fake objects using the <code>@Mock</code> annotation above object declarations. This is commonly done on global objects in our test class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>This will create fake objects that mimic the attributes and methods contained in the <code>Person</code> and <code>Teacher</code> class. However, by default, those objects won&rsquo;t do anything, and most methods will just return the default value for the return type of the method.</p>
<p>Without doing anything else, we can use these fake objects in place of the real ones, as in this test:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testClassroomHasTeacher</span>() {
</span></span><span style="display:flex;"><span>        Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom()
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">hasTeacher</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher);
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">hasTeacher</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>As we can see, we are able to add the <code>mockTeacher</code> object to our classroom, and it is treated just like any other <code>Teacher</code> object, at least as far as the system is concerned thus far.</p>
<p>However, if we want those fake objects to do something, we have to include method stubs as well.</p>
<h2 id="adding-stubs">Adding Stubs</h2>
<p>To add a method stub to a fake object, we can use the <code>when</code> method in Mockito. Here&rsquo;s an example:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testClassroomGetTeacherName</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// create a method stub for `getName`</span>
</span></span><span style="display:flex;"><span>        when(mockTeacher.<span style="color:#a6e22e">getName</span>()).<span style="color:#a6e22e">thenReturn</span>(<span style="color:#e6db74">&#34;Teacher Person&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom();
</span></span><span style="display:flex;"><span>        classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// assert that the classroom returns the teacher&#39;s name</span>
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">getTeacherName</span>().<span style="color:#a6e22e">equals</span>(<span style="color:#e6db74">&#34;Teacher Person&#34;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>In this example, we are adding a method stub to our <code>mockTeacher</code> object that will return <code>&quot;Teacher Person&quot;</code> whenever the <code>getName()</code> method is called. Then, we are adding that fake <code>Teacher</code> object to the <code>Classroom</code> class that we are testing, and calling the <code>getTeacherName()</code> method. We&rsquo;re assuming that the <code>getTeacherName()</code> method in the <code>Classroom</code> class calls the <code>getName()</code> method of the <code>Teacher</code> object contained in the class. However, instead of using a real <code>Teacher</code> instance, we&rsquo;ve provided a fake object that only knows what to do when that one method is called. So, it returns the value we expect, which passes our test!</p>
<h2 id="faking-static-classes">Faking Static Classes</h2>
<p>There is one more complex use case we may run into in our testing - creating a fake version of a class with static methods. This is a relatively new feature in Mockito, but it allows us to test some functionality that is otherwise very difficult to mimic.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertThrows;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.lang.IllegalArgumentException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.MockedStatic;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mockito;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testTeacherFailsMinimumAgeRequirement</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Create mock static class</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (MockedStatic<span style="color:#f92672">&lt;</span>TeacherRules<span style="color:#f92672">&gt;</span> mockTeacherRules <span style="color:#f92672">=</span> Mockito.<span style="color:#a6e22e">mockStatic</span>(TeacherRules.<span style="color:#a6e22e">class</span>)) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create method stub for static class</span>
</span></span><span style="display:flex;"><span>            mockTeacherRules.<span style="color:#a6e22e">when</span>(() <span style="color:#f92672">-&gt;</span> TeacherRules.<span style="color:#a6e22e">getMinAge</span>()).<span style="color:#a6e22e">thenReturn</span>(16);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create method stub for fake Teacher</span>
</span></span><span style="display:flex;"><span>            when(mockTeacher.<span style="color:#a6e22e">getAge</span>()).<span style="color:#a6e22e">thenReturn</span>(15);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Test functionality</span>
</span></span><span style="display:flex;"><span>            Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom();
</span></span><span style="display:flex;"><span>            assertThrows(IllegalArgumentException.<span style="color:#a6e22e">class</span>, () <span style="color:#f92672">-&gt;</span> classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>In this example, we have a <code>TeacherRules</code> class that includes a static method <code>getMinAge()</code> that returns the minimum age allowed for a teacher. To test this, we are creating a fake version of that class using the <code>Mockito.mockStatic()</code> method. We have to do this in a try with resources statement, which makes sure that the fake class does not persist outside of this test.</p>
<p>Once we&rsquo;ve created the fake class <code>mockTeacherRules</code>, we can add a method stub for the static method. We&rsquo;ll also add a method stub to return an invalid age on our fake <code>Teacher</code> object. Finally, when we try to add that teacher to a classroom, it should throw an exception since the teacher is not old enough.</p>
<p>This is a very brief introduction to using test doubles made with Mockito, but it should be enough for our use in this class. Feel free to refer to some of the documentation linked below for more examples and information.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://site.mockito.org/" rel="external" target="_blank">Mockito Official Site</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/index.html" rel="external" target="_blank">Mockito Javadoc</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-junit-jupiter/latest/index.html" rel="external" target="_blank">Mockito JUnit Javadoc</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html" rel="external" target="_blank">Mockito Class Documentation</a></li>
<li><a href="https://www.baeldung.com/mockito-series" rel="external" target="_blank">Mockito Series</a> from Baeldung</li>
<li><a href="https://www.vogella.com/tutorials/Mockito/article.html" rel="external" target="_blank">Unit Tests with Mockit</a> from Vogella</li>
</ul>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="test-doubles-in-pytest">Test Doubles in pytest</h1>


<a href="https://www.youtube.com/watch?v=pNqcrx785Gs">YouTube Video</a>

<p><a href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/video/index.html">Video Materials</a></p>
<p>To create test doubles in Python, we&rsquo;ll rely on the built-in <a href="https://docs.python.org/3/library/unittest.mock.html" rel="external" target="_blank">unittest.mock</a> library. It includes lots of quick and easy methods for creating fake objects in Python, and it is compatible with the pytest testing framework that we&rsquo;re already using.</p>
<h2 id="adding-mocks-to-a-test-class">Adding Mocks to a Test Class</h2>
<p>There are many different ways to use the <code>unittest.mock</code> library. One of the easiest ways is to import the <code>patch</code> annotation</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># tests here</span>
</span></span><span style="display:flex;"><span>    </span></span></code></pre></div>
<h2 id="creating-fake-objects">Creating Fake Objects</h2>
<p>Once we&rsquo;ve imported the <code>patch</code> annotation, we can use it to create fake objects for our test methods.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Person <span style="color:#f92672">import</span> Person
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Teacher <span style="color:#f92672">import</span> Teacher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> places.Classroom <span style="color:#f92672">import</span> Classroom
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Teacher&#39;</span>, spec<span style="color:#f92672">=</span>Teacher)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Person&#39;</span>, spec<span style="color:#f92672">=</span>Person)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_classroom_has_teacher</span>(self, fake_person, fake_teacher) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># test code</span>
</span></span><span style="display:flex;"><span>    </span></span></code></pre></div>
<p>This will create fake objects <code>fake_person</code> and <code>fake_teacher</code> that mimic the attributes and methods contained in the <code>Person</code> and <code>Teacher</code> classes, respectively. However, by default, those objects won&rsquo;t do anything, and most methods will not actually work by default.</p>
<p>Notice that the fake objects are added as parameters to our test method, but they are added in reverse order. This is because method annotations are interpreted &ldquo;inside-out&rdquo;, so the one at the bottom, closest to the method, is interpreted first. So, in this example, our <code>fake_person</code> will be created first, followed by our <code>fake_teacher</code>.</p>
<p>Without doing anything else, we can use these fake objects in place of the real ones, as in this test:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Person <span style="color:#f92672">import</span> Person
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Teacher <span style="color:#f92672">import</span> Teacher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> places.Classroom <span style="color:#f92672">import</span> Classroom
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Teacher&#39;</span>, spec<span style="color:#f92672">=</span>Teacher)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Person&#39;</span>, spec<span style="color:#f92672">=</span>Person)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_classroom_has_teacher</span>(self, fake_person, fake_teacher) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        classroom: Classroom <span style="color:#f92672">=</span> Classroom()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> classroom<span style="color:#f92672">.</span>has_teacher <span style="color:#f92672">==</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        classroom<span style="color:#f92672">.</span>add_teacher(fake_teacher)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> classroom<span style="color:#f92672">.</span>has_teacher <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span> </span></span></code></pre></div>
<p>As we can see, we are able to add the <code>fake_teacher</code> object to our classroom, and it is treated just like any other <code>Teacher</code> object, at least as far as the system is concerned thus far.</p>
<p>However, if we want those fake objects to do something, we have to include method stubs as well.</p>
<h2 id="adding-stubs">Adding Stubs</h2>
<p>To add a method stub to a fake object, we can set the <code>return_value</code> of the method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Person <span style="color:#f92672">import</span> Person
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Teacher <span style="color:#f92672">import</span> Teacher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> places.Classroom <span style="color:#f92672">import</span> Classroom
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Teacher&#39;</span>, spec<span style="color:#f92672">=</span>Teacher)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Person&#39;</span>, spec<span style="color:#f92672">=</span>Person)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_classroom_get_teacher_name</span>(self, fake_person, fake_teacher) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># create a method stub for `get_name` method</span>
</span></span><span style="display:flex;"><span>        fake_teacher<span style="color:#f92672">.</span>get_name<span style="color:#f92672">.</span>return_value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Teacher Person&#34;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        classroom: Classroom <span style="color:#f92672">=</span> Classroom()
</span></span><span style="display:flex;"><span>        classroom<span style="color:#f92672">.</span>add_teacher(fake_teacher)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># assert that the classroom returns the teacher&#39;s name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> classroom<span style="color:#f92672">.</span>get_teacher_name() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Teacher Person&#34;</span></span></span></code></pre></div>
<p>In this example, we are adding a method stub to our <code>fake_teacher</code> object that will return <code>&quot;Teacher Person&quot;</code> whenever the <code>get_name()</code> method is called. Then, we are adding that fake <code>Teacher</code> object to the <code>Classroom</code> class that we are testing, and calling the <code>get_teacher_name()</code> method. We&rsquo;re assuming that the <code>get_teacher_name()</code> method in the <code>Classroom</code> class calls the <code>get_name()</code> method of the <code>Teacher</code> object contained in the class. However, instead of using a real <code>Teacher</code> instance, we&rsquo;ve provided a fake object that only knows what to do when that one method is called. So, it returns the value we expect, which passes our test!</p>
<h2 id="stubbing-properties">Stubbing Properties</h2>
<p>If our classes use properties instead of traditional getter and setter methods, we have to create our property stubs in a slightly different way:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch, PropertyMock
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Person <span style="color:#f92672">import</span> Person
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Teacher <span style="color:#f92672">import</span> Teacher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> places.Classroom <span style="color:#f92672">import</span> Classroom
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Teacher&#39;</span>, spec<span style="color:#f92672">=</span>Teacher)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Person&#39;</span>, spec<span style="color:#f92672">=</span>Person)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_classroom_get_teacher_name</span>(self, fake_person, fake_teacher) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># create a property stub for `get_name` property</span>
</span></span><span style="display:flex;"><span>        type(fake_teacher)<span style="color:#f92672">.</span>name <span style="color:#f92672">=</span> PropertyMock(return_value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Teacher Person&#34;</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        classroom: Classroom <span style="color:#f92672">=</span> Classroom()
</span></span><span style="display:flex;"><span>        classroom<span style="color:#f92672">.</span>add_teacher(fake_teacher)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># assert that the classroom returns the teacher&#39;s name</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> classroom<span style="color:#f92672">.</span>get_teacher_name() <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Teacher Person&#34;</span></span></span></code></pre></div>
<p>In this case, we are creating an instance of the <a href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.PropertyMock" rel="external" target="_blank">PropertyMock</a> class that acts as a fake property for an object. However, because of how fake objects work, we cannot directly attach the <code>PropertyMock</code> instance directly to the <code>fake_teacher</code> object. Instead, we must attach it to the mock type object, which we can access by using the <code>type</code> method. Thankfully, even if we have several fake instances of the same class, these properties will be unique to the fake instance, not to the class they are faking.</p>
<h2 id="faking-static-classes">Faking Static Classes</h2>
<p>There is one more complex use case we may run into in our testing - creating a fake version of a class with static methods.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> unittest.mock <span style="color:#f92672">import</span> patch, PropertyMock
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Person <span style="color:#f92672">import</span> Person
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> people.Teacher <span style="color:#f92672">import</span> Teacher
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> places.Classroom <span style="color:#f92672">import</span> Classroom
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> rules.TeacherRules <span style="color:#f92672">import</span> TeacherRules
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pytest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestClassroom</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Teacher&#39;</span>, spec<span style="color:#f92672">=</span>Teacher)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@patch</span>(<span style="color:#e6db74">&#39;people.Person&#39;</span>, spec<span style="color:#f92672">=</span>Person)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_teacher_fails_minimum_age_requirement</span>(self, fake_person, fake_teacher) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># create a fake version of the static method</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">with</span> patch<span style="color:#f92672">.</span>object(TeacherRules, <span style="color:#e6db74">&#39;get_minimum_age&#39;</span>, return_value<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>):
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Add a fake property to the teacher</span>
</span></span><span style="display:flex;"><span>            type(fake_teacher)<span style="color:#f92672">.</span>age <span style="color:#f92672">=</span> PropertyMock(return_value<span style="color:#f92672">=</span><span style="color:#ae81ff">15</span>)
</span></span><span style="display:flex;"><span>            classroom: Classroom <span style="color:#f92672">=</span> Classroom()
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">with</span> pytest<span style="color:#f92672">.</span>raises(<span style="color:#a6e22e">ValueError</span>):
</span></span><span style="display:flex;"><span>                classroom<span style="color:#f92672">.</span>add_teacher(fake_teacher)</span></span></code></pre></div>
<p>In this example, we have a <code>TeacherRules</code> class that includes a static method <code>get_minimum_age()</code> that returns the minimum age allowed for a teacher. To test this, we are creating a fake version of that static method using the <code>patch.object</code> method. We have to do this in a with statement, which makes sure that the fake method does not persist outside of this test. In this case, we&rsquo;ll set that method to return a value of <code>16</code>.</p>
<p>We&rsquo;ll also add a method stub to return an invalid age on our fake <code>Teacher</code> object. Finally, when we try to add that teacher to a classroom, it should raise an exception since the teacher is not old enough.</p>
<p>This is a very brief introduction to using test doubles made with the unittest.mock library, but it should be enough for our use in this class. Feel free to refer to some of the documentation linked below for more examples and information.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://docs.python.org/3/library/unittest.mock.html" rel="external" target="_blank">unittest.mock</a> Documentatio</li>
<li><a href="https://realpython.com/python-mock-library/" rel="external" target="_blank">Understanding the Python Mock Object Library</a> from Real Python</li>
</ul>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="dependency-injection">Dependency Injection</h1>

<p>One other important topic to cover in unit tests is <strong>dependency injection</strong>. In short, <a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="external" target="_blank">dependency injection</a> is a way that we can build our classes so that the objects they depend on can be added to the class from outside. In that way, we can change them as needed in our unit tests as a way to test functionality using test doubles.</p>
<p>Consider the following example:</p>
<div class="tab-panel" data-tab-group="fe1a57a7f1d97999efca93ab1a5c53df">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="java"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('fe1a57a7f1d97999efca93ab1a5c53df','java')"
    >
      <span class="tab-nav-text">Java</span>
    </button>
    <button
      data-tab-item="python"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('fe1a57a7f1d97999efca93ab1a5c53df','python')"
    >
      <span class="tab-nav-text">Python</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="java"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Teacher</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Gradebook gradebook;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Student<span style="color:#f92672">&gt;</span> studentList;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Teacher</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gradebook</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Gradebook(<span style="color:#e6db74">&#34;Course Name&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">studentList</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> List<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addStudent</span>(Student s) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">studentList</span>.<span style="color:#a6e22e">add</span>(s);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">submitGrades</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (Student s : <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">studentList</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gradebook</span>.<span style="color:#a6e22e">gradeStudent</span>(s);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
      </div>
    </div>
    <div
      data-tab-item="python"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Teacher</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__gradebook: Gradebook <span style="color:#f92672">=</span> Gradebook()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__student_list: List[Student] <span style="color:#f92672">=</span> list()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_student</span>(self, s: Student) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>__student_list<span style="color:#f92672">.</span>append(s)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">submit_grades</span>(self) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> self<span style="color:#f92672">.</span>__student_list:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>__gradebook<span style="color:#f92672">.</span>grade_student(s)</span></span></code></pre></div>
      </div>
    </div>
  </div>
</div>
<p>In this <code>Teacher</code> class, we see a private <code>Gradebook</code> instance. That instance is not accessible outside the class, so we cannot directly interact with it in our unit tests, at least without violating the security principles of the class it is in. So, if we want to test that the <code>submitGrades()</code> method properly grades every student in the <code>studentList</code>, we would need some way to replace the <code>gradebook</code> attribute with a test double.</p>
<p>This is where <strong>dependency injection</strong> comes in. Instead of allowing this class to instantiate its own gradebook, we can restructure the code to inject our own gradebook instance. There are several ways we can do this.</p>
<h3 id="reduce-security-of-attributes">Reduce Security of Attributes</h3>
<p>Of course, one way we could accomplish this, even without dependency injection, would be to simply reduce the security of these objects. In Java, we could make them either <code>public</code>, which is generally a bad idea for something so secure as a gradebook, or package-private, with no modifier. We&rsquo;ve used the package-private trick in one of the earlier example videos to access some GUI elements, but in this case we probably want something better.</p>
<p>In Python, we know that any attribute can be accessed externally, so this isn&rsquo;t as big of a concern. However, since we are using a double-underscore in the name, we&rsquo;d have to get around the name mangling. We could switch it to a single underscore, which is still marked as internal to the class but would at least be more easily accessible to our tests. However, as with the Java example, there are other ways we could accomplish this.</p>
<h3 id="constructor-injection">Constructor Injection</h3>
<p>The first method of dependency injection is via the constructor. We could simply pass in a reference to a <code>Gradebook</code> object in the constructor, as in this example:</p>
<div class="tab-panel" data-tab-group="1c3a0bdd2bdda74565fffe2eecb92005">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="java"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('1c3a0bdd2bdda74565fffe2eecb92005','java')"
    >
      <span class="tab-nav-text">Java</span>
    </button>
    <button
      data-tab-item="python"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('1c3a0bdd2bdda74565fffe2eecb92005','python')"
    >
      <span class="tab-nav-text">Python</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="java"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Teacher</span>(Gradebook grade) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (grade <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException(<span style="color:#e6db74">&#34;Gradebook cannot be null&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gradebook</span> <span style="color:#f92672">=</span> grade
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">studentList</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> List<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
      </div>
    </div>
    <div
      data-tab-item="python"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self, grade: Gradebook) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> grade <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;Gradebook cannot be None&#34;</span>)
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>__gradebook: Gradebook <span style="color:#f92672">=</span> grade
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>__student_list: List[Student] <span style="color:#f92672">=</span> list()</span></span></code></pre></div>
      </div>
    </div>
  </div>
</div>
<p>The benefit of this approach is that we can easily replace an actual <code>Gradebook</code> instance in our unit tests with any test double we&rsquo;d like, making it every easy to test the <code>submitGrades()</code> method.</p>
<p>Unfortunately, this does require any class that instantiates a <code>Teacher</code> object to also instantiate a <code>Gradebook</code> along with it, making that process more complex. This complexity can be reduced using some design patterns such as the builder pattern or factory method pattern.</p>
<p>Finally, the class that instantiates the <code>Teacher</code> object would also have a reference to the <code>Gradebook</code> that teacher is using, so it could allow a malicious coder to have access to data that should be kept private. However, typically this isn&rsquo;t a major concern we worry about, since we must always assume that any programmer on this project could access any data stored in a class, as nothing is <em>truly</em> private as we&rsquo;ve already discussed.</p>
<h3 id="setter-injection">Setter Injection</h3>
<p>Alternatively, we can provide a setter method and allow injection via the setter. This could be done either in lieu of building a <code>Gradebook</code> object in the constructor, or in addition to it.</p>
<div class="tab-panel" data-tab-group="1262f238c2a494f101c8aaa871030f83">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="java"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('1262f238c2a494f101c8aaa871030f83','java')"
    >
      <span class="tab-nav-text">Java</span>
    </button>
    <button
      data-tab-item="python"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('1262f238c2a494f101c8aaa871030f83','python')"
    >
      <span class="tab-nav-text">Python</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="java"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setGradebook</span> (Gradebook grade) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (grade <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException(<span style="color:#e6db74">&#34;Gradebook cannot be null&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gradebook</span> <span style="color:#f92672">=</span> grade;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
      </div>
    </div>
    <div
      data-tab-item="python"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">set_gradebook</span>(grade: Gradebook) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> grade <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;Gradebook cannot be None&#34;</span>)
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>__gradebook: Gradebook <span style="color:#f92672">=</span> grade<span style="color:#960050;background-color:#1e0010">`</span></span></span></code></pre></div>
      </div>
    </div>
  </div>
</div>
<p>You may recognize this approach from several earlier courses in this program - we use this technique for grading some of the data structures and programs by injecting our own data and seeing how your code interacts with it. We typically include <code>debug</code> in the name of these methods, to make it clear that they are only for debugging and should be removed from the final code.</p>
<h3 id="other-methods">Other Methods</h3>
<p>In addition to the three methods listed above, there are some other ways we can accomplish this:</p>
<ul>
<li>Using Inheritance or Interfaces - we can declare methods to inject objects as part of a parent class or an interface.</li>
<li>Using the Factory Method pattern - we can replace the static methods in the factory class to return a test double instead of the real object.</li>
<li>Several frameworks exist to automate this process in various languages.</li>
</ul>
<p>Many of these are discussed in greater detail in the <a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="external" target="_blank">dependency injection</a> article on Wikipedia.</p>
<h2 id="best-practices">Best Practices</h2>
<p>In general, we want to build our code in a way that it can easily be tested, and that means providing some way to perform dependency injection that doesn&rsquo;t interfere with the normal operation of our program.</p>
<p>Here are some quick tips that you may be able to use when you need to implement dependency injection:</p>
<ol>
<li>Write your class in such a way that it can either function without the dependency being provided (i.e. it instantiates its own by default, and replaces it with the injected one as needed).</li>
<li>Verify that dependencies are properly instantiated when they are injected.</li>
<li>Make the methods that inject dependencies not public, so it is clear that they should only be used internally in testing and within the class or package they are present in.</li>
<li>Use design patterns such as the builder pattern or factory method pattern to simplify creation of these objects, automatically handling injection as needed.</li>
</ol>
<p>Dependency injection is a very powerful testing technique, but one that must be used carefully to prevent introducing additional bugs and complexity to your application.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="summary">Summary</h1>

<p>In this chapter, we learned about <strong>test doubles</strong> and how they can use them in our unit tests to mimic functionality from other parts of our program. In short, there are three different common types of test doubles:</p>
<ul>
<li>stubs - methods that mimic actual methods</li>
<li>fakes - objects that mimic actual objects</li>
<li>mocks - objects that record operations performed on it</li>
</ul>
<p>We also explored how we can use these in our code both Java and Python. Finally, we learned about <strong>dependency injection</strong> and how we can use that technique to place our test doubles directly in our classes. Now, we&rsquo;ll be able to update the unit tests in our ongoing project to help separate the classes being tested from other classes that it depends on.</p>
<h2 id="review-quiz">Review Quiz</h2>
<p>Check your understanding of the new content introduced in this chapter below - this quiz is not graded and you can retake it as many times as you want.</p>





<div class='quizdown'>
  

---
primaryColor: '#512888'
secondaryColor: '#cccccc'
textColor: black
shuffleQuestions: true
shuffleAnswers: true
locale: en
---

# Test Doubles

**Test doubles** are best described by which of the following statements?

1. [X] Temporary objects in unit tests to mimic functionality
1. [ ] Duplicate unit tests used to confirm results
1. [ ] Floating-point values used to test arithmetic methods
1. [ ] Abstract methods with no actual implementation

# Separation of Concerns

The design principle **separation of concerns** is best described by which statement?

1. [X] Breaking a larger system into distinct sections for a particular task
1. [ ] Preventing the user from editing system data in an application
1. [ ] Sandboxing user interface elements from the underlying program
1. [ ] Writing and debugging one part of a program at a time

# Reason for Test Doubles

Which of the following is a major reason to use test doubles in unit tests? 

1. [X] To replace other methods with versions that will always work 
1. [ ] To reduce the amount of code in our unit tests
1. [ ] To repeatedly test other parts of the application
1. [ ] To ensure a test never fails

# Uses of Test Doubles

Which of the following was **not** given as a possible use of test doubles?

1. [X] Measure how long an operation takes to perform
1. [ ] Verify a method is called from our code
1. [ ] Produce fake data that our code can operate on
1. [ ] Enure our code updates data in another module
1. [ ] Observe how many times our code builds a particular object

# Unit Test Pattern

Place the steps of the common unit test structure below in the correct order. (Click and drag to reorder elements)

1. Arrange
2. Act
3. Assert

# Behavior-Driven Development

Place the steps of the **behavior-driven development** structure below in the correct order. (Click and drag to reorder elements)

1. Given
2. When
3. Then

# Stub

According to the text, a **stub** is best described by which statement?

1. [X] An object that returns predefined data when its methods are called
1. [ ] An object that implements all public methods but may use shortcuts to produce results
1. [ ] An object used to listen for incoming method calls
1. [ ] An object that contains several abstract variables

# Fake

According to the text, a **fake** is best described by which statement?

1. [ ] An object that returns predefined data when its methods are called
1. [X] An object that implements all public methods but may use shortcuts to produce results
1. [ ] An object used to listen for incoming method calls
1. [ ] An object that contains several abstract variables

# Mock

According to the text, a **mock object** is best described by which statement?

1. [ ] An object that returns predefined data when its methods are called
1. [ ] An object that implements all public methods but may use shortcuts to produce results
1. [X] An object used to listen for incoming method calls
1. [ ] An object that contains several abstract variables

# Naming

True or false: the names **stub**, **mock** and **fake** are used consistently across languages and frameworks?

1. [ ] True
1. [X] False

# Dependency Injection

The concept of **dependency injection** is best described by which statement?

1. [X] Building a class so that external objects can be added from outside
1. [ ] Ensuring that all variables and methods are public
1. [ ] Designing a class to construct its own external objects as needed
1. [ ] Only using external libraries from reputable sources


</div>

<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js">
</script>
<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownKatex.js">
</script>
<script 
src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownHighlight.js">
</script>
<script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1755708720" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1755708720" defer></script>
    <script src="/cc410/js/theme.min.js?1755708720" defer></script>
  <script src="/cc410/js/embed-iframe.min.js?1755708720" defer></script>
  </body>
</html>
