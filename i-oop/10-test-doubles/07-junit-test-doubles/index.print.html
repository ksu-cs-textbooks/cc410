<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="YouTube Video Video Materials
To create test doubles in JUnit, we’ll rely on a separate library called Mockito. Mockito is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.
Installing Mockito in Gradle To install Mockito, we just update the testImplementation line in our build.gradle file to include both the mockito-inline library, as well as the mockito-junit-jupiter library that allows Mockito and JUnit to work together seamlessly.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Test Doubles in JUnit :: CC 410 Textbook">
    <meta name="twitter:description" content="YouTube Video Video Materials
To create test doubles in JUnit, we’ll rely on a separate library called Mockito. Mockito is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.
Installing Mockito in Gradle To install Mockito, we just update the testImplementation line in our build.gradle file to include both the mockito-inline library, as well as the mockito-junit-jupiter library that allows Mockito and JUnit to work together seamlessly.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/07-junit-test-doubles/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Test Doubles in JUnit :: CC 410 Textbook">
    <meta property="og:description" content="YouTube Video Video Materials
To create test doubles in JUnit, we’ll rely on a separate library called Mockito. Mockito is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.
Installing Mockito in Gradle To install Mockito, we just update the testImplementation line in our build.gradle file to include both the mockito-inline library, as well as the mockito-junit-jupiter library that allows Mockito and JUnit to work together seamlessly.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Test Doubles in JUnit :: CC 410 Textbook">
    <meta itemprop="description" content="YouTube Video Video Materials
To create test doubles in JUnit, we’ll rely on a separate library called Mockito. Mockito is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.
Installing Mockito in Gradle To install Mockito, we just update the testImplementation line in our build.gradle file to include both the mockito-inline library, as well as the mockito-junit-jupiter library that allows Mockito and JUnit to work together seamlessly.">
    <meta itemprop="dateModified" content="2024-06-17T14:13:48-05:00">
    <meta itemprop="wordCount" content="1044">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Test Doubles in JUnit :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/07-junit-test-doubles/index.html" rel="canonical" type="text/html" title="Test Doubles in JUnit :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/index.xml" rel="alternate" type="application/rss+xml" title="Test Doubles in JUnit :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/tele.html" rel="alternate" type="text/html" title="Test Doubles in JUnit :: CC 410 Textbook">
    <link href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/embed.html" rel="alternate" type="text/html" title="Test Doubles in JUnit :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1757434985" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1757434985" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1757434985" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/search.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1757434985";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/format-print.min.css?1757434985" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/i-oop\/10-test-doubles\/07-junit-test-doubles\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1757434985" rel="stylesheet">
  </head>
  <body class="mobile-support print" data-url="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#installing-mockito-in-gradle">Installing Mockito in Gradle</a></li>
    <li><a href="#adding-mockito-to-a-test-class">Adding Mockito to a Test Class</a></li>
    <li><a href="#creating-fake-objects">Creating Fake Objects</a></li>
    <li><a href="#adding-stubs">Adding Stubs</a></li>
    <li><a href="#faking-static-classes">Faking Static Classes</a>
      <ul>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class="a11y-only"><a itemprop="item" href="/cc410/index.html"><span itemprop="name">CC 410 - Advanced Programming</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/cc410/i-oop/index.html"><span itemprop="name">OOP</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/cc410/i-oop/10-test-doubles/index.html"><span itemprop="name">Test Doubles</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Test Doubles in JUnit</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://github.com/ksu-cs-textbooks/cc410/edit/main/content/i-oop/10-test-doubles/07-junit-test-doubles/_index.md" rel="external" target="_blank" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a>
            </div>
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc410/i-oop/10-test-doubles/06-mocks/index.html" title="Mocks (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc410/i-oop/10-test-doubles/08-pytest-test-doubles/index.html" title="Test Doubles in pytest (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
            <div class="topbar-button topbar-button-embed" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/embed.html" title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a>
            </div>
            <div class="topbar-button topbar-button-tele" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/tele.html" title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a>
            </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable i-oop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="test-doubles-in-junit">Test Doubles in JUnit</h1>


<a href="https://www.youtube.com/watch?v=sSokD2zkA8A">YouTube Video</a>

<p><a href="/cc410/i-oop/10-test-doubles/07-junit-test-doubles/video/index.html">Video Materials</a></p>
<p>To create test doubles in JUnit, we&rsquo;ll rely on a separate library called Mockito. <a href="https://site.mockito.org/" rel="external" target="_blank">Mockito</a> is a framework for creating mock objects in Java that works well with JUnit, and has become one of the most commonly used tools for this task.</p>
<h2 id="installing-mockito-in-gradle">Installing Mockito in Gradle</h2>
<p>To install Mockito, we just update the <code>testImplementation</code> line in our <code>build.gradle</code> file to include both the <code>mockito-inline</code> library, as well as the <code>mockito-junit-jupiter</code> library that allows Mockito and JUnit to work together seamlessly.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>dependencies <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter API for testing.
</span></span></span><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"></span>    testImplementation <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-api:5.6.2&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.hamcrest:hamcrest:2.2&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-params&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.mockito:mockito-inline:3.8.0&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;org.mockito:mockito-junit-jupiter:3.8.0&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter Engine for testing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    testRuntimeOnly <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-engine&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This dependency is used by the application.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    implementation <span style="color:#e6db74">&#39;com.google.guava:guava:29.0-jre&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<h2 id="adding-mockito-to-a-test-class">Adding Mockito to a Test Class</h2>
<p>There are many different ways to use Mockito with JUnit. One of the easiest ways that works in the latest versions of Mockito and JUnit is to use the <code>@ExtendWith</code> annotation above our test class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.extension.ExtendWith;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoExtension;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ExtendWith</span>(MockitoExtension.<span style="color:#a6e22e">class</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>By including that annotation above our test class declaration, Mockito will automatically perform any setup steps required. In earlier versions of JUnit and Mockito, we would have to do these steps manually, but this process has been greatly simplified recently.</p>
<p>One thing we can do is modify this a bit to set Mockito to use <a href="https://javadoc.io/static/org.mockito/mockito-core/3.8.0/org/mockito/quality/Strictness.html#STRICT_STUBS" rel="external" target="_blank">STRICT_STUBS</a>. This tells Mockito to print errors when we create any test doubles that aren&rsquo;t used, and the ones that are used are created properly. So, instead of using <code>@ExtendWith</code>, we can instead use <code>@MockitoSettings</code>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Since this is recommended by the Mockito documentation, we&rsquo;ll go ahead and use it in our code.</p>
<h2 id="creating-fake-objects">Creating Fake Objects</h2>
<p>Once we&rsquo;ve added Mockito to our test class, we can create fake objects using the <code>@Mock</code> annotation above object declarations. This is commonly done on global objects in our test class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnitTestClass</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// tests here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>This will create fake objects that mimic the attributes and methods contained in the <code>Person</code> and <code>Teacher</code> class. However, by default, those objects won&rsquo;t do anything, and most methods will just return the default value for the return type of the method.</p>
<p>Without doing anything else, we can use these fake objects in place of the real ones, as in this test:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testClassroomHasTeacher</span>() {
</span></span><span style="display:flex;"><span>        Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom()
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">hasTeacher</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher);
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">hasTeacher</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>As we can see, we are able to add the <code>mockTeacher</code> object to our classroom, and it is treated just like any other <code>Teacher</code> object, at least as far as the system is concerned thus far.</p>
<p>However, if we want those fake objects to do something, we have to include method stubs as well.</p>
<h2 id="adding-stubs">Adding Stubs</h2>
<p>To add a method stub to a fake object, we can use the <code>when</code> method in Mockito. Here&rsquo;s an example:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testClassroomGetTeacherName</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// create a method stub for `getName`</span>
</span></span><span style="display:flex;"><span>        when(mockTeacher.<span style="color:#a6e22e">getName</span>()).<span style="color:#a6e22e">thenReturn</span>(<span style="color:#e6db74">&#34;Teacher Person&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom();
</span></span><span style="display:flex;"><span>        classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// assert that the classroom returns the teacher&#39;s name</span>
</span></span><span style="display:flex;"><span>        assertTrue(classroom.<span style="color:#a6e22e">getTeacherName</span>().<span style="color:#a6e22e">equals</span>(<span style="color:#e6db74">&#34;Teacher Person&#34;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>In this example, we are adding a method stub to our <code>mockTeacher</code> object that will return <code>&quot;Teacher Person&quot;</code> whenever the <code>getName()</code> method is called. Then, we are adding that fake <code>Teacher</code> object to the <code>Classroom</code> class that we are testing, and calling the <code>getTeacherName()</code> method. We&rsquo;re assuming that the <code>getTeacherName()</code> method in the <code>Classroom</code> class calls the <code>getName()</code> method of the <code>Teacher</code> object contained in the class. However, instead of using a real <code>Teacher</code> instance, we&rsquo;ve provided a fake object that only knows what to do when that one method is called. So, it returns the value we expect, which passes our test!</p>
<h2 id="faking-static-classes">Faking Static Classes</h2>
<p>There is one more complex use case we may run into in our testing - creating a fake version of a class with static methods. This is a relatively new feature in Mockito, but it allows us to test some functionality that is otherwise very difficult to mimic.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertThrows;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertTrue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.mockito.Mockito.when;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.lang.IllegalArgumentException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mock;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.MockedStatic;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.Mockito;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.junit.jupiter.MockitoSettings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.mockito.quality.Strictness;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@MockitoSettings</span>(strictness <span style="color:#f92672">=</span> Strictness.<span style="color:#a6e22e">STRICT_STUBS</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassroomTest</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Person mockPerson;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Mock</span>
</span></span><span style="display:flex;"><span>    Teacher mockTeacher;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testTeacherFailsMinimumAgeRequirement</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Create mock static class</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (MockedStatic<span style="color:#f92672">&lt;</span>TeacherRules<span style="color:#f92672">&gt;</span> mockTeacherRules <span style="color:#f92672">=</span> Mockito.<span style="color:#a6e22e">mockStatic</span>(TeacherRules.<span style="color:#a6e22e">class</span>)) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create method stub for static class</span>
</span></span><span style="display:flex;"><span>            mockTeacherRules.<span style="color:#a6e22e">when</span>(() <span style="color:#f92672">-&gt;</span> TeacherRules.<span style="color:#a6e22e">getMinAge</span>()).<span style="color:#a6e22e">thenReturn</span>(16);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create method stub for fake Teacher</span>
</span></span><span style="display:flex;"><span>            when(mockTeacher.<span style="color:#a6e22e">getAge</span>()).<span style="color:#a6e22e">thenReturn</span>(15);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Test functionality</span>
</span></span><span style="display:flex;"><span>            Classroom classroom <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Classroom();
</span></span><span style="display:flex;"><span>            assertThrows(IllegalArgumentException.<span style="color:#a6e22e">class</span>, () <span style="color:#f92672">-&gt;</span> classroom.<span style="color:#a6e22e">addTeacher</span>(mockTeacher));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>In this example, we have a <code>TeacherRules</code> class that includes a static method <code>getMinAge()</code> that returns the minimum age allowed for a teacher. To test this, we are creating a fake version of that class using the <code>Mockito.mockStatic()</code> method. We have to do this in a try with resources statement, which makes sure that the fake class does not persist outside of this test.</p>
<p>Once we&rsquo;ve created the fake class <code>mockTeacherRules</code>, we can add a method stub for the static method. We&rsquo;ll also add a method stub to return an invalid age on our fake <code>Teacher</code> object. Finally, when we try to add that teacher to a classroom, it should throw an exception since the teacher is not old enough.</p>
<p>This is a very brief introduction to using test doubles made with Mockito, but it should be enough for our use in this class. Feel free to refer to some of the documentation linked below for more examples and information.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://site.mockito.org/" rel="external" target="_blank">Mockito Official Site</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/index.html" rel="external" target="_blank">Mockito Javadoc</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-junit-jupiter/latest/index.html" rel="external" target="_blank">Mockito JUnit Javadoc</a></li>
<li><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html" rel="external" target="_blank">Mockito Class Documentation</a></li>
<li><a href="https://www.baeldung.com/mockito-series" rel="external" target="_blank">Mockito Series</a> from Baeldung</li>
<li><a href="https://www.vogella.com/tutorials/Mockito/article.html" rel="external" target="_blank">Unit Tests with Mockit</a> from Vogella</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
<div class="git-footer">
  <p class="theme-version-footer">8.0.0</p>
<p>Last modified by:
              <i class='fa-fw fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/cc410/commit/1b3be09e9a32c703d266d0790414fde22b705b91">Jun 17, 2024</a>
</p>

</div>
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1757434985" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1757434985" defer></script>
    <script src="/cc410/js/theme.min.js?1757434985" defer></script>
  </body>
</html>
