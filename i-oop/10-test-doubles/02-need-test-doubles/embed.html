<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Video Materials
As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the application programming interface or API of the module.
Ideally, we’d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Need for Test Doubles :: CC 410 Textbook"><meta name=twitter:description content="Video Materials
As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the application programming interface or API of the module.
Ideally, we’d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/02-need-test-doubles/embed.html"><meta property="og:site_name" content="CC 410 Textbook"><meta property="og:title" content="Need for Test Doubles :: CC 410 Textbook"><meta property="og:description" content="Video Materials
As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the application programming interface or API of the module.
Ideally, we’d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Need for Test Doubles :: CC 410 Textbook"><meta itemprop=description content="Video Materials
As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the application programming interface or API of the module.
Ideally, we’d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program."><meta itemprop=dateModified content="2024-06-17T14:13:48-05:00"><meta itemprop=wordCount content="675"><title>Need for Test Doubles :: CC 410 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cc410/i-oop/10-test-doubles/02-need-test-doubles/ rel=canonical type=text/html title="Need for Test Doubles :: CC 410 Textbook"><link href=/cc410/i-oop/10-test-doubles/02-need-test-doubles/index.xml rel=alternate type=application/rss+xml title="Need for Test Doubles :: CC 410 Textbook"><link href=/cc410/i-oop/10-test-doubles/02-need-test-doubles/index.print.html rel=alternate type=text/html title="Need for Test Doubles :: CC 410 Textbook"><link href=/cc410/i-oop/10-test-doubles/02-need-test-doubles/tele.html rel=alternate type=text/html title="Need for Test Doubles :: CC 410 Textbook"><link href=/cc410/images/favicon.ico?1719505513 rel=icon type=image/x-icon sizes=any><link href=/cc410/css/fontawesome-all.min.css?1719505589 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fontawesome-all.min.css?1719505589 rel=stylesheet></noscript><link href=/cc410/css/nucleus.css?1719505589 rel=stylesheet><link href=/cc410/css/auto-complete.css?1719505589 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/auto-complete.css?1719505589 rel=stylesheet></noscript><link href=/cc410/css/perfect-scrollbar.min.css?1719505589 rel=stylesheet><link href=/cc410/css/fonts.css?1719505589 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fonts.css?1719505589 rel=stylesheet></noscript><link href=/cc410/css/theme.css?1719505589 rel=stylesheet><link href=/cc410/css/theme-light-theme.css?1719505589 rel=stylesheet id=R-variant-style><link href=/cc410/css/chroma-relearn-light.css?1719505589 rel=stylesheet id=R-variant-chroma-style><link href=/cc410/css/variant.css?1719505589 rel=stylesheet><link href=/cc410/css/print.css?1719505589 rel=stylesheet media=print><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cc410",window.index_js_url="/cc410/index.search.js",window.variants&&variants.init(["light-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cc410/css/custom.css?1719505589 rel=stylesheet></head><body class="mobile-support embed disableInlineCopyToClipboard" data-url=/cc410/i-oop/10-test-doubles/02-need-test-doubles/embed.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/mJIS9K260_o style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p><a href=/cc410/i-oop/10-test-doubles/02-need-test-doubles/video/embed.html>Video Materials</a></p><p>As we build larger and larger applications, we may find that it becomes more and more difficult to see the entire application as a whole. Instead, it helps to think of the application as many different modules, and each module interacts with others based on their publicly available methods, which make up the <strong>application programming interface</strong> or <strong>API</strong> of the module.</p><p>Ideally, we&rsquo;d like each module of the program to be independent from the others, with each one having a clear purpose or reason for inclusion in the program. This is a key part of the design principle <a href=https://en.wikipedia.org/wiki/Separation_of_concerns rel=external target=_blank><strong>separation of concerns</strong></a>, which involves breaking larger systems down into distinct sections that address a particular &ldquo;concern&rdquo; within the larger system.</p><p><a href=#R-image-e511b72e72b099adc1d12656bd1a8e79 class=lightbox-link><img alt="Complexity to Categorization" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cc410/images/13/complex1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e511b72e72b099adc1d12656bd1a8e79><img alt="Complexity to Categorization" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cc410/images/13/complex1.png></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>So, by categorizing the individual classes in our application based on similarity, we can then start to organize our application into modules of code that are somewhat independent of each other. They still interact through the public APIs of each module, but the internal workings of one module should not be visible to another.</p><p><a href=#R-image-47db72c2ba0f86ac63f1192d884b9c40 class=lightbox-link><img alt="Categorization to Abstraction" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cc410/images/13/complex2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-47db72c2ba0f86ac63f1192d884b9c40><img alt="Categorization to Abstraction" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cc410/images/13/complex2.png></a><sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>Once we start writing unit tests for our code, we can start to <strong>abstract</strong> away the details of other modules in the system, and focus just on the internal workings of the single unit of code, usually a class or method, that we intend to test.</p><p>However, this is difficult when our code has to call methods that are present in another module. How can we test our code and make sure it works, without also having to test that the module it is calling also works correctly and returns a correct value? If we cannot figure out a way to do this, then unit testing our code is not very helpful since it won&rsquo;t allow us to accurately pinpoint the location of an error.</p><h2 id=test-doubles>Test Doubles</h2><p>This is where the concept of <strong>test doubles</strong> comes in. Let&rsquo;s say our code needs to call a method called <code>getArea()</code> that is part of the API of another module, which will calculate the area of a given shape. All our code needs to do is compare the returned value of that method with a few key values, and display a result.</p><p>Depending on the shape, calculating the area can be a computationally intensive process, so we probably don&rsquo;t want to do that many times in our unit tests. In addition, since that method is contained in another module, we definitely don&rsquo;t want to test that it actually returns the correct answer.</p><p>Instead, we just know that the API of that module says that the <code>getArea()</code> method will return a floating-point value that is non-negative. This is a postcondition that is well documented in the API, so as long as that module is working correctly, we know that the <code>getArea()</code> method will return some non-negative floating-point value.</p><p>Therefore, instead of calling the <code>getArea()</code> method that is contained in the external module, we can create a <strong>stub method</strong> that simply returns a non-negative floating-point value. Then, whenever our code calls <code>getArea()</code>, we can intercept that message and direct it instead to our stub method, which quickly returns a valid value that we can use in our tests. We can even modify the stub to return either the exact values we want, or just any random value.</p><p>There are many more powerful things we can do with these test doubles, such as:</p><ul><li>Verify that a particular method is called within our code based on an input condition</li><li>Produce some fake data that our code can operate on that is not provided via arguments (an &ldquo;indirect input&rdquo;)</li><li>Verify that our code updates data in another module properly (an &ldquo;indirect output&rdquo;)</li><li>Observe how many times our code instantiates a particular type of object.</li></ul><p>Test doubles are a crucial part of writing more useful and advanced unit tests, especially as our programs become larger and we wish to test portions of the code that are integrated with other modules.</p><h4 id=references>References</h4><ul><li><a href=http://xunitpatterns.com/Test%20Double.html rel=external target=_blank>Test Double</a> at xUnit Patterns</li><li><a href=https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da rel=external target=_blank>Test Doubles - Fakes, Mocks and Stubs</a> at Pragmatists blog</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://medium.com/upstart-tech/software-design-separation-of-concerns-unit-testing-b38ece31e5f3 rel=external target=_blank>https://medium.com/upstart-tech/software-design-separation-of-concerns-unit-testing-b38ece31e5f3</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article></div></main></div><script src=/cc410/js/clipboard.min.js?1719505589 defer></script><script src=/cc410/js/perfect-scrollbar.min.js?1719505589 defer></script><script src=/cc410/js/theme.js?1719505589 defer></script><script src=/cc410/js/embed-iframe.js?1719505589 defer></script></body></html>