<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Unlike many testing frameworks, the pytest framework by default only uses the built-in assert statement in Python. It doesn’t include a large number of specialized assertions, and instead relies on the developer to write Boolean logic statements to perform the desired testing. More information can be found in the pytest documentation
The pytest framework can leverage the assertions already present in other Python unit testing libraries such as the built-in unittest library. So, for developers familiar with that approach, those assertions can be used.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Python Assertions :: CC 410 Textbook">
    <meta name="twitter:description" content="Unlike many testing frameworks, the pytest framework by default only uses the built-in assert statement in Python. It doesn’t include a large number of specialized assertions, and instead relies on the developer to write Boolean logic statements to perform the desired testing. More information can be found in the pytest documentation
The pytest framework can leverage the assertions already present in other Python unit testing libraries such as the built-in unittest library. So, for developers familiar with that approach, those assertions can be used.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/i-oop/04-testing/08-python-assertions/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Python Assertions :: CC 410 Textbook">
    <meta property="og:description" content="Unlike many testing frameworks, the pytest framework by default only uses the built-in assert statement in Python. It doesn’t include a large number of specialized assertions, and instead relies on the developer to write Boolean logic statements to perform the desired testing. More information can be found in the pytest documentation
The pytest framework can leverage the assertions already present in other Python unit testing libraries such as the built-in unittest library. So, for developers familiar with that approach, those assertions can be used.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="OOP">
    <meta property="article:modified_time" content="2025-02-05T09:58:15-06:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Python Assertions :: CC 410 Textbook">
    <meta itemprop="description" content="Unlike many testing frameworks, the pytest framework by default only uses the built-in assert statement in Python. It doesn’t include a large number of specialized assertions, and instead relies on the developer to write Boolean logic statements to perform the desired testing. More information can be found in the pytest documentation
The pytest framework can leverage the assertions already present in other Python unit testing libraries such as the built-in unittest library. So, for developers familiar with that approach, those assertions can be used.">
    <meta itemprop="dateModified" content="2025-02-05T09:58:15-06:00">
    <meta itemprop="wordCount" content="798">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Python Assertions :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/i-oop/04-testing/08-python-assertions/index.html" rel="canonical" type="text/html" title="Python Assertions :: CC 410 Textbook">
    <link href="/cc410/i-oop/04-testing/08-python-assertions/index.xml" rel="alternate" type="application/rss+xml" title="Python Assertions :: CC 410 Textbook">
    <link href="/cc410/i-oop/04-testing/08-python-assertions/tele.html" rel="alternate" type="text/html" title="Python Assertions :: CC 410 Textbook">
    <link href="/cc410/i-oop/04-testing/08-python-assertions/embed.html" rel="alternate" type="text/html" title="Python Assertions :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1757434985" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1757434985" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1757434985" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/search.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1757434985";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/format-print.min.css?1757434985" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/i-oop\/04-testing\/08-python-assertions\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1757434985" rel="stylesheet">
  </head>
  <body class="mobile-support print" data-url="/cc410/i-oop/04-testing/08-python-assertions/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable i-oop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="python-assertions">Python Assertions</h1>

<p>Unlike many testing frameworks, the pytest framework by default only uses the built-in <code>assert</code> statement in Python. It doesn&rsquo;t include a large number of specialized assertions, and instead relies on the developer to write Boolean logic statements to perform the desired testing. More information can be found in the <a href="https://docs.pytest.org/en/stable/assert.html" rel="external" target="_blank">pytest documentation</a></p>
<p>The pytest framework can leverage the assertions already present in other Python unit testing libraries such as the built-in <a href="https://docs.python.org/3/library/unittest.html" rel="external" target="_blank">unittest</a> library. So, for developers familiar with that approach, those assertions can be used.</p>
<p>For this course, we&rsquo;ll discuss how to use the built-in <code>assert</code> statement, as well as the <a href="https://pyhamcrest.readthedocs.io/en/release-1.8/" rel="external" target="_blank">Hamcrest</a> assertion library.</p>
<h3 id="simple-assertions">Simple Assertions</h3>
<p>In general, an <code>assert</code> statement for pytest includes the following structure:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> <span style="color:#f92672">&lt;</span>boolean expression<span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>For example, to test if the variable <code>actual</code> is equal to the variable <code>expected</code>, we would write the following assertion:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> actual <span style="color:#f92672">==</span> expected</span></span></code></pre></div>
<p>We can optionally add an error message describing the assertion, as in this example:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">assert</span> actual <span style="color:#f92672">==</span> expected, <span style="color:#e6db74">&#34;The value returned is incorrect&#34;</span></span></span></code></pre></div>
<p>This allows us to provide additional information along with the failure. However, by including a message in this way, it may reduce the amount of information that pytest gives us when the test fails. So, we may find it easier to omit these messages, or include them as comments in the code near the assertion, instead of as part of the assertion itself.</p>
<p>Let&rsquo;s look at some examples to see how we can use the <code>assert</code> statement in various ways.</p>
<ul>
<li>Boolean Assertions:
<ul>
<li><code>assert actual == True</code></li>
<li><code>assert actual == False</code></li>
</ul>
</li>
<li>Equality Assertions
<ul>
<li><code>assert acutal == expected</code></li>
<li><code>assert actual != expected</code></li>
</ul>
</li>
<li>Approximate Floating-Point Values
<ul>
<li><code>assert actual == pytest.approx(expected)</code></li>
</ul>
</li>
<li>Reference Assertions
<ul>
<li><code>assert actual is expected</code> - true if both <code>actual</code> and <code>expected</code> are the same object in memory</li>
<li><code>assert actual is None</code> - true if <code>actual</code> is the value <code>None</code></li>
</ul>
</li>
</ul>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Floating-Point Arithmetic Error
  </summary>
  <div class="box-content">
<p>Why do we need to deal with approximate floating-point values? This is because floating-point values are by their nature imprecise, and can sometimes lead to strange errors. Consider this example from <a href="https://www.geeksforgeeks.org/rounding-off-errors-java/" rel="external" target="_blank">GeeksforGeeks</a>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.7</span>
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> b <span style="color:#f92672">-</span> <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>print(x)
</span></span><span style="display:flex;"><span>print(y)
</span></span><span style="display:flex;"><span>print(x <span style="color:#f92672">==</span> y)</span></span></code></pre></div>
<p>While we would expect both <code>x</code> and <code>y</code> to store the same value, they are actually slightly different.</p>
<p><a href="#R-image-8d1bcd89f1e1451d432458d9a47b654e" class="lightbox-link"><img alt="Python Floating Point Error" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/4/pythonerror.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8d1bcd89f1e1451d432458d9a47b654e"><img alt="Python Floating Point Error" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/4/pythonerror.png"></a></p>
<p>So, we may need to account for this imprecision in our unit tests. We could also rewrite our code to avoid the use of floating point values. For example, many programs that deal with monetary values actually store them as integers based on cents instead of dollars, and simply add the decimal point only when the value is printed.</p>
  </div>
</details>
<h3 id="catching-exceptions">Catching Exceptions</h3>
<p>The pytest framework also includes a special method that can be used to catch exceptions. This allows us to assert that a particular piece of code being tested should, or should not, throw an exception.</p>
<p>Here&rsquo;s an example, taken from the <a href="https://docs.pytest.org/en/stable/assert.html" rel="external" target="_blank">pytest documentation</a>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_zero_division</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">with</span> pytest<span style="color:#f92672">.</span>raises(<span style="color:#a6e22e">ZeroDivisionError</span>):
</span></span><span style="display:flex;"><span>        calculator<span style="color:#f92672">.</span>divide(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>)</span></span></code></pre></div>
<p>The <code>with pytest.raises(ZeroDivisionError)</code> statement is used to assert that the <code>calculator.divide()</code> method will throw an exception, specifically a <code>ZeroDivisionError</code>. If that method call does not throw an exception, then the assertion will fail. We can include multiple lines of code within the <code>with</code> block as well.</p>
<h3 id="fail">Fail</h3>
<p>pytest includes one other assertion that is used to simply fail a test:</p>
<ul>
<li><code>fail(message)</code></li>
</ul>
<p>By including the <code>fail()</code> method in our unit test, we can cause a test to fail immediately, such as when we reach a state that should be unreachable.</p>
<h3 id="checking-output">Checking Output</h3>
<p>One task we may want to be able to perform in our unit tests is capturing output printed by the program. By default, any output that is printed using <code>print()</code> is immediately sent to the terminal, but we can actually redirect that output without our tests in order to capture it and examine its contents.</p>
<p>We already saw how to do this in the &ldquo;Hello Real World&rdquo; project. Here&rsquo;s that code once again (with full type annotations):</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pytest <span style="color:#f92672">import</span> CaptureFixture
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> _pytest.capture <span style="color:#f92672">import</span> CaptureResult
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys: CaptureFixture[Any]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>    captured: CaptureResult[Any] <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">assert</span> captured<span style="color:#f92672">.</span>out <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;Unexpected Output&#34;</span></span></span></code></pre></div>
<p>In that code, we start by adding a parameter named <code>capsys</code> to the test method declaration. <code>capsys</code> is an example of a <a href="https://docs.pytest.org/en/stable/fixture.html" rel="external" target="_blank">fixture</a> in pytest. Fixtures allow us to do build more advanced test functions. The <code>capsys</code> fixture is described in the <a href="https://docs.pytest.org/en/stable/capture.html" rel="external" target="_blank">pytest documentation</a>.</p>
<p>So, by including that parameter in our test function, we&rsquo;ll gain access to all of the features of the <code>capsys</code> fixture. When we execute our code, we can then use <code>capsys.readouterr()</code> to get a <code>CaptureResult</code> object that contains the text that was output by our program. Then, using <code>captured.out</code>, we can check that text and make sure it matches our expectation in an assertion.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1757434985" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1757434985" defer></script>
    <script src="/cc410/js/theme.min.js?1757434985" defer></script>
      
      
      
    </div> 
  <script src="/cc410/js/tele-scroll.min.js?1757434985" defer></script>
  </body>
</html>
