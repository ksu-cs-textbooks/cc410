<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Once we’ve built a website that can send form data using an HTTP POST request to our web application, we need some way to access that information in our controller. Let’s look at how we would accomplish this in Flask.
Flask Path Variables In a previous example, we saw how we can create a route that includes variables directly in the path itself:
@route(&#39;/greeting/&lt;name&gt;/&#39;) def greeting_with_name(self, name): &#34;&#34;&#34;Display greeting with name.&#34;&#34;&#34; return render_template(&#34;greeting.html&#34;, name=name) In this example, we simply include the path variable &lt;name in the route, and a corresponding parameter in our controller function. Flask will automatically match the name of that parameter to the name of one of the path variables in the route, and fill in the value when it calls the function.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Flask and Form Data :: CC 410 Textbook">
    <meta name="twitter:description" content="Once we’ve built a website that can send form data using an HTTP POST request to our web application, we need some way to access that information in our controller. Let’s look at how we would accomplish this in Flask.
Flask Path Variables In a previous example, we saw how we can create a route that includes variables directly in the path itself:
@route(&#39;/greeting/&lt;name&gt;/&#39;) def greeting_with_name(self, name): &#34;&#34;&#34;Display greeting with name.&#34;&#34;&#34; return render_template(&#34;greeting.html&#34;, name=name) In this example, we simply include the path variable &lt;name in the route, and a corresponding parameter in our controller function. Flask will automatically match the name of that parameter to the name of one of the path variables in the route, and fill in the value when it calls the function.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/iii-web/17-rest-forms/05-flask-form-data/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Flask and Form Data :: CC 410 Textbook">
    <meta property="og:description" content="Once we’ve built a website that can send form data using an HTTP POST request to our web application, we need some way to access that information in our controller. Let’s look at how we would accomplish this in Flask.
Flask Path Variables In a previous example, we saw how we can create a route that includes variables directly in the path itself:
@route(&#39;/greeting/&lt;name&gt;/&#39;) def greeting_with_name(self, name): &#34;&#34;&#34;Display greeting with name.&#34;&#34;&#34; return render_template(&#34;greeting.html&#34;, name=name) In this example, we simply include the path variable &lt;name in the route, and a corresponding parameter in our controller function. Flask will automatically match the name of that parameter to the name of one of the path variables in the route, and fill in the value when it calls the function.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Web">
    <meta property="article:modified_time" content="2021-08-24T15:17:57-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Flask and Form Data :: CC 410 Textbook">
    <meta itemprop="description" content="Once we’ve built a website that can send form data using an HTTP POST request to our web application, we need some way to access that information in our controller. Let’s look at how we would accomplish this in Flask.
Flask Path Variables In a previous example, we saw how we can create a route that includes variables directly in the path itself:
@route(&#39;/greeting/&lt;name&gt;/&#39;) def greeting_with_name(self, name): &#34;&#34;&#34;Display greeting with name.&#34;&#34;&#34; return render_template(&#34;greeting.html&#34;, name=name) In this example, we simply include the path variable &lt;name in the route, and a corresponding parameter in our controller function. Flask will automatically match the name of that parameter to the name of one of the path variables in the route, and fill in the value when it calls the function.">
    <meta itemprop="dateModified" content="2021-08-24T15:17:57-05:00">
    <meta itemprop="wordCount" content="716">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Flask and Form Data :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/iii-web/17-rest-forms/05-flask-form-data/index.html" rel="canonical" type="text/html" title="Flask and Form Data :: CC 410 Textbook">
    <link href="/cc410/iii-web/17-rest-forms/05-flask-form-data/index.xml" rel="alternate" type="application/rss+xml" title="Flask and Form Data :: CC 410 Textbook">
    <link href="/cc410/iii-web/17-rest-forms/05-flask-form-data/index.print.html" rel="alternate" type="text/html" title="Flask and Form Data :: CC 410 Textbook">
    <link href="/cc410/iii-web/17-rest-forms/05-flask-form-data/tele.html" rel="alternate" type="text/html" title="Flask and Form Data :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1757434985" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1757434985" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1757434985" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/search.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1757434985";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1757434985" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1757434985" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1757434985" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1757434985" rel="stylesheet">
    <link href="/cc410/css/format-html.min.css?1757434985" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/iii-web\/17-rest-forms\/05-flask-form-data\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1757434985" rel="stylesheet">
  </head>
  <body class="mobile-support embed html" data-url="/cc410/iii-web/17-rest-forms/05-flask-form-data/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable iii-web" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="flask-and-form-data">Flask and Form Data</h1>

<p>Once we&rsquo;ve built a website that can send form data using an HTTP <code>POST</code> request to our web application, we need some way to access that information in our controller. Let&rsquo;s look at how we would accomplish this in Flask.</p>
<h2 id="flask-path-variables">Flask Path Variables</h2>
<p>In a previous example, we saw how we can create a route that includes variables directly in the path itself:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@route</span>(<span style="color:#e6db74">&#39;/greeting/&lt;name&gt;/&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">greeting_with_name</span>(self, name):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Display greeting with name.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render_template(<span style="color:#e6db74">&#34;greeting.html&#34;</span>, name<span style="color:#f92672">=</span>name)</span></span></code></pre></div>
<p>In this example, we simply include the path variable <code>&lt;name</code> in the route, and a corresponding parameter in our controller function. Flask will automatically match the name of that parameter to the name of one of the path variables in the route, and fill in the value when it calls the function.</p>
<h2 id="flask-request-parameters">Flask Request Parameters</h2>
<p>When dealing with data sent in a <code>POST</code> request via an HTML form, Flask uses a slightly different approach. Part of the Flask library is the <code>requests</code> object, which can be used to access information about the request sent to the server. Part of that object is a <code>dict</code> named <code>form</code>, which includes all of the form data. So, we can access the data from an HTML form by accessing the elements in the <code>form</code> dictionary:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@route</span>(<span style="color:#e6db74">&#34;/advancedsearch/&#34;</span>, methods<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;POST&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">advanced_search_results</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Search results page.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># don&#39;t use request.form[&#39;text&#39;] - raises exceptions!</span>
</span></span><span style="display:flex;"><span>    text: str <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>form<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;text&#39;</span>, <span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>    checkbox: bool <span style="color:#f92672">=</span> bool(request<span style="color:#f92672">.</span>form<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;checkbox&#39;</span>, <span style="color:#66d9ef">False</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        value: float <span style="color:#f92672">=</span> float(request<span style="color:#f92672">.</span>form<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;value&#39;</span>, <span style="color:#e6db74">&#34;-1&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">ValueError</span>:
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render_template(
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;advanced_search.html&#34;</span>,
</span></span><span style="display:flex;"><span>        text<span style="color:#f92672">=</span>text,
</span></span><span style="display:flex;"><span>        checkbox<span style="color:#f92672">=</span>checkbox,
</span></span><span style="display:flex;"><span>        value<span style="color:#f92672">=</span>value)</span></span></code></pre></div>
<p>The example above shows three different types of request parameters: <code>String</code> values from text entry fields, <code>boolean</code> values from checkboxes, and numerical values from number input fields. Since they are all sent as text, we have to use the various methods in Python to convert them to the data type we need.</p>
<p>However, there are a few important things to note in this code. First, instead of directly accessing the elements in the <code>form</code> dictionary, as in <code>request.form['text']</code>, we are using the <code>get()</code> method as described in the <a href="https://docs.python.org/3/library/stdtypes.html#dict.get" rel="external" target="_blank">Python documentation</a>. This is because directly accessing the elements will raise an exception if they are not present, which we&rsquo;ll have to handle. Instead, we can use the <code>get</code> method to access them if they are present. If not, we can provide a second parameter which will be the &ldquo;default&rdquo; value used if no value is present. This makes it much easier to handle situations where we can&rsquo;t guarantee that all values would be present in the form.</p>
<p>Likewise, for some numerical values, we may still need to use a <code>try-except</code> statement to safely convert them, as shown in the example above. We are using a default value of <code>-1</code> in the case that the value is not provided, but also in the <code>except</code> clause if the value provided cannot be properly converted to a numerical value.</p>
<p>Finally, one thing to note is that the value of a checkbox will only be included along with the form if it is checked. If the checkbox is unchecked, that value will not be present in the form data. So, for <code>boolean</code> values, we should always include a default value of <code>&quot;false&quot;</code> in case they are not included in the form data.</p>
<h2 id="filling-in-form-data">Filling In Form Data</h2>
<p>Flask also includes some handy methods for filling out form data based on the values in the template model. This is really helpful for times when we want to allow a user to submit a form but immediately redirect the user back to the same page with the form already completed, as well as some additional data. In addition, as we&rsquo;ll see in a later chapter, if we have any form validation issues, we can help the user by making it easy to fix the error without having to restart filling out the form.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter text here...&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ text }}}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#960050;background-color:#1e0010">{{</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">checked</span><span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#a6e22e">if</span> <span style="color:#a6e22e">checkbox</span> <span style="color:#a6e22e">else</span> <span style="color:#960050;background-color:#1e0010">&#34;&#34;</span> <span style="color:#960050;background-color:#1e0010">}}</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number&#34;</span> <span style="color:#a6e22e">step</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0.1&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;10&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ value }}&#34;</span>&gt;</span></span></code></pre></div>
<p>In our HTML templates, we can use the <code>value</code> attribute in our <code>input</code> tags to fill the form input based on the given value. For checkboxes, we can use a short Python ternary <code>if</code> statement, which will set the <code>checked</code> attribute on the checkbox if the value is present in the model and set to <code>true</code>.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1757434985" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1757434985" defer></script>
    <script src="/cc410/js/theme.min.js?1757434985" defer></script>
  <script src="/cc410/js/embed-iframe.min.js?1757434985" defer></script>
  </body>
</html>
