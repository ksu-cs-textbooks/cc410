




	
	
		

	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.2.0+tip">
    <meta name="description" content="CC 410 Textbook">
    <meta name="author" content="Russell Feldhausen">
    <title>Unit Tests :: CC 410 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cc410/z-examples/01-hello-real-world/04-java/05-unit-tests/" rel="canonical" type="text/html" title="CC 410 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cc410/z-examples/01-hello-real-world/04-java/05-unit-tests/index.xml" rel="alternate" type="application/rss+xml" title="CC 410 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cc410/z-examples/01-hello-real-world/04-java/05-unit-tests/index.print.html" rel="alternate" type="text/html" title="CC 410 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cc410/z-examples/01-hello-real-world/04-java/05-unit-tests/embed.html" rel="alternate" type="text/html" title="CC 410 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cc410/images/favicon.ico?1665504515" rel="icon" type="image/x-icon">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/fontawesome-all.min.css?1665504515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cc410/css/fontawesome-all.min.css?1665504515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/featherlight.min.css?1665504515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cc410/css/featherlight.min.css?1665504515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/auto-complete.css?1665504515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cc410/css/auto-complete.css?1665504515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/perfect-scrollbar.min.css?1665504515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/nucleus.css?1665504515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/fonts.css?1665504515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cc410/css/fonts.css?1665504515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/theme.css?1665504515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/theme-light-theme.css?1665504515" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/ie.css?1665504515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/variant.css?1665504515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/print.css?1665504515" rel="stylesheet" media="print">
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/variant.js?1665504515"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/cc410/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/cc410/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cc410/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cc410/css/custom.css?1665504515" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/jquery.min.js?1665504515" defer></script>

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cc410/z-examples/01-hello-real-world/04-java/05-unit-tests/">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
<h1>Unit Tests</h1>
<p><a href="https://www.youtube.com/watch?v=kS5-DplKm6s">YouTube Video</a></p>
<p>At this point, we&rsquo;ve written the basic code for our &ldquo;Hello World&rdquo; program. However, how can we automatically verify that the source code works properly? To do that, we&rsquo;ll need to create some <strong>unit tests</strong> that verify our code.</p>
<h2 id="unit-tests">Unit Tests</h2>
<p>In our Java application, the unit tests are stored in the <code>app/src/test/java</code> directory. In that directory, there is a directory for <code>hello</code> that represents a package, just like the <code>hello</code> directory in the <code>app/src/main/java</code> where our program code lives. It is typically good practice to have packages in our unit tests that match the packages in our source code, so we&rsquo;ll leave it as is.</p>
<p>However, just like we renamed <code>App.java</code> to <code>HelloWorld.java</code>, let&rsquo;s do the same with the <code>AppTest.java</code> file, found in <code>app/src/test/java/hello</code>. After you rename it, it should look like this:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/12renametest.png" alt="Rename AppTest"></p>
<p>Thankfully, we don&rsquo;t have to do anything else after renaming this file, because, as we&rsquo;ll see shortly, Gradle is able to automatically find all of the unit test classes that exist in the <code>app/src/test</code> directory.</p>
<h2 id="update-junit-to-version-5">Update JUnit to Version 5</h2>
<p>Next, let&rsquo;s upgrade the version of JUnit used by Gradle. By default, Gradle builds a project that uses JUnit 4, but now we can switch to the newer JUnit 5, sometimes referred to as JUnit Jupiter. To do this, we need to edit a few lines in the <code>build.gradle</code> file, which can be found in the <code>app</code> directory. The instructions for this process can be found in the 

<a href="https://junit.org/junit5/docs/current/user-guide/#running-tests-build" target="_blank" rel="noopener">JUnit 5 User Guide</a></p>
<p>First, look for the following dependencies section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>dependencies <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit test framework.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    testImplementation <span style="color:#e6db74">&#39;junit:junit:4.13&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This dependency is used by the application.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    implementation <span style="color:#e6db74">&#39;com.google.guava:guava:29.0-jre&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>As we can see, it uses version 4.13 of JUnit. Let&rsquo;s update to JUnit 5, and also configure Gradle to use the JUnit Jupiter test engine. Replace that dependencies section with this one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>dependencies <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter API for testing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    testImplementation <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-api:5.6.2&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use JUnit Jupiter Engine for testing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    testRuntimeOnly <span style="color:#e6db74">&#39;org.junit.jupiter:junit-jupiter-engine&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This dependency is used by the application.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    implementation <span style="color:#e6db74">&#39;com.google.guava:guava:29.0-jre&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Lastly, we need to configure Gradle to use the JUnit platform for testing. So, at the bottom of our <code>build.gradle</code> file, we&rsquo;ll add the following section, outside of any other sections:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>tasks<span style="color:#f92672">.</span><span style="color:#a6e22e">named</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;test&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use junit platform for unit tests.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    useJUnitPlatform<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>There we go! Now Gradle is configured to use JUnit 5 properly!</p>
<h2 id="write-code-in-helloworldtestjava">Write Code in HelloWorldTest.java</h2>
<p>Let&rsquo;s put some code in the <code>HelloWorldTest.java</code> file to test our &ldquo;Hello World&rdquo; application. Here&rsquo;s a sample of what a unit test for this might look like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> hello<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import static</span> org.junit.jupiter.api.Assertions.assertEquals<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.ByteArrayOutputStream<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.PrintStream<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.junit.jupiter.api.Test<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorldTest</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Test</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testHelloWorldMain</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        HelloWorld hw <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HelloWorld<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">final</span> PrintStream systemOut <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        ByteArrayOutputStream testOut <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ByteArrayOutputStream<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">setOut</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PrintStream<span style="color:#f92672">(</span>testOut<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        hw<span style="color:#f92672">.</span><span style="color:#a6e22e">main</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]{});</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">setOut</span><span style="color:#f92672">(</span>systemOut<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Hello World\n&#34;</span><span style="color:#f92672">,</span> testOut<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(),</span> <span style="color:#e6db74">&#34;Unexpected Output&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>We can break this code down line by line to discuss what it does and how it works. Let&rsquo;s look at the <code>package</code> and <code>import</code> statements first:</p>
<ol>
<li><code>package hello</code> - as we saw before, this line is used to show that this class is part of a package called <code>hello</code>.</li>
<li><code>import static org.junit.jupiter.api.Assertions.assertEquals</code> - this imports one of the tests that we need from the <code>org.junit.jupiter</code> library, the latest version of JUnit. You can find more information about JUnit by reading the 

<a href="https://junit.org/junit5/docs/current/user-guide/" target="_blank" rel="noopener">JUnit 5 User Guide</a>.</li>
<li><code>import java.io.ByteArrayOutputStream</code> - this is a library used to store data in an array of bytes.</li>
<li><code>import java.io.PrintStream</code> - similarly, this library is used to easily &ldquo;print&rdquo; data into another output stream.</li>
<li><code>import org.junit.jupiter.api.Test</code> - this is another class from JUnit  that allows us to mark methods as unit tests.</li>
</ol>
<p>Now, let&rsquo;s look at the <code>testHelloWorldMain()</code> method itself. Here are the first few lines that we&rsquo;ll need to understand:</p>
<ol>
<li><code>@Test</code> - this is an example of an 

<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/language/annotations.html" target="_blank" rel="noopener">annotation</a> in Java, which allows us to add additional information to a method. In this case, it tells JUnit that this method is a unit test method.</li>
<li><code>testHelloWorldMain()</code> - typically, the method name of a unit test is very descriptive. If possible, try to describe the exact nature of the test in the method name, since the failed unit tests are reported by the name of the method.</li>
<li><code>HelloWorld hw = new HelloWorld()</code> - to begin our test, we instantiate a copy of our <code>HelloWorld</code> class so we can test it. One major theory behind unit tests is that each test should be run <strong>in isolation</strong> from other tests. So, instead of having a global <code>HelloWorld</code> object that each test can use, we should write each test to create brand new objects. Later on in this course, we&rsquo;ll see how we can simplify this and avoid code reuse.</li>
</ol>
<p>Next, we have three lines of code that are closely related:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> PrintStream systemOut <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>ByteArrayOutputStream testOut <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ByteArrayOutputStream<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">setOut</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PrintStream<span style="color:#f92672">(</span>testOut<span style="color:#f92672">));</span>
</span></span></code></pre></div><p>These three lines are used to redirect the output of the <code>HelloWorld</code> application we are testing to a different location. Recall that we use <code>System.out.println</code> to print text to the terminal, so these lines are used to store the existing value of <code>System.out</code> and then replace it with our own <strong>stream</strong> that we can use.</p>
<p>After that, we have the line <code>hw.main(new String[]{})</code> which calls the main method of our <code>Hello World</code> class. We have to provide an empty array of strings as an argument, which matches the expected command-line arguments of the program itself. So, if we need to provide command-line arguments to this method, we can place them in this array!</p>
<p>Lastly, we do two more things. First, the line <code>System.setOut(systemOut)</code> will reset the <code>System.out</code> stream back to what it was previously.</p>
<p>Then, we reach the most important line of the program: <code>assertEquals(testOut.toString(), &quot;Hello World\n&quot;, &quot;Unexpected Output&quot;)</code>. This line is called an <strong>assertion</strong>, and it is the basis of most unit tests. In this line, we are stating that the output we receive from the program, stored in <code>testOut</code> and accessed via the <code>toString()</code> method, should exactly match <code>&quot;Hello World\n&quot;</code> in order for the test to pass. If it doesn&rsquo;t, then we can share a helpful error message, in this case &ldquo;Unexpected Output&rdquo; when the test fails.</p>
<p>Typically, most unit tests contain several of these assertions, and there are many different assertion methods we can use, but for right now we&rsquo;ll just use the <code>assertEquals</code> method.</p>
<p>There we go! That&rsquo;s all it takes to write a simple unit test. However, as you&rsquo;ve probably noticed, the code for a unit test is much more complex than the code that we are testing. That&rsquo;s actually pretty typical - many times it is much more difficult to write tests that ensure the code works than writing the code itself. However, the usefulness of those tests will often outweigh the cost, as it can be even <em>more</em> costly to constantly fix bugs and errors that would have been caught by a proper set of unit tests.</p>
<h2 id="running-unit-tests">Running Unit Tests</h2>
<p>Now that we&rsquo;ve written our unit test, we can use Gradle to execute them. To do that, simply open the Linux terminal, navigate to the <code>java</code> folder, and then run the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gradle test
</span></span></code></pre></div><p>When you run this command for the first time, Gradle may take a moment to download the JUnit 5 libraries it needs. Once it is done, you&rsquo;ll get the usual response that the build was successful, as shown below:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/13test.png" alt="Test Success"></p>
<p>However, we might want to learn a bit more about what tests were executed and make sure it is working properly. So, we can look for the test report in the <code>build</code> folder. Specifically, you&rsquo;ll find it at <code>app/build/reports/tests/test/index.html</code>. So, find that file in the Codio file tree to the left and open it. When you do, you&rsquo;ll see a file full of HTML like this one:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/14html.png" alt="Test Report HTML"></p>
<p>That&rsquo;s really difficult to read, isn&rsquo;t it? Thankfully, we can tell Codio to open that HTML file as a webpage by <strong>right-clicking</strong> on it and selecting <strong>Preview Static</strong>:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/14preview.png" alt="Preview Static"></p>
<p>If done correctly, you should see a webpage that looks like this:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/14webpage.png" alt="Test Report"></p>
<p>Hopefully, we should see that our code passed the test! We can click on the links on that page to dig deeper and see the results for specific tests classes or even individual tests.</p>
<h2 id="test-failures">Test Failures</h2>
<p>So, let&rsquo;s explore a bit. First, let&rsquo;s make a change to the unit test so that the program will fail. A great way to do this is to change the assertion on the last line of the unit test. Once you&rsquo;ve made that change, re-run the tests using the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gradle test
</span></span></code></pre></div><p>This time, you&rsquo;ll get some different output:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/15fail.png" alt="Test Fail"></p>
<p>Here, we can see that JUnit will helpfully tell us the method name of each test that failed. We can now open the test report from before and dig into it to find exactly where the test failed and why. Here&rsquo;s what you might see:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cc410/images/e1/15failreport.png" alt="Test Fail Report"></p>
<p>The most important part is at the bottom of that file - it shows the exact assertion that failed and why. Below that, you&rsquo;ll see a full stack trace of what was happening when it fails. We&rsquo;ve highlighted the most important parts - the assertion that failed, and the line in the stack trace that shows exactly where in the unit test it failed.</p>
<p>So, when a test fails, you can use that information to work backwards and figure out why it failed. Was the test incorrect? Did the source code of the application have a bug? Either of those could be a reason for a test failure. Hopefully you can use the information from the test report to find it and fix it!</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    
  </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/clipboard.min.js?1665504515" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/perfect-scrollbar.min.js?1665504515" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/featherlight.min.js?1665504515" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/theme.js?1665504515" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cc410/js/tele-scroll.js?1665504515 defer"></script>
    
  </body>
</html>
