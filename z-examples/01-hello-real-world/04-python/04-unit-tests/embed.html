<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="At this point, we’ve written the basic code for our “Hello World” program. However, how can we automatically verify that the source code works properly? To do that, we’ll need to create some unit tests that verify our code.
pytest There are many different libraries that can be used to create unit tests for Python. Python itself includes a package called unittest that can serve this purpose. However, many Python developers choose to use an external application called pytest for unit testing. There are many reasons for this, some of which are discussed in this blog post.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Unit Tests :: CC 410 Textbook">
    <meta name="twitter:description" content="At this point, we’ve written the basic code for our “Hello World” program. However, how can we automatically verify that the source code works properly? To do that, we’ll need to create some unit tests that verify our code.
pytest There are many different libraries that can be used to create unit tests for Python. Python itself includes a package called unittest that can serve this purpose. However, many Python developers choose to use an external application called pytest for unit testing. There are many reasons for this, some of which are discussed in this blog post.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Unit Tests :: CC 410 Textbook">
    <meta property="og:description" content="At this point, we’ve written the basic code for our “Hello World” program. However, how can we automatically verify that the source code works properly? To do that, we’ll need to create some unit tests that verify our code.
pytest There are many different libraries that can be used to create unit tests for Python. Python itself includes a package called unittest that can serve this purpose. However, many Python developers choose to use an external application called pytest for unit testing. There are many reasons for this, some of which are discussed in this blog post.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Example Projects">
    <meta property="article:modified_time" content="2024-06-17T14:13:48-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Unit Tests :: CC 410 Textbook">
    <meta itemprop="description" content="At this point, we’ve written the basic code for our “Hello World” program. However, how can we automatically verify that the source code works properly? To do that, we’ll need to create some unit tests that verify our code.
pytest There are many different libraries that can be used to create unit tests for Python. Python itself includes a package called unittest that can serve this purpose. However, many Python developers choose to use an external application called pytest for unit testing. There are many reasons for this, some of which are discussed in this blog post.">
    <meta itemprop="dateModified" content="2024-06-17T14:13:48-05:00">
    <meta itemprop="wordCount" content="2003">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Unit Tests :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/index.html" rel="canonical" type="text/html" title="Unit Tests :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/index.xml" rel="alternate" type="application/rss+xml" title="Unit Tests :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/index.print.html" rel="alternate" type="text/html" title="Unit Tests :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/tele.html" rel="alternate" type="text/html" title="Unit Tests :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1758639063" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1758639063" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1758639063" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1758639063" defer></script>
    <script src="/cc410/js/search.min.js?1758639063" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1758639063";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1758639063" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1758639063" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1758639063" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1758639063" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1758639063" rel="stylesheet">
    <link href="/cc410/css/format-html.min.css?1758639063" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/z-examples\/01-hello-real-world\/04-python\/04-unit-tests\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1758639063" rel="stylesheet">
  </head>
  <body class="mobile-support embed html" data-url="/cc410/z-examples/01-hello-real-world/04-python/04-unit-tests/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable z-examples" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="unit-tests">Unit Tests</h1>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/OuG9rmdl2_A" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>At this point, we&rsquo;ve written the basic code for our &ldquo;Hello World&rdquo; program. However, how can we automatically verify that the source code works properly? To do that, we&rsquo;ll need to create some <strong>unit tests</strong> that verify our code.</p>
<h2 id="pytest">pytest</h2>
<p>There are many different libraries that can be used to create unit tests for Python. Python itself includes a package called <a href="https://docs.python.org/3/library/unittest.html" rel="external" target="_blank">unittest</a> that can serve this purpose. However, many Python developers choose to use an external application called <a href="https://docs.pytest.org/en/stable/" rel="external" target="_blank">pytest</a> for unit testing. There are many reasons for this, some of which are discussed in <a href="https://blog.j-labs.pl/2019/02/Pytest-why-its-more-popular-than-unittest" rel="external" target="_blank">this blog post</a>.</p>
<p>To use pytest, we&rsquo;ll need to install it.</p>
<h2 id="installing-external-python-libraries">Installing External Python Libraries</h2>
<p>Before we do that, let&rsquo;s take a step back and discuss installing external libraries via Python. One of the major selling points of the Python programming language is the number of external libraries that can be easily installed. These range from simple game engines all the way to popular scientific and machine learning libraries such as <a href="https://www.scipy.org/" rel="external" target="_blank">SciPy</a> and <a href="https://scikit-learn.org/stable/" rel="external" target="_blank">scikit-learn</a>.</p>
<p>Thankfully, nearly every external library available for Python can be downloaded and installed from the <a href="https://pypi.org/" rel="external" target="_blank">Python Package Index</a>, also known as PyPI. To do this, we use a tool that is included with Python called the <a href="https://pip.pypa.io/en/stable/" rel="external" target="_blank">Package Installer for Python</a> or <code>pip</code>.</p>
<p>So, when we find an external library we&rsquo;d like to use in Python, usually all we have to do to install it is to find the library&rsquo;s name on PyPI, and then use the <code>pip</code> tool to install it. In fact, most libraries include those instructions as part of their documentation, as we can see in the <a href="https://docs.pytest.org/en/stable/getting-started.html" rel="external" target="_blank">Installation Instructions</a> for pytest.</p>
<h2 id="install-pytest">Install pytest</h2>
<p>So, to install pytest, we should run the following command:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install pytest</span></span></code></pre></div>
<p>Notice that this is a little bit different than the command given in the pytest <a href="https://docs.pytest.org/en/stable/getting-started.html" rel="external" target="_blank">Installation Instructions</a>. First, we will use the command <code>pip3</code> instead of <code>pip</code> to ensure that we are installing pytest for Python version 3. If we use the <code>pip</code> command instead, it will install pytest for Python 2, which we don&rsquo;t want.</p>
<p>Additionally, the <code>-U</code> command line flag shown in the documentation simply tells <code>pip</code> to upgrade the package if it is already installed. Since we know it isn&rsquo;t installed in this case, we&rsquo;ll just omit it.</p>
<p>When we execute that command, we should get output similar to the following:</p>
<p><a href="#R-image-532cd4fb6aa5fffbc9c68eb3c19bf6a2" class="lightbox-link"><img alt="Install Pytest" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23pytest.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-532cd4fb6aa5fffbc9c68eb3c19bf6a2"><img alt="Install Pytest" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23pytest.png"></a></p>
<p>The <code>pip</code> tool will automatically install any additional libraries that are required for pytest, so we might see several items listed. At the bottom of the output, it will list all of the libraries installed. Since we see pytest in that list, we have successfully installed it.</p>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Linux Command Prefixes
  </summary>
  <div class="box-content">
<p>One point of confusion for many new developers is the inconsistent way Linux terminal commands are denoted in the documentation of various tools. For example, in the pytest documentation, Linux terminal commands are sometimes, but not always, prefixed by a dollar sign <code>$</code>:</p>
<p><a href="#R-image-08ea428e08ec6b7e16a0064ac8c83915" class="lightbox-link"><img alt="Dollar Sign" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23prefix.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-08ea428e08ec6b7e16a0064ac8c83915"><img alt="Dollar Sign" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23prefix.png"></a></p>
<p>In other documentation, you might see either a pound sign <code>#</code> or a greater than sign <code>&gt;</code>, as seen in this example:</p>
<p><a href="#R-image-7e8ae768ff9779a1bc6b0f5c7e1e6091" class="lightbox-link"><img alt="Arrow Prefix" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/7arrow.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7e8ae768ff9779a1bc6b0f5c7e1e6091"><img alt="Arrow Prefix" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/7arrow.png"></a></p>
<p>However, when we execute those commands, we shouldn&rsquo;t include the greater-than symbol or dollar sign. Why is that? Many places that include documentation for the Linux terminal helpfully include either the last symbol of the command prompt before the command, or some other symbol like an arrow, indicating that this is a command to be entered in the terminal. Linux typically uses two different types of command prompts:</p>
<ul>
<li>Dollar sign <code>$</code> - indicating that the terminal is logged in to a normal user account</li>
<li>Pound sign <code>#</code> - indicating that the terminal is logged in with administrator permissions (<code>root</code>)</li>
</ul>
<p>Documentation also often uses the <code>&gt;</code> symbol in front of commands to be entered by the user. So, in general, when you see a Linux terminal command in documentation that starts with a <code>&gt;</code>, <code>$</code> or <code>#</code>, you should omit that character when executing the command. This can be very confusing and frustrating to get used to, especially since it is not standardized. As we&rsquo;ll learn later in this course, standardized documentation is a very important part of being a good programmer!</p>
  </div>
</details>
<h2 id="create-unit-test-package">Create Unit Test Package</h2>
<p>Now that we&rsquo;ve installed pytest, let&rsquo;s create a unit test for our &ldquo;Hello World&rdquo; application. As you might guess, we&rsquo;ll use the <code>test</code> directory we created earlier to store all of our unit tests. It is typically good practice to have packages in our unit tests that match the packages in our source code, so we&rsquo;ll start by creating a package named <code>hello</code> in that directory. To do that, we&rsquo;ll need to do the following:</p>
<ol>
<li>Create a folder named <code>hello</code> in the <code>test</code> folder</li>
<li>Create a file named <code>__init__.py</code> in the new <code>test/hello</code> folder</li>
<li>Place the code <code>print(&quot;In /test/hello/__init__.py&quot;)</code> in the <code>test/hello/__init__.py</code> file</li>
</ol>
<p>Once we are done, we should see the following structure in our <code>python</code> folder:</p>
<p><a href="#R-image-e543f349e24a85afec4559326e5108e9" class="lightbox-link"><img alt="Python Unit Test Structure" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23struct.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e543f349e24a85afec4559326e5108e9"><img alt="Python Unit Test Structure" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23struct.png"></a></p>
<h2 id="write-unit-test">Write Unit Test</h2>
<p>Next, let&rsquo;s create a file called <code>test_HelloWorld.py</code> in our <code>test/hello</code> package. Our file structure should now include that file:</p>
<p><a href="#R-image-545c20ab58655c13611638cacf73d3f1" class="lightbox-link"><img alt="Python Unit Test File" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23file.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-545c20ab58655c13611638cacf73d3f1"><img alt="Python Unit Test File" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23file.png"></a></p>
<p>Let&rsquo;s put some code in the <code>test_HelloWorld.py</code> file to test our &ldquo;Hello World&rdquo; application. Here&rsquo;s a sample of what a unit test for this might look like:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestHelloWorld</span>():
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys):
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>        captured <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> captured<span style="color:#f92672">.</span>out <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;Unexpected Output&#34;</span></span></span></code></pre></div>
<p>We can break this code down line by line to discuss what it does and how it works.</p>
<ol>
<li><code>from src.hello.HelloWorld import HelloWorld</code> - in our unit tests, we can import our other packages using the <code>src</code> meta package we created earlier</li>
<li><code>class TestHelloWorld():</code> - unlike Java, Python allows us to create classes with names that differ from the filename. For unit tests, our class names should begin with the word <code>Test</code></li>
<li><code>def test_hello_world(self, capsys):</code> - Likewise, our test methods should begin with <code>test_</code>. The <code>capsys</code> argument tells pytest that we&rsquo;d like to capture output printed to the terminal. This is documented in the <a href="https://docs.pytest.org/en/stable/capture.html" rel="external" target="_blank">pytest Documentation</a>.</li>
<li><code>HelloWorld.main([&quot;HelloWorld&quot;])</code> - this line executes the <code>main</code> method of our <code>HelloWorld</code> class. We must provide a list of strings that represent the expected command line arguments for the program. Recall that Python always includes the name of the script as the first command line argument, so we should simulate that in our unit tests. More about that convention can be found in the <a href="https://docs.python.org/3/library/sys.html#sys.argv" rel="external" target="_blank">Python Documentation</a></li>
<li><code>captured = capsys.readouterr()</code> - this allows us to get the output printed to the terminal by our program. See the <a href="https://docs.pytest.org/en/stable/capture.html" rel="external" target="_blank">pytest Documentation</a>.</li>
</ol>
<p>Then, we reach the most important line of the program: <code>assert captured.out == &quot;Hello World\n&quot;, &quot;Unexpected Output&quot;</code>. This line is called an <strong>assertion</strong>, and it is the basis of most unit tests. In this line, we are stating that the output we receive from the program, stored in <code>captured.out</code>, should exactly match <code>&quot;Hello World\n&quot;</code> in order for the test to pass. If it doesn&rsquo;t, then we can share a helpful error message, in this case &ldquo;Unexpected Output&rdquo; when the test fails.</p>
<p>Typically, most unit tests contain several of these assertions, and there are many different assertion methods we can use, but for right now we&rsquo;ll just use the <code>assert</code> method.</p>
<p>There we go! That&rsquo;s all it takes to write a simple unit test. However, as you&rsquo;ve probably noticed, the code for a unit test is much more complex than the code that we are testing. That&rsquo;s actually pretty typical - many times it is much more difficult to write tests that ensure the code works than writing the code itself. However, the usefulness of those tests will often outweigh the cost, as it can be even <em>more</em> costly to constantly fix bugs and errors that would have been caught by a proper set of unit tests.</p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    pytest Naming Conventions
  </summary>
  <div class="box-content">
<p>One important aspect of the pytest tool is how it uses naming conventions to easily find files that contain unit tests. The naming conventions are fully described in the <a href="https://docs.pytest.org/en/stable/goodpractices.html#test-discovery" rel="external" target="_blank">pytest Documentation</a>. In short, any Python file that matches either <code>test_*.py</code> or  <code>*_test.py</code> will be included. For this course, we&rsquo;ll use the <code>test_*.py</code> convention.</p>
<p>Then, inside of those files, it will look for classes that begin with the name <code>Test</code>, and methods inside of that class that begin with <code>test</code>. This is an example of a <strong>convention</strong> that dictates how the program functions. So, we&rsquo;ll need to make sure our unit tests follow this pattern.</p>
  </div>
</details>
<h2 id="running-unit-tests">Running Unit Tests</h2>
<p>Now that we&rsquo;ve written our unit tests, let&rsquo;s see if we can execute them. First, we&rsquo;ll need to open a Linux terminal. Then, we&rsquo;ll need to navigate to the <code>python</code> directory. Once we are there, we can run pytest using the following command:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pytest</span></span></code></pre></div>
<p>When we do, we&rsquo;ll probably get output that looks like this:</p>
<p><a href="#R-image-430eb84cbfc900f318e519ed5e5b30fe" class="lightbox-link"><img alt="PyTest Error" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23error.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-430eb84cbfc900f318e519ed5e5b30fe"><img alt="PyTest Error" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23error.png"></a></p>
<p>If we read this error closely, we&rsquo;ll see that it is unable to find our <code>src.hello.HelloWorld</code> class. That&rsquo;s strange - we were able to find it earlier. Let&rsquo;s dive into that and see what&rsquo;s going on.</p>
<p>Since pytest is installed as a library in Python, there is another way we can execute it. Let&rsquo;s try that and see what happens:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 -m pytest</span></span></code></pre></div>
<p>When we do that, we&rsquo;ll see that our tests work properly:</p>
<p><a href="#R-image-7f40f4d740507bb8fd0e4260db1708d4" class="lightbox-link"><img alt="PyTest Works" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23works.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7f40f4d740507bb8fd0e4260db1708d4"><img alt="PyTest Works" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23works.png"></a></p>
<p>What&rsquo;s going on here? Well, this gets a bit complicated, but in short the <code>pytest</code> command does not include the current directory as part of the <code>PYTHONPATH</code>, which is a set of locations where Python should look for additional code. However, when we launch pytest using the standard <code>python3</code> command, Python will add the current directory to the <code>PYTHONPATH</code>. That means that our <code>src</code> meta package will get included, and pytest is able to find it.</p>
<p>Thankfully, there are a number of ways to fix this. The simplest is actually a bit of a &ldquo;hack&rdquo; that involves creating a blank file named <code>conftest.py</code> in the <code>src</code> package. This will tell pytest to include this directory in the <code>PYTHONPATH</code> correctly. This is well described in this <a href="https://stackoverflow.com/q/34466027" rel="external" target="_blank">StackOverflow Post</a> So, let&rsquo;s go ahead and create that file:</p>
<p><a href="#R-image-4cb6c0fac21f20b30002aee161d57627" class="lightbox-link"><img alt="Python Conftest" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23conftest.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4cb6c0fac21f20b30002aee161d57627"><img alt="Python Conftest" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23conftest.png"></a></p>
<p>Then, in that file, we should put a note that explains what&rsquo;s going on. So, let&rsquo;s put the following comment in that file:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;Sample test configuration file.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">This file is used to configure testing parameters for PyTest. It is included
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">as a hack to get PyTest to recognize and include this directory in the Python
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">path. See https://stackoverflow.com/q/34466027.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Author: Russell Feldhausen russfeld@ksu.edu
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Version: 0.1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span></span></span></code></pre></div>
<p>That will help us remember what that file is for.</p>
<p>Now, let&rsquo;s try to run our tests again using this command:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pytest</span></span></code></pre></div>
<p>If everything is configured correctly, we should see output similar to this:</p>
<p><a href="#R-image-f3a4a8cb371847a613f80b5d1101b292" class="lightbox-link"><img alt="Pytest Success" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23success.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f3a4a8cb371847a613f80b5d1101b292"><img alt="Pytest Success" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23success.png"></a></p>
<p>That means our unit tests are working! However, we aren&rsquo;t getting any useful feedback beyond the number of tests that were executed and whether they succeed.</p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Pytest Cache
  </summary>
  <div class="box-content">
<p>You might also have noticed a <code>.pytest_cache</code> directory appear after running pytest for the first time. This is simply a folder that pytest uses to cache data that it needs, and you can safely ignore it.</p>
  </div>
</details>
<h2 id="unit-test-reports">Unit Test Reports</h2>
<p>Thankfully, we can install another Python library, <code>pytest-html</code> that will allow us to create HTML reports from our unit test results. So, in a Linux terminal, we can install that library using <code>pip</code> with the following command:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install pytest-html</span></span></code></pre></div>
<p>Then, from within the <code>python</code> directory, we can run our tests using this new command to generate a report:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pytest --html<span style="color:#f92672">=</span>reports/pytest/index.html</span></span></code></pre></div>
<p>In that command, we have specified that the report should be created in the <code>reports/pytest/index.html</code> file. So, after running that command, we should see the following folder structure:</p>
<p><a href="#R-image-1c31123790699cec518f916e6e2466c3" class="lightbox-link"><img alt="PyTest HTML" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23html.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1c31123790699cec518f916e6e2466c3"><img alt="PyTest HTML" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23html.png"></a></p>
<p>So, find that file in the Codio file tree to the left and open it. When you do, you&rsquo;ll see a file full of HTML like this one:</p>
<p><a href="#R-image-06045f2adf75e8f583c10b3e51fd3204" class="lightbox-link"><img alt="Test Report HTML" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23htmlfile.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-06045f2adf75e8f583c10b3e51fd3204"><img alt="Test Report HTML" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23htmlfile.png"></a></p>
<p>That&rsquo;s really difficult to read, isn&rsquo;t it? Thankfully, we can tell Codio to open that HTML file as a webpage by <strong>right-clicking</strong> on it and selecting <strong>Preview Static</strong>:</p>
<p><a href="#R-image-e8a6e548a453159559dd3d10e1825457" class="lightbox-link"><img alt="Preview Static" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23static.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e8a6e548a453159559dd3d10e1825457"><img alt="Preview Static" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23static.png"></a></p>
<p>If done correctly, you should see a webpage that looks like this:</p>
<p><a href="#R-image-40472e66f6a484e54164791492c56065" class="lightbox-link"><img alt="Test Report" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/23webpage.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-40472e66f6a484e54164791492c56065"><img alt="Test Report" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/23webpage.png"></a></p>
<p>Hopefully, we should see that our code passed the test!</p>
<p>On the next page, we&rsquo;ll explore how to expand the usefulness of our unit tests and automate this process a bit more.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1758639063" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1758639063" defer></script>
    <script src="/cc410/js/theme.min.js?1758639063" defer></script>
  <script src="/cc410/js/embed-iframe.min.js?1758639063" defer></script>
  </body>
</html>
