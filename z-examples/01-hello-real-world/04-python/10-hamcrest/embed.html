<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Let’s introduce one more useful tool as part of this example, the Hamcrest assertion library. Hamcrest is a library of unit test assertions that is available for multiple programming languages, including both Java and Python. Hamcrest makes it easy to write very advanced assertions in a way that is both readable and flexible. In fact, most of the autograders in prior CC courses use Hamcrest as the primary assertion library to make them easy to develop. Let’s explore what it takes to add Hamcrest to our project.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Hamcrest :: CC 410 Textbook">
    <meta name="twitter:description" content="Let’s introduce one more useful tool as part of this example, the Hamcrest assertion library. Hamcrest is a library of unit test assertions that is available for multiple programming languages, including both Java and Python. Hamcrest makes it easy to write very advanced assertions in a way that is both readable and flexible. In fact, most of the autograders in prior CC courses use Hamcrest as the primary assertion library to make them easy to develop. Let’s explore what it takes to add Hamcrest to our project.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Hamcrest :: CC 410 Textbook">
    <meta property="og:description" content="Let’s introduce one more useful tool as part of this example, the Hamcrest assertion library. Hamcrest is a library of unit test assertions that is available for multiple programming languages, including both Java and Python. Hamcrest makes it easy to write very advanced assertions in a way that is both readable and flexible. In fact, most of the autograders in prior CC courses use Hamcrest as the primary assertion library to make them easy to develop. Let’s explore what it takes to add Hamcrest to our project.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Example Projects">
    <meta property="article:modified_time" content="2024-06-17T14:13:48-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Hamcrest :: CC 410 Textbook">
    <meta itemprop="description" content="Let’s introduce one more useful tool as part of this example, the Hamcrest assertion library. Hamcrest is a library of unit test assertions that is available for multiple programming languages, including both Java and Python. Hamcrest makes it easy to write very advanced assertions in a way that is both readable and flexible. In fact, most of the autograders in prior CC courses use Hamcrest as the primary assertion library to make them easy to develop. Let’s explore what it takes to add Hamcrest to our project.">
    <meta itemprop="dateModified" content="2024-06-17T14:13:48-05:00">
    <meta itemprop="wordCount" content="656">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Hamcrest :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/index.html" rel="canonical" type="text/html" title="Hamcrest :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/index.xml" rel="alternate" type="application/rss+xml" title="Hamcrest :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/index.print.html" rel="alternate" type="text/html" title="Hamcrest :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/tele.html" rel="alternate" type="text/html" title="Hamcrest :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1755708720" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1755708720" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1755708720" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1755708720" defer></script>
    <script src="/cc410/js/search.min.js?1755708720" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1755708720";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1755708720" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1755708720" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1755708720" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1755708720" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1755708720" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1755708720" rel="stylesheet">
    <link href="/cc410/css/format-html.min.css?1755708720" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/z-examples\/01-hello-real-world\/04-python\/10-hamcrest\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1755708720" rel="stylesheet">
  </head>
  <body class="mobile-support embed html" data-url="/cc410/z-examples/01-hello-real-world/04-python/10-hamcrest/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable z-examples" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="hamcrest">Hamcrest</h1>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/C5HJWKFLm0Q" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Let&rsquo;s introduce one more useful tool as part of this example, the Hamcrest assertion library. <a href="https://github.com/hamcrest/PyHamcrest" rel="external" target="_blank">Hamcrest</a> is a library of unit test assertions that is available for multiple programming languages, including both Java and Python. Hamcrest makes it easy to write very advanced assertions in a way that is both readable and flexible. In fact, most of the autograders in prior CC courses use Hamcrest as the primary assertion library to make them easy to develop. Let&rsquo;s explore what it takes to add Hamcrest to our project.</p>
<h2 id="installing-hamcrest">Installing Hamcrest</h2>
<p>To make Hamcrest available, we simply have to add an entry for <code>pyhamcrest</code> to our <code>requirements.txt</code> file. Once we update that file, it will look like this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>coverage
</span></span><span style="display:flex;"><span>flake8
</span></span><span style="display:flex;"><span>flake8-docstrings
</span></span><span style="display:flex;"><span>flake8-html
</span></span><span style="display:flex;"><span>lxml
</span></span><span style="display:flex;"><span>mypy
</span></span><span style="display:flex;"><span>pdoc3
</span></span><span style="display:flex;"><span>pep8-naming
</span></span><span style="display:flex;"><span>pyhamcrest
</span></span><span style="display:flex;"><span>pytest
</span></span><span style="display:flex;"><span>pytest-html
</span></span><span style="display:flex;"><span>tox</span></span></code></pre></div>
<p>Then we can install it using this command from within the <code>python</code> folder:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install -r requirements.txt</span></span></code></pre></div>
<p>That&rsquo;s all there is to it! We now can use Hamcrest in our unit tests</p>
<h2 id="unit-test-with-hamcrest">Unit Test with Hamcrest</h2>
<p>Now, let&rsquo;s build a unit test that uses Hamcrest. So, in the <code>test/hello</code> directory, create a new file called <code>test_HelloWorldHamcrest.py</code> and paste the following code in that file:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;Test Class for HelloWorld using Hamcrest.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Author: Russell Feldhausen russfeld@ksu.edu
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Version: 0.1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> hamcrest.core.assert_that <span style="color:#f92672">import</span> assert_that
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> hamcrest.core.core.is_ <span style="color:#f92672">import</span> is_
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pytest <span style="color:#f92672">import</span> CaptureFixture
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> _pytest.capture <span style="color:#f92672">import</span> CaptureResult
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestHelloWorldHamcrest</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Test Class for `src.hello.HelloWorld`.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys: CaptureFixture[Any]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34;Test Method for `src.hello.HelloWorld.main`.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        This will test the main method with no arguments.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            capsys: PyUnit fixture to capture output.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>        captured: CaptureResult[Any] <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        assert_that(captured<span style="color:#f92672">.</span>out, is_(<span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>), <span style="color:#e6db74">&#34;Unexpected Output&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world_arg</span>(self, capsys: CaptureFixture[Any]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34;Test Method for `src.hello.HelloWorld.main`.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        This will test the main method with 1 argument.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            capsys: PyUnit fixture to capture output.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>, <span style="color:#e6db74">&#34;CC 410&#34;</span>])
</span></span><span style="display:flex;"><span>        captured: CaptureResult[Any] <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        assert_that(captured<span style="color:#f92672">.</span>out, is_(<span style="color:#e6db74">&#34;Hello CC 410</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>), <span style="color:#e6db74">&#34;Unexpected Output&#34;</span>)</span></span></code></pre></div>
<p>The code is nearly identical to the other unit test class, but with two major changes:</p>
<ol>
<li>There are a couple of new import statements at the top to include the <code>assert_that</code> and <code>is_</code> methods from Hamcrest.</li>
<li>Instead of using <code>assert</code> the last line of each unit test uses <code>assert_that</code>. The order of the arguments and the basic idea is pretty much the same. Also, note the use of the <code>is_</code> method, which is simply stating that it should be equal. That method name includes an underscore to differentiate it from the <code>is</code> keyword in Python.</li>
</ol>
<p>Of course, a simple test case such as this doesn&rsquo;t show the power of using Hamcrest instead of the built-in assertions in pyunit. If you want to know more about Hamcrest, feel free to check out the <a href="https://pyhamcrest.readthedocs.io/en/v2.0.2/" rel="external" target="_blank">Hamcrest documentation</a>. We&rsquo;ll explore more about using Hamcrest in our unit tests later in this course.</p>
<h2 id="running-tests">Running Tests</h2>
<p>Now that we&rsquo;ve created a new unit test class, let&rsquo;s go ahead and run it. Thankfully, we don&rsquo;t have to do anything else - pyunit will automatically find the new unit test class and execute it along with all the others. So, in a Linux terminal in the <code>python</code> directory, run the following command to execute those tests, along with the rest of our commands:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>tox <span style="color:#f92672">-</span>r</span></span></code></pre></div>
<p>When the tests are complete, we can open the report and we should now see that there are 4 tests that executed successfully:</p>
<p><a href="#R-image-a1e86a7f071ac9bd55b5cea38a1381e0" class="lightbox-link"><img alt="Hamcrest Test Report" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/30tests.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a1e86a7f071ac9bd55b5cea38a1381e0"><img alt="Hamcrest Test Report" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/30tests.png"></a></p>
<p>While we&rsquo;re at it, since we added new code and unit tests we should also check to make sure that our code coverage is still good:</p>
<p><a href="#R-image-f437355a9651b46beccf2b1c89885885" class="lightbox-link"><img alt="Hamcrest Code Coverage" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/30cov.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f437355a9651b46beccf2b1c89885885"><img alt="Hamcrest Code Coverage" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/30cov.png"></a></p>
<p>As long as the tox command executes, we also know that the code passed all of our Flake8 style checks, and updated the documentation using pdoc3 as well.</p>
<p><a href="#R-image-4a9c9646ac4f68254a769d18c2175871" class="lightbox-link"><img alt="Hamcrest Flake" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/30flake.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4a9c9646ac4f68254a769d18c2175871"><img alt="Hamcrest Flake" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/30flake.png"></a></p>
<p>If you run into any errors on any of those commands, now is a good time to get them resolved before moving on! This is the last step before we submit our code!</p>
<p>Click the link below to jump to the end where we submit our code.</p>
<p><a href="/cc410/z-examples/01-hello-real-world/05-create-release/index.html">Create GitHub Release</a></p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1755708720" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1755708720" defer></script>
    <script src="/cc410/js/theme.min.js?1755708720" defer></script>
  <script src="/cc410/js/embed-iframe.min.js?1755708720" defer></script>
  </body>
</html>
