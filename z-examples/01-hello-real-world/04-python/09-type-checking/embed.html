<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="One of the major selling points of Python is that it is dynamically typed. This means that the data type of variables is determined at runtime, and a single variable can store multiple data types throughout the execution of the program.
While this can make development seem quick and easy, it can also cause programmers to make mistakes related to the handling of various data types that wouldn’t be present in statically typed languages such as Java, C&#43;&#43;, or C#. Those languages require compilation before they can be executed, and one step that the compiler performs is type checking. Type checking is a process that makes sure each value that is ever assigned to a variable has the correct type - otherwise the program won’t compile properly.">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta name="twitter:title" content="Type Checking :: CC 410 Textbook">
    <meta name="twitter:description" content="One of the major selling points of Python is that it is dynamically typed. This means that the data type of variables is determined at runtime, and a single variable can store multiple data types throughout the execution of the program.
While this can make development seem quick and easy, it can also cause programmers to make mistakes related to the handling of various data types that wouldn’t be present in statically typed languages such as Java, C&#43;&#43;, or C#. Those languages require compilation before they can be executed, and one step that the compiler performs is type checking. Type checking is a process that makes sure each value that is ever assigned to a variable has the correct type - otherwise the program won’t compile properly.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/index.html">
    <meta property="og:site_name" content="CC 410 Textbook">
    <meta property="og:title" content="Type Checking :: CC 410 Textbook">
    <meta property="og:description" content="One of the major selling points of Python is that it is dynamically typed. This means that the data type of variables is determined at runtime, and a single variable can store multiple data types throughout the execution of the program.
While this can make development seem quick and easy, it can also cause programmers to make mistakes related to the handling of various data types that wouldn’t be present in statically typed languages such as Java, C&#43;&#43;, or C#. Those languages require compilation before they can be executed, and one step that the compiler performs is type checking. Type checking is a process that makes sure each value that is ever assigned to a variable has the correct type - otherwise the program won’t compile properly.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Example Projects">
    <meta property="article:modified_time" content="2025-09-10T13:08:55-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <meta itemprop="name" content="Type Checking :: CC 410 Textbook">
    <meta itemprop="description" content="One of the major selling points of Python is that it is dynamically typed. This means that the data type of variables is determined at runtime, and a single variable can store multiple data types throughout the execution of the program.
While this can make development seem quick and easy, it can also cause programmers to make mistakes related to the handling of various data types that wouldn’t be present in statically typed languages such as Java, C&#43;&#43;, or C#. Those languages require compilation before they can be executed, and one step that the compiler performs is type checking. Type checking is a process that makes sure each value that is ever assigned to a variable has the correct type - otherwise the program won’t compile properly.">
    <meta itemprop="dateModified" content="2025-09-10T13:08:55-05:00">
    <meta itemprop="wordCount" content="1978">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cc410/images/hero.png">
    <title>Type Checking :: CC 410 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/index.html" rel="canonical" type="text/html" title="Type Checking :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/index.xml" rel="alternate" type="application/rss+xml" title="Type Checking :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/index.print.html" rel="alternate" type="text/html" title="Type Checking :: CC 410 Textbook">
    <link href="/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/tele.html" rel="alternate" type="text/html" title="Type Checking :: CC 410 Textbook">
    <link href="/cc410/images/favicon.ico?1758639063" rel="icon" type="image/x-icon" sizes="any">
    <link href="/cc410/css/auto-complete/auto-complete.min.css?1758639063" rel="stylesheet">
    <script src="/cc410/js/auto-complete/auto-complete.min.js?1758639063" defer></script>
    <script src="/cc410/js/search-lunr.min.js?1758639063" defer></script>
    <script src="/cc410/js/search.min.js?1758639063" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cc410/searchindex.en.js?1758639063";
    </script>
    <script src="/cc410/js/lunr/lunr.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.stemmer.support.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.multi.min.js?1758639063" defer></script>
    <script src="/cc410/js/lunr/lunr.en.min.js?1758639063" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1758639063" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cc410/fonts/fontawesome/css/fontawesome-all.min.css?1758639063" rel="stylesheet"></noscript>
    <link href="/cc410/css/perfect-scrollbar/perfect-scrollbar.min.css?1758639063" rel="stylesheet">
    <link href="/cc410/css/theme.min.css?1758639063" rel="stylesheet">
    <link href="/cc410/css/format-html.min.css?1758639063" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/z-examples\/01-hello-real-world\/04-python\/09-type-checking\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cc410';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cc410/css/custom.css?1758639063" rel="stylesheet">
  </head>
  <body class="mobile-support embed html" data-url="/cc410/z-examples/01-hello-real-world/04-python/09-type-checking/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable z-examples" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="type-checking">Type Checking</h1>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/MFaEO1cTlck" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>One of the major selling points of Python is that it is <strong>dynamically typed</strong>. This means that the data type of variables is determined at runtime, and a single variable can store multiple data types throughout the execution of the program.</p>
<p>While this can make development seem quick and easy, it can also cause programmers to make mistakes related to the handling of various data types that wouldn&rsquo;t be present in statically typed languages such as Java, C++, or C#. Those languages require compilation before they can be executed, and one step that the compiler performs is <strong>type checking</strong>. Type checking is a process that makes sure each value that is ever assigned to a variable has the correct type - otherwise the program won&rsquo;t compile properly.</p>
<p>Thankfully, with the addition of <strong>type hinting</strong> in Python, we can use a tool to perform type checking on our code as well. Let&rsquo;s see what that would look like!</p>
<h2 id="type-hinting-in-python">Type Hinting in Python</h2>
<p>Let&rsquo;s review our existing code in <code>HelloWorld.py</code> and see what it would look like with type hints added. The code is shown here without any docstrings just to make it easier to read:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorld</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@staticmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(args):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(args) <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(args[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello World&#34;</span>)</span></span></code></pre></div>
<p>To add type hinting, we need to add information to each variable and function at a bare minimum. So, let&rsquo;s look at the function first.</p>
<p>Recall that functions can return a value using the <code>return</code> keyword. We don&rsquo;t see that in our <code>main</code> function, so it doesn&rsquo;t return a value, right? In fact, any Python function that doesn&rsquo;t explicitly return a value within the code actually returns the value <code>None</code> by default. So, we would say that the &ldquo;return type&rdquo; of the function <code>main</code> is <code>None</code></p>
<p>To annotate that with a type hint, we would modify the code to look like this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorld</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@staticmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(args) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(args) <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(args[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello World&#34;</span>)</span></span></code></pre></div>
<p>Notice that we simply added <code>-&gt; None</code> after the function name and arguments, but before the colon <code>:</code>. That&rsquo;s all it takes!</p>
<p>Likewise, we should annotate each variable, including all of the function parameters. So, in our function, we are expecting a parameter named <code>args</code>. What type of data would be stored in <code>args</code>?</p>
<p>Recall that <code>args</code> is a stand in for <code>sys.argv</code>, which are the command line arguments provided to Python when the program is executed. <code>sys.argv</code> is a list of strings, so the type of <code>args</code> would also be a list of strings. Therefore, we can annotate it in this way:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> List
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorld</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@staticmethod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>(args: List[str]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(args) <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(args[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Hello World&#34;</span>)</span></span></code></pre></div>
<p>In this case, we added two things:</p>
<ul>
<li>For some special types, such as collections like lists, we&rsquo;ll need to import the proper type from the <code>typing</code> library.</li>
<li>After each variable is named, we can place a colon followed by the type of the variable. In the case of <code>args</code>, we set the type to <code>List[str]</code>, which represents a list of strings.</li>
</ul>
<p>There we go! We&rsquo;ve added type hints to our source code. If you want to learn more about how to add type hints to your code, here are some great resources:</p>
<ul>
<li><a href="https://docs.python.org/3/library/typing.html" rel="external" target="_blank">Typing</a> in the Python Documentation</li>
<li><a href="https://realpython.com/python-type-checking/" rel="external" target="_blank">Python Type Checking Guide</a> from Real Python</li>
<li><a href="https://mypy.readthedocs.io/en/stable/cheat_sheet_py3.html" rel="external" target="_blank">Type Hints Cheat Sheet</a> from Mypy</li>
<li><a href="https://mypy.readthedocs.io/en/stable/builtin_types.html" rel="external" target="_blank">Type System Reference</a> from Mypy</li>
</ul>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Codio IDE and Type Hinting
  </summary>
  <div class="box-content">
<p>Unfortunately, the Codio IDE does not properly deal with type hinting in Python, and will tell us that our code contains a syntax error:</p>
<p><a href="#R-image-670ef9aaa4e2299e691eb01530d9f846" class="lightbox-link"><img alt="Codio LSP Type Hinting" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29codiotype.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-670ef9aaa4e2299e691eb01530d9f846"><img alt="Codio LSP Type Hinting" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29codiotype.png"></a></p>
<p>We can safely ignore that error, provided that our code passes the Flake8 style checker itself.</p>
  </div>
</details>
<h2 id="type-checking-with-mypy">Type Checking with Mypy</h2>
<p>Now that we&rsquo;ve added some type hints to our code, how can we check to make sure our code doesn&rsquo;t violate those hints? To do that, we can use a static type checker called Mypy. [Mypy] is a powerful tool that allows us to quickly and easily spot typing errors in our Python code. However, it has one major caveat - it will only catch type errors for variables or functions that include type hints. It <strong>will not</strong> report all type errors in code that does not include type hints, nor will it tell us if some type hints are missing. So, it is up to us as developers to include all of the appropriate type hints ourselves!</p>
<p>To install Mypy, we can simply add the appropriate line to our <code>requirements.txt</code> file. We&rsquo;ll also install the <code>lxml</code> library, so we can generate HTML reports from Mypy. Once we&rsquo;ve added those lines, our requirements file should now look like this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span>coverage
</span></span><span style="display:flex;"><span>flake8
</span></span><span style="display:flex;"><span>flake8-docstrings
</span></span><span style="display:flex;"><span>flake8-html
</span></span><span style="display:flex;"><span>lxml
</span></span><span style="display:flex;"><span>mypy
</span></span><span style="display:flex;"><span>pdoc3
</span></span><span style="display:flex;"><span>pep8-naming
</span></span><span style="display:flex;"><span>pytest
</span></span><span style="display:flex;"><span>pytest-html
</span></span><span style="display:flex;"><span>tox</span></span></code></pre></div>
<p>Then, we can make sure those libraries are installed by running this command from within the <code>python</code> directory:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install -r requirements.txt</span></span></code></pre></div>
<p>As always, once we&rsquo;ve run that command we can verify that the library was installed by looking at the output:</p>
<p><a href="#R-image-06ee0ca6b71d89328d2cd7a70695e3da" class="lightbox-link"><img alt="Install Mypy" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29installmypy.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-06ee0ca6b71d89328d2cd7a70695e3da"><img alt="Install Mypy" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29installmypy.png"></a></p>
<h2 id="running-mypy">Running Mypy</h2>
<p>Once we&rsquo;ve installed Mypy, we can execute it using the following command from within the <code>python</code> directory:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 -m mypy -p src --strict --html-report reports/mypy</span></span></code></pre></div>
<p>As always, let&rsquo;s break this command down into its separate parts:</p>
<ul>
<li><code>python3 -m mypy</code> - we want to run the Mypy library as a Python module</li>
<li><code>-p src</code> - this tells Mypy to execute the code in our <code>src</code> meta package, which will include all source code files inside of that directory.</li>
<li><code>--strict</code> - we want to enable all optional checks that Mypy can perform</li>
<li><code>--html-report reports/mypy</code> - this will create an HTML report in the <code>reports/mypy</code> directory</li>
</ul>
<p>If everything is working correctly, we should get the following output:</p>
<p><a href="#R-image-59c7ecae3d5c721d725e69faa1fcca02" class="lightbox-link"><img alt="Mypy Success" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29mypygood.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-59c7ecae3d5c721d725e69faa1fcca02"><img alt="Mypy Success" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29mypygood.png"></a></p>
<p>We may notice a new <code>.mypy_cache</code> folder, which can be safely ignored just like the <code>.pytest_cache</code> folder next to it. We can also find an HTML report in <code>reports/mypy/index.html</code>:</p>
<p><a href="#R-image-0d83429710fd2c06e995c3e4559b6870" class="lightbox-link"><img alt="Mypy Report" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29mypyreport.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0d83429710fd2c06e995c3e4559b6870"><img alt="Mypy Report" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29mypyreport.png"></a></p>
<p>To open that file, simply <strong>right-click</strong> on it and select <strong>Preview Static</strong>. When we do that, we should get a report that looks like this:</p>
<p><a href="#R-image-d8bc1d3ee1dc92208aaebcdf2bc4930b" class="lightbox-link"><img alt="Mypy HTML" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29mypyhtml.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d8bc1d3ee1dc92208aaebcdf2bc4930b"><img alt="Mypy HTML" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29mypyhtml.png"></a></p>
<p>As we can see, Mypy shows that we&rsquo;ve properly type hinted all of the code! That&rsquo;s great!</p>
<h2 id="integrating-with-tox">Integrating with Tox</h2>
<p>We can also integrate Mypy with tox by simply adding the command above to the <code>tox.ini</code> file in the commands section, which should now look like this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#a6e22e">commands</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">python3 -m mypy -p src --strict --html-report reports/mypy
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           python3 -m coverage run --source src -m pytest --html=reports/pytest/index.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           python3 -m coverage html -d reports/coverage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           python3 -m flake8 --docstring-convention google --format=html --htmldir=reports/flake
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           python3 -m pdoc --html --force --output-dir reports/doc .</span></span></span></code></pre></div>
<p>Notice that the Mypy command is now first in the list of commands. This mimics what most other programming languages would do - the code must pass the type checker in the compiler before the unit tests can be executed. So, we&rsquo;ll do the same with our Python code here.</p>
<p>Once we&rsquo;ve updated <code>tox.ini</code>, we can rerun tox using this command:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>tox -r</span></span></code></pre></div>
<p>That should now run all of our test commands at once!</p>
<h2 id="type-checking-unit-tests">Type Checking Unit Tests</h2>
<p>Now, let&rsquo;s briefly review how to type check our unit tests. This is a <strong>much</strong> more difficult task, since our unit tests build upon several external libraries. Thankfully, the Mypy library includes a way for us to explore the types that it is able to infer.</p>
<p>So, in our <code>test_HelloWorld.py</code> file, let&rsquo;s add the line <code>reveal_locals()</code> to the bottom of one of our test methods. We&rsquo;ll also need to annotate the function&rsquo;s return type so that Mypy will analyze it, so we&rsquo;ll set it to <code>None</code> as we did above. As before, the docstrings have been omitted from this code:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestHelloWorld</span>():
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>        captured <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> captured<span style="color:#f92672">.</span>out <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;Unexpected Output&#34;</span>
</span></span><span style="display:flex;"><span>        reveal_locals()</span></span></code></pre></div>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Mypy Expressions
  </summary>
  <div class="box-content">
<p>The line <code>reveal_locals()</code> is a handy expression for adding type checking to our Python code. However, the Python interpreter itself won&rsquo;t recognize that line as valid Python code, so we&rsquo;ll have to remove it before we can actually execute our tests again. We&rsquo;re just using it temporarily to help us determine the types that Mypy finds for the variables in our code</p>
  </div>
</details>
<p>Now, let&rsquo;s analyze the code in our <code>test</code> folder using Mypy:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 -m mypy --strict test</span></span></code></pre></div>
<p>Notice that we are just giving it the name of the directory <code>test</code> instead of loading it as a Python meta package. This is because we didn&rsquo;t include an <code>__init__.py</code> file inside of the <code>test</code> directory itself. Don&rsquo;t worry - Mypy is able to handle it just fine! When we run that command, we&rsquo;ll see output like this:</p>
<p><a href="#R-image-02d68c17aab5a1b3943b277f7d30d87b" class="lightbox-link"><img alt="Local Variable Types" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29locals.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-02d68c17aab5a1b3943b277f7d30d87b"><img alt="Local Variable Types" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29locals.png"></a></p>
<p>In that output, we&rsquo;ll see that the Mypy library was not able to determine the type of the <code>capsys</code> and <code>captured</code> variables. Instead, it just reports that they could be <code>Any</code> type, which is a special type annotation that matches any possible type. This is due to the fact that we didn&rsquo;t actually have to import the <code>pytest</code> library to use those variables. This is a powerful feature of Python, but it makes it more difficult to perform proper type checking. It will also complain that we now have method arguments that are missing annotations, so let&rsquo;s see if we can resolve that.</p>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Read the Source, Luke
  </summary>
  <div class="box-content">
<p>Unfortunately, figuring out the rest of this required lots of poking around the <a href="https://github.com/pytest-dev/pytest/blob/master/src/_pytest/capture.py" rel="external" target="_blank">pytest source code</a>, specifically in the file for capturing system output. Static type checking in Python is simply more difficult than in other languages because of the way it handles dynamic typing and library imports at runtime.</p>
<p>We&rsquo;ll go ahead and explore what it takes to properly add type hinting to unit tests here, but you <strong>will not</strong> be required to be this thorough in your own unit tests in this course. That is simply asking too much!</p>
  </div>
</details>
<p>So, let&rsquo;s import those libraries by adding them to the top of the file. We&rsquo;ll start by importing the <code>CaptureFixture</code> class from <code>pytest</code>, as well as the <code>AnyStr</code> type from the <code>typing</code> library. Then, we can annotate the <code>capsys</code> parameter with the appropriate type, which is <code>CaptureFixture[Any]</code>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pytest <span style="color:#f92672">import</span> CaptureFixture
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestHelloWorld</span>():
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys: CaptureFixture[Any]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>        captured <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> captured<span style="color:#f92672">.</span>out <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;Unexpected Output&#34;</span>
</span></span><span style="display:flex;"><span>        reveal_locals()</span></span></code></pre></div>
<p>Once that is in place, we can rerun our Mypy check and should get the following output:</p>
<p><a href="#R-image-676b26ca064e0d2c564aedd4e54d0893" class="lightbox-link"><img alt="Mypy Fixtures" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29fixture.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-676b26ca064e0d2c564aedd4e54d0893"><img alt="Mypy Fixtures" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29fixture.png"></a></p>
<p>That&rsquo;s closer! Now Mypy is finding the correct types for <code>capsys</code> and was able to use the information in the <code>pytest</code> library to infer the type of the <code>captured</code> variable, which is returned from the <code>capsys.readouterr()</code> function call. So, let&rsquo;s annotate that variable as well. To do that, we&rsquo;ll need to import the <code>CaptureResult</code> class from the <code>_pytest.capture</code> library. As you might guess by the underscore at the beginning of the library name, we are importing a class that is meant to be internal to pytest. This is generally considered bad practice, but it helps for type checking, so we&rsquo;ll do it for now. Our updated code looks like this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pytest <span style="color:#f92672">import</span> CaptureFixture
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> _pytest.capture <span style="color:#f92672">import</span> CaptureResult
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> Any
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> src.hello.HelloWorld <span style="color:#f92672">import</span> HelloWorld
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestHelloWorld</span>():
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_hello_world</span>(self, capsys: CaptureFixture[Any]) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        HelloWorld<span style="color:#f92672">.</span>main([<span style="color:#e6db74">&#34;HelloWorld&#34;</span>])
</span></span><span style="display:flex;"><span>        captured: CaptureResult[Any] <span style="color:#f92672">=</span> capsys<span style="color:#f92672">.</span>readouterr()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">assert</span> captured<span style="color:#f92672">.</span>out <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hello World</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;Unexpected Output&#34;</span>
</span></span><span style="display:flex;"><span>        reveal_locals()</span></span></code></pre></div>
<p>Notice that we can easily add a type hint to a variable in the same way we added type hints to method parameters - we just place a colon <code>:</code> after the variable name and then add the type. Now, when we run the Mypy command, we should get the same output, which confirms that we have the correct type hints:</p>
<p><a href="#R-image-7241fa007b36a84217fe2479c51c0a29" class="lightbox-link"><img alt="Mypy Result" class="border lazy lightbox figure-image" loading="lazy" src="/cc410/images/e1/29result.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7241fa007b36a84217fe2479c51c0a29"><img alt="Mypy Result" class="border lazy lightbox lightbox-image" loading="lazy" src="/cc410/images/e1/29result.png"></a></p>
<p>Once we&rsquo;ve done that, we can remove the <code>reveal_locals()</code> line to make sure the tests will still execute.</p>
<p>Feel free to add the appropriate type hints to your unit tests if you&rsquo;d like. However you <strong>are not required</strong> to include type hints in your unit tests, due to the complexity that we encountered here.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cc410/js/clipboard/clipboard.min.js?1758639063" defer></script>
    <script src="/cc410/js/perfect-scrollbar/perfect-scrollbar.min.js?1758639063" defer></script>
    <script src="/cc410/js/theme.min.js?1758639063" defer></script>
  <script src="/cc410/js/embed-iframe.min.js?1758639063" defer></script>
  </body>
</html>
