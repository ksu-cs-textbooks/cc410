<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Building a JAR file using Gradle is super simple - it handles almost all of the heavy lifting for us. The basic steps are outlined in the Building Java Libraries Simple guide in the Gradle documentation. Below, we’ll go through the steps we’ll need to follow for most of the applications we’ve created in this course.
Run the Build Task If we haven’t already, we should first run the Gradle build task."><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building Java JAR File :: CC 410 Textbook"><meta name=twitter:description content="Building a JAR file using Gradle is super simple - it handles almost all of the heavy lifting for us. The basic steps are outlined in the Building Java Libraries Simple guide in the Gradle documentation. Below, we’ll go through the steps we’ll need to follow for most of the applications we’ve created in this course.
Run the Build Task If we haven’t already, we should first run the Gradle build task."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/ii-gui/15-releases/06-building-jar-file/"><meta property="og:site_name" content="CC 410 Textbook"><meta property="og:title" content="Building Java JAR File :: CC 410 Textbook"><meta property="og:description" content="Building a JAR file using Gradle is super simple - it handles almost all of the heavy lifting for us. The basic steps are outlined in the Building Java Libraries Simple guide in the Gradle documentation. Below, we’ll go through the steps we’ll need to follow for most of the applications we’ve created in this course.
Run the Build Task If we haven’t already, we should first run the Gradle build task."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="GUI"><meta property="article:modified_time" content="2022-07-08T13:34:06-05:00"><meta itemprop=name content="Building Java JAR File :: CC 410 Textbook"><meta itemprop=description content="Building a JAR file using Gradle is super simple - it handles almost all of the heavy lifting for us. The basic steps are outlined in the Building Java Libraries Simple guide in the Gradle documentation. Below, we’ll go through the steps we’ll need to follow for most of the applications we’ve created in this course.
Run the Build Task If we haven’t already, we should first run the Gradle build task."><meta itemprop=dateModified content="2022-07-08T13:34:06-05:00"><meta itemprop=wordCount content="1616"><title>Building Java JAR File :: CC 410 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cc410/ii-gui/15-releases/06-building-jar-file/ rel=canonical type=text/html title="Building Java JAR File :: CC 410 Textbook"><link href=/cc410/ii-gui/15-releases/06-building-jar-file/index.xml rel=alternate type=application/rss+xml title="Building Java JAR File :: CC 410 Textbook"><link href=/cc410/ii-gui/15-releases/06-building-jar-file/tele.html rel=alternate type=text/html title="Building Java JAR File :: CC 410 Textbook"><link href=/cc410/ii-gui/15-releases/06-building-jar-file/embed.html rel=alternate type=text/html title="Building Java JAR File :: CC 410 Textbook"><link href=/cc410/images/favicon.ico?1719507172 rel=icon type=image/x-icon sizes=any><link href=/cc410/css/fontawesome-all.min.css?1719507287 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fontawesome-all.min.css?1719507287 rel=stylesheet></noscript><link href=/cc410/css/nucleus.css?1719507287 rel=stylesheet><link href=/cc410/css/auto-complete.css?1719507287 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/auto-complete.css?1719507287 rel=stylesheet></noscript><link href=/cc410/css/perfect-scrollbar.min.css?1719507287 rel=stylesheet><link href=/cc410/css/fonts.css?1719507287 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fonts.css?1719507287 rel=stylesheet></noscript><link href=/cc410/css/theme.css?1719507287 rel=stylesheet><link href=/cc410/css/theme-auto.css?1719507287 rel=stylesheet id=R-variant-style><link href=/cc410/css/chroma-auto.css?1719507287 rel=stylesheet id=R-variant-chroma-style><link href=/cc410/css/variant.css?1719507287 rel=stylesheet><link href=/cc410/css/print.css?1719507287 rel=stylesheet media=print><link href=/cc410/css/format-print.css?1719507287 rel=stylesheet><script src=/cc410/js/variant.js?1719507287></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cc410",window.index_js_url="/cc410/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cc410/css/custom.css?1719507287 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cc410/ii-gui/15-releases/06-building-jar-file/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cc410/ii-gui/><span itemprop=name>GUI</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cc410/ii-gui/15-releases/><span itemprop=name>Creating a Release</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Building Java JAR File</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cc410/ii-gui/15-releases/05-github-pages/ title="GitHub Pages (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cc410/ii-gui/15-releases/07-building-wheel/ title="Building Python Wheel (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=building-java-jar-file>Building Java JAR File</h1><p>Building a JAR file using Gradle is super simple - it handles almost all of the heavy lifting for us. The basic steps are outlined in the <a href=https://docs.gradle.org/current/samples/sample_building_java_libraries.html rel=external target=_blank>Building Java Libraries Simple</a> guide in the Gradle documentation. Below, we&rsquo;ll go through the steps we&rsquo;ll need to follow for most of the applications we&rsquo;ve created in this course.</p><h2 id=run-the-build-task>Run the Build Task</h2><p>If we haven&rsquo;t already, we should first run the Gradle <code>build</code> task. This will automatically create a JAR file for our project, as well as any other required files.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Change directory to the project directory (this may be different)</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> java
</span></span><span class=line><span class=cl>gradle build</span></span></code></pre></div><p>Once we&rsquo;ve done that, we can find our <code>app.jar</code> JAR file in the <code>app/build/libs</code> directory. That&rsquo;s really all there is to it, but there are a few more things we can add to make it even better.</p><h2 id=create-readmemd>Create README.md</h2><p>If we haven&rsquo;t already done this, now is a great time to create a <code>README.md</code> file in the root directory of our project and include some basic information about our project. Once it is published, we can come back to this file and update it with links to the documentation hosted in GitHub pages.</p><h2 id=create-a-license-file>Create a LICENSE file</h2><p>In addition, we may wish to add a license to our project at this step, before packaging it. We can use the <a href=https://choosealicense.com/ rel=external target=_blank>choosealicense.com</a> website to help find a license. We can also easily add a license to an existing GitHub repository following the <a href=https://docs.github.com/en/github/building-a-strong-community/adding-a-license-to-a-repository rel=external target=_blank>Adding a license to a repository</a> guide from GitHub, then using the <code>git pull</code> command to pull that license file into our local copy of the project.</p><p>In either case, make sure we have a file in the root of our project named <code>LICENSE</code> before continuing.</p><h2 id=adding-metadata>Adding Metadata</h2><p>One major thing we may wish to do in our projects is add some metadata to the project. We can do that by adding various entries to our <code>build.gradle</code> file.</p><h3 id=version>Version</h3><p>In our <code>build.gradle</code> file, we can define the version of our application by simply adding the following line outside of any other section in that file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>version</span> <span class=o>=</span> <span class=s1>&#39;v0.1.0&#39;</span></span></span></code></pre></div><p>When we set the version, we should see the version number appended to the end of our JAR file. If we are following <a href=https://semver.org/ rel=external target=_blank>Semantic Versioning</a> in our project, we&rsquo;ll need to remember to update this version number in our <code>build.gradle</code> file each time we are ready to create a package for release.</p><h3 id=project-name>Project Name</h3><p>We may also wish to set the overall project name. For Gradle, this is in the <code>settings.gradle</code> file, which can be found at the top level of our project. In that document, we should see a setting named <code>rootProject.name</code>, which we can update with our project&rsquo;s name. For a single project application like the ones we&rsquo;ve been building, we can set the name of that project as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>rootProject</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=s1>&#39;ourprojectname&#39;</span>
</span></span><span class=line><span class=cl><span class=n>include</span><span class=o>(</span><span class=s1>&#39;app&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=n>project</span><span class=o>(</span><span class=s2>&#34;:app&#34;</span><span class=o>).</span><span class=na>name</span> <span class=o>=</span> <span class=s1>&#39;ourprojectname&#39;</span></span></span></code></pre></div><p>We can also achieve a similar result by simply renaming the <code>app</code> directory in our project to match the name we&rsquo;d like to use. Either method works well.</p><h3 id=add-name-and-version-to-manifest>Add Name and Version to Manifest</h3><p>Once we&rsquo;ve set the project name and version in our various Gradle files, we can configure Gradle to include that information in our JAR file. We also need to add the name of the main class to this information if we want our JAR file to be directly executable. To do this, we simply add the following section to our <code>build.gradle</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;jar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Main-Class&#39;</span><span class=o>:</span> <span class=s1>&#39;ourprojectname.Main&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>We should replace <code>ourprojectname.Main</code> with the correct name and path to our main class. If we&rsquo;ve been using Gradle to run our project, it is probably already in the <code>mainClass</code> attribute of the <code>application</code> section of the file.</p><p>Notice that we also can add an <code>archivesBaseName</code> setting here to change the base filename of our project&rsquo;s JAR file to match our project name. With all of this in place, we should now be able to run the <code>gradle build</code> command and find a JAR file named <code>ourprojectname-v0.1.0.jar</code> in the <code>app/build/libs</code> directory.</p><p>We can also check that our <code>MANIFEST</code> file contains the correct information by extracting it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jar xf lib/build/libs/ourprojectname-v0.1.0.jar META-INF/MANIFEST.MF</span></span></code></pre></div><p>Then, we can open the file named <code>MANIFEST.MF</code> can is found in the <code>META-INF</code> directory and confirm that everything is correct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>Manifest-Version: 1.0
</span></span><span class=line><span class=cl>Implementation-Title: ourprojectname
</span></span><span class=line><span class=cl>Implementation-Version: v0.1.0</span></span></code></pre></div><p>Once we&rsquo;ve verified that our manifest is correct, we can delete the <code>META-INF</code> directory so it isn&rsquo;t included in our project.</p><h2 id=create-a-source-and-javadoc-jar>Create a Source and Javadoc JAR</h2><p>Sometimes, we may want to publish our original source code in a JAR file. That allows developers to easily download and modify our source code, or they can just explore it and see how it works.</p><p>Likewise, in addition to posting our generated Javadoc on the Internet using GitHub Pages, we can also create a JAR file that contains our Javadoc documentation. This JAR file can be imported into many Java IDEs, such as Eclipse, NetBeans, and IntelliJ to allow the IDE to automatically show relevant portions of our documentation to developers as they use our library. To do this, we just need to add the following section to our <code>build.gradle</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>java</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>withSourcesJar</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=n>withJavadocJar</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>We&rsquo;ll also need to add sections to configure those JAR files. These are exactly the same as the one created above, but with different task names:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;sourcesJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;javadocJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Now, when we execute our <code>gradle build</code> command, we should see <code>ourprojectname-v0.1.0.jar</code> as well as both <code>ourprojectname-v0.1.0-sources.jar</code> and <code>ourprojectname-v0.1.0-javadoc.jar</code>. So, when we publish our package, we can also publish these JAR files as well.</p><h2 id=automate-creation-of-docs-and-dist-artifacts>Automate Creation of Docs and Dist Artifacts</h2><p>There are a few other changes we can make to our project to make everything quick and easy to assemble. Let&rsquo;s review them now:</p><h3 id=customize-javadoc>Customize Javadoc</h3><p>Originally, we configured our project to include the Javadoc from our test files in the Javadoc for our entire project. While that may be useful for us internally as we are developing our code, we may not want to include that in our final Javadoc output. So, we can uncomment those lines in our <code>build.gradle</code> file.</p><p>In addition, as we saw on a previous page, we can move our Javadoc output to a folder named <code>docs</code> in our root project folder, and then GitHub Pages can automatically publish that documentation along with our project. Thankfully, we can configure our <code>build.gradle</code> file to automatically output the Javadoc files directly to that folder.</p><p>With those updates in place, the <code>javadoc</code> section of our <code>build.gradle</code> file may look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>javadoc</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// classpath += project.sourceSets.test.compileClasspath
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// source += project.sourceSets.test.allJava
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>destinationDir</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/docs/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Now, when we run the <code>gradle build</code> command, we should see our generated Javadoc documentation appear in the <code>docs</code> folder, right where it needs to be.</p><h3 id=create-dist-folder>Create Dist Folder</h3><p>We&rsquo;d also like to make sure our generated JAR files are easy for users to find in our repository. It is a common practice to create a folder named <code>dist</code> in our project directory to contain any distributable packages we create and publish. So, we can easily update our <code>build.gradle</code> file to place any JAR files there. We&rsquo;ll need to do this in all three of the JAR tasks:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;jar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Main-Class&#39;</span><span class=o>:</span> <span class=s1>&#39;ourprojectname.Main&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;sourcesJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;javadocJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>As before, we can test this by running <code>gradle build</code> and seeing that our JAR files are now placed in the <code>dist</code> directory in our project.</p><h2 id=summary>Summary</h2><p>So, in summary, we updated our project configuration in the following ways:</p><ul><li>The <code>settings.gradle</code> file now includes our root project&rsquo;s name and updates the name of our single project:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>rootProject</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=s1>&#39;ourprojectname&#39;</span>
</span></span><span class=line><span class=cl><span class=n>include</span><span class=o>(</span><span class=s1>&#39;app&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=n>project</span><span class=o>(</span><span class=s2>&#34;:app&#34;</span><span class=o>).</span><span class=na>name</span> <span class=o>=</span> <span class=s1>&#39;ourprojectname&#39;</span></span></span></code></pre></div><ul><li>We updated <code>build.gradle</code> to:<ul><li>Set the version number</li><li>Remove test file comments from the Javadoc</li><li>Redirect the Javadoc output to the <code>docs</code> folder</li><li>Create a JAR file for both the source code and Javadoc</li><li>Set the metadata in each JAR file</li><li>Output each JAR file to the <code>dist</code> folder</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>javadoc</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// classpath += project.sourceSets.test.compileClasspath
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// source += project.sourceSets.test.allJava
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>destinationDir</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/docs/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>version</span> <span class=o>=</span> <span class=s1>&#39;v0.1.0&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>java</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>withSourcesJar</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=n>withJavadocJar</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;jar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;sourcesJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>tasks</span><span class=o>.</span><span class=na>named</span><span class=o>(</span><span class=s1>&#39;javadocJar&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attributes</span><span class=o>(</span><span class=s1>&#39;Implementation-Title&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=s1>&#39;Implementation-Version&#39;</span><span class=o>:</span> <span class=n>project</span><span class=o>.</span><span class=na>version</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>archivesBaseName</span> <span class=o>=</span> <span class=n>project</span><span class=o>.</span><span class=na>name</span>
</span></span><span class=line><span class=cl>    <span class=n>destinationDirectory</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${rootDir}/dist/&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Finally, we can run <code>gradle build</code> one more time, and then commit our changes to our repository.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Carefully Check Commit</div><div class=box-content><p>In this commit, we&rsquo;ll want to carefully check the output of the <code>git status</code> command to make sure we are only committing the files we want to the repository. Ideally, the only changes should be to the <code>build.gradle</code> and <code>settings.gradle</code> files, as well as all the contents of the new <code>dist</code> and <code>docs</code> directories.</p></div></div><h2 id=making-a-new-version>Making a New Version</h2><p>Now, with all of this automation in place, all we have to do to create a new version of our package is update the version number in our <code>build.gradle</code> file, and then run <code>gradle build</code>. It will automatically create a new set of JAR files using the new version, and update our documentation to match.</p><p>On the following pages, we&rsquo;ll discuss the steps for creating a release on GitHub that includes these JAR files for download, and also how to publish these to a repository!</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cc410/commit/03ba252e18ed587e51ea2500ba8f3e984dbfd525>Jul 8, 2022</a></p></div></div><script src=/cc410/js/clipboard.min.js?1719507287 defer></script><script src=/cc410/js/perfect-scrollbar.min.js?1719507287 defer></script><script src=/cc410/js/theme.js?1719507287 defer></script></body></html>