<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Responding to events within our GUIs!"><meta name=author content="Russell Feldhausen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Event-Driven Programming :: CC 410 Textbook"><meta name=twitter:description content="Responding to events within our GUIs!"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cc410/ii-gui/13-event-driven-programming/"><meta property="og:site_name" content="CC 410 Textbook"><meta property="og:title" content="Event-Driven Programming :: CC 410 Textbook"><meta property="og:description" content="Responding to events within our GUIs!"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Event-Driven Programming :: CC 410 Textbook"><meta itemprop=description content="Responding to events within our GUIs!"><meta itemprop=datePublished content="2021-08-17T00:00:00+00:00"><meta itemprop=dateModified content="2023-08-10T16:05:23-05:00"><meta itemprop=wordCount content="6"><title>Event-Driven Programming :: CC 410 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cc410/ii-gui/13-event-driven-programming/ rel=canonical type=text/html title="Event-Driven Programming :: CC 410 Textbook"><link href=/cc410/ii-gui/13-event-driven-programming/index.xml rel=alternate type=application/rss+xml title="Event-Driven Programming :: CC 410 Textbook"><link href=/cc410/ii-gui/13-event-driven-programming/tele.html rel=alternate type=text/html title="Event-Driven Programming :: CC 410 Textbook"><link href=/cc410/ii-gui/13-event-driven-programming/embed.html rel=alternate type=text/html title="Event-Driven Programming :: CC 410 Textbook"><link href=/cc410/images/favicon.ico?1719505513 rel=icon type=image/x-icon sizes=any><link href=/cc410/css/fontawesome-all.min.css?1719505628 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fontawesome-all.min.css?1719505628 rel=stylesheet></noscript><link href=/cc410/css/nucleus.css?1719505628 rel=stylesheet><link href=/cc410/css/auto-complete.css?1719505628 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/auto-complete.css?1719505628 rel=stylesheet></noscript><link href=/cc410/css/perfect-scrollbar.min.css?1719505628 rel=stylesheet><link href=/cc410/css/fonts.css?1719505628 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cc410/css/fonts.css?1719505628 rel=stylesheet></noscript><link href=/cc410/css/theme.css?1719505628 rel=stylesheet><link href=/cc410/css/theme-auto.css?1719505628 rel=stylesheet id=R-variant-style><link href=/cc410/css/chroma-auto.css?1719505628 rel=stylesheet id=R-variant-chroma-style><link href=/cc410/css/variant.css?1719505628 rel=stylesheet><link href=/cc410/css/print.css?1719505628 rel=stylesheet media=print><link href=/cc410/css/format-print.css?1719505628 rel=stylesheet><script src=/cc410/js/variant.js?1719505628></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cc410",window.index_js_url="/cc410/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cc410/css/custom.css?1719505628 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cc410/ii-gui/13-event-driven-programming/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cc410/ii-gui/><span itemprop=name>GUI</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Event-Driven Programming</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cc410/ii-gui/12-parallelism/11-summary/ title="Summary (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cc410/ii-gui/13-event-driven-programming/01-introduction/ title="Introduction (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 13</div><h1 id=event-driven-programming>Event-Driven Programming</h1><p>Responding to events within our GUIs!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Event-Driven Programming</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><p>So far, we&rsquo;ve learned to create a GUI and switch between panels in the GUI, but we&rsquo;ve not really looked at how to make our GUI buttons responsive and perform the actions we want when the user clicks on them. In this chapter, we&rsquo;ll dive into <a href=https://en.wikipedia.org/wiki/Event-driven_programming rel=external target=_blank><strong>event-driven programming</strong></a>, which is the programming paradigm we use to construct applications that use GUIs and event handlers.</p><p>We&rsquo;ll see how we can build our application to include multiple threads, making our application appear responsive to the user even if the application is performing calculations in another thread. This will build on the <strong>parallelism</strong> we learned in a prior chapter.</p><p>Some key terms we&rsquo;ll cover in this chapter:</p><ul><li>GUI Event</li><li>Event Handler / Callback / Listener</li><li>Event Loop</li><li>Binding Events</li><li>GUI Focus</li></ul><p>After this chapter, we&rsquo;ll be able to update our applications to respond to user button clicks and other events.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=gui-threads>GUI Threads</h1><p>Up to this point, we&rsquo;ve only created applications that use a single thread. However, now that we are writing applications that include a GUI, we must start to build applications that use multiple threads to manage its work. Otherwise, if the application is busy working on a particular task while the user clicks a button in the GUI, the GUI won&rsquo;t respond to the user until our task is complete.</p><p>To resolve this, we typically build our GUI applications in a way that the GUI runs in a separate thread from the rest of our application. In that way, the GUI is always responsive to the user, and our application can continue to do whatever it needs in additional threads. Those threads won&rsquo;t impact the responsiveness of our GUI, at least if they are constructed properly.</p><h2 id=event-driven-programming>Event-Driven Programming</h2><p><a href=#R-image-9639e69d3424800b7ca6555c3473f9ed class=lightbox-link><img alt="Event Loop" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cc410/images/11/event_loop.jpg style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9639e69d3424800b7ca6555c3473f9ed><img alt="Event Loop" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cc410/images/11/event_loop.jpg></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>This leads to a new programming paradigm called <a href=https://en.wikipedia.org/wiki/Event-driven_programming rel=external target=_blank><strong>event-driven programming</strong></a>. Event-driven programming can be thought of as an alternative to <a href=https://en.wikipedia.org/wiki/Imperative_programming rel=external target=_blank>imperative programming</a>, though in practice both paradigms are used within the same program. In imperative programming, the program follows a set sequence of steps to perform an action, directly as defined in the program&rsquo;s source code. In event-driven programming, the steps a program takes are determined by an external factor that generates <strong>events</strong> within the system. The program will receive those events, and then use the event received to decide what steps, if any, to perform. Of course, the process of waiting for events, receiving them, and acting upon them, is usually all done through imperative code.</p><p>Consider the diagram above. In it, a user interacts with a button in an application, which is an event. That event triggers some piece of code, which is typically called an <strong>event handler</strong>, to react to that event. The event handler examines the event, and performs the requested action.</p><p>Behind the scenes, there is another piece of code, called the <strong>event loop</strong>, that is actually watching for these events and calling the appropriate event handlers for us.</p><p>On the next few pages, we&rsquo;ll dive into each of these steps in building a responsive GUI using event-driven programming.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href="https://commons.wikimedia.org/w/index.php?title=File:Event_driven_programming_Simply_Explained.jpg&oldid=462525602" rel=external target=_blank>https://commons.wikimedia.org/w/index.php?title=File:Event_driven_programming_Simply_Explained.jpg&oldid=462525602</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=binding-events>Binding Events</h1><a href="https://www.youtube.com/watch?v=ze031YvdTr8">YouTube Video</a><p><a href=/cc410/ii-gui/13-event-driven-programming/03-binding-events/video/>Video Materials</a></p><p>The first step in building a program using event-driven programming is actually creating the events that you&rsquo;d like to respond to. For a GUI-based program, this is actually handled by the GUI framework itself. It includes a large number of events that are already available for us to use. Instead, we have to <strong>bind</strong> those events to special functions, called <strong>event handlers</strong>, within our code. Then, when those events occur, the GUI framework will call the <strong>event handler</strong> associated with that event.</p><h2 id=gui-events>GUI Events</h2><p>Most GUI frameworks include a large number of events that we can bind our event handlers to. There are some obvious ones, such as the <strong>clicked</strong> event for a button, or the <strong>value changed</strong> event for checkboxes, but there are actually many events that are generated by our GUI that we might not have thought of. Here are just a few events we can typically find in our GUI framework:</p><ul><li><strong>Mouse Moved</strong> - happens whenever the cursor is moved across our window. We can typically find the <code>x</code> and <code>y</code> coordinates of the cursor at any time through this event.</li><li><strong>Key Pressed</strong> - happens whenever a key is depressed on the keyboard. This could also include the buttons on the mouse, though many times they are listed as separate events.</li><li><strong>Key Released</strong> - happens whenever a key is released on the keyboard. By tracking both when keys are pressed and released, we can react differently if they user presses and holds a button like one would when playing a game, vs. individual presses used to type text in a text entry field.</li><li><strong>Text Changed</strong> - happens anytime the text in a text entry field is edited</li><li><strong>Get Focus / Enter</strong> - happens when the user selects a particular element in the GUI. That element is said to be in <strong>focus</strong> at that point. This is usually helpful when working with forms that have multiple text entry elements.</li><li><strong>Lose Focus / Leave</strong> - happens when the user&rsquo;s selection moves to a different element in the GUI. The element left is said to have <strong>lost focus</strong> at that point.</li><li><strong>Resize</strong> - happens whenever the window or an individual GUI element is resized. Many times this event is handled by our layout manager, but we can also bind our own functions to it as well.</li></ul><p>Each GUI framework can handle many different events. You can find a list of some of them at the following resources:</p><ul><li><a href=https://docs.oracle.com/javase/8/docs/api/javax/swing/event/package-summary.html rel=external target=_blank>java.swing.event</a> Package</li><li><a href=https://tkdocs.com/tutorial/concepts.html#events rel=external target=_blank>Event Handling</a> from Tkdocs</li></ul><h2 id=binding-to-events>Binding to Events</h2><p>Both Java Swing and Python tkinter include simple ways to bind an event to a function. In fact, we&rsquo;ve already seen a bit of how to do that in a previous example - we created a few buttons that called a function when clicked! That is a great example of binding the <strong>clicked</strong> event to a function in our code.</p><p>Here&rsquo;s a more general example in both Java and Python, this time binding the <strong>mouse moved</strong> event:</p><div class=tab-panel data-tab-group=b50a4ef98f2f5fc3a1d15b1493e2ca3b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=java class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b50a4ef98f2f5fc3a1d15b1493e2ca3b","java")'>
<span class=tab-nav-text>Java</span>
</button>
<button data-tab-item=python class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("b50a4ef98f2f5fc3a1d15b1493e2ca3b","python")'>
<span class=tab-nav-text>Python</span></button></div><div class=tab-content-container><div data-tab-item=java class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><p><em>Excerpted in part from <a href=https://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html rel=external target=_blank>How to Write a Mouse-Motion Listener</a> from Oracle.</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.awt.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.awt.event.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>javax.swing.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MouseDemo</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>JFrame</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>MouseMotionListener</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>MouseDemo</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>setMinimumSize</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Dimension</span><span class=p>(</span><span class=n>800</span><span class=p>,</span><span class=w> </span><span class=n>600</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ------------------------------</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// This is the **bind** action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>addMouseMotionListener</span><span class=p>(</span><span class=k>this</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ------------------------------</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ----------------------------------------------</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// These functions are the **event handlers**</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// This is when the mouse is moved but not clicked</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>mouseMoved</span><span class=p>(</span><span class=n>MouseEvent</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>output</span><span class=p>(</span><span class=s>&#34;Mouse Moved&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// This is when the mouse is moved while being clicked</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>mouseDragged</span><span class=p>(</span><span class=n>MouseEvent</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// this.output(&#34;Mouse Dragged&#34;, e);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ----------------------------------------------</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>output</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>event</span><span class=p>,</span><span class=w> </span><span class=n>MouseEvent</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>event</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; : &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=na>getX</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;,&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=na>getY</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SwingUtilities</span><span class=p>.</span><span class=na>invokeLater</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Runnable</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>MouseDemo</span><span class=p>().</span><span class=na>setVisible</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>});</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></div></div><div data-tab-item=python class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>tkinter</span> <span class=k>as</span> <span class=nn>tk</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MouseDemo</span><span class=p>(</span><span class=n>tk</span><span class=o>.</span><span class=n>Tk</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Initializer for GUI.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>tk</span><span class=o>.</span><span class=n>Tk</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>minsize</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=mi>800</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=mi>600</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># --------------------------------</span>
</span></span><span class=line><span class=cl>        <span class=c1># This is the **bind** action</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=s1>&#39;&lt;Motion&gt;&#39;</span><span class=p>,</span> <span class=n>motion</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># --------------------------------</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>action_performed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Event handler for GUI events.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Mouse Moved : </span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=n>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Main method.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>MouseDemo</span><span class=p>()</span><span class=o>.</span><span class=n>mainloop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Main Guard</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>MouseDemo</span><span class=o>.</span><span class=n>main</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span></span></span></code></pre></div></div></div></div></div><p>In both of these examples, we see how to bind an event to a function. In Java Swing, we need to add a specific type of &ldquo;listener&rdquo; to the object, which is an event handler in Java Swing terminology. We then implement the associated interface, which defines the function(s) we must include to react to those events. In this case, we implement the <code>MouseMotionListener</code> interface.</p><p>In Python tkinter, we literally use a method called <code>bind</code> along with the name of the event we&rsquo;d like to bind and the function we&rsquo;d like to call. This is much more straightforward, but we don&rsquo;t have the benefit of a compiler and type checker making sure that our events are bound correctly, nor that we&rsquo;ll get the correct data out of them. So, we have to be a bit more careful as well.</p><p>On the next page, we&rsquo;ll go a bit deeper into <strong>event handlers</strong>, the functions that are called when the events occur.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Binding Events</h1></section><article class=default><header class=headline></header><h1 id=event-handlers>Event Handlers</h1><p>At its core, an <strong>event handler</strong> is simply a piece of code that is called when a particular event happens within the GUI. The function typically receives additional information about the event, such as the source of the event and any relevant details. In some languages, we also refer to event handlers as <strong>callbacks</strong>.</p><h2 id=java-listeners>Java Listeners</h2><p>In Java, most events are handled by special interfaces called &ldquo;listeners&rdquo; that we can implement within our code. When we bind to an event in Java Swing, we specify an object that is instantiated from a class that implements the appropriate listener for that event. Then, when the event happens, behind the scenes Java will find the associated object and call the correct method defined as part of the interface. Here&rsquo;s the example from the previous page:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ----------------------------------------------</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// These functions are the **event handlers**</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// This is when the mouse is moved but not clicked</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>mouseMoved</span><span class=p>(</span><span class=n>MouseEvent</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=na>output</span><span class=p>(</span><span class=s>&#34;Mouse Moved&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// This is when the mouse is moved while being clicked</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>mouseDragged</span><span class=p>(</span><span class=n>MouseEvent</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// this.output(&#34;Mouse Dragged&#34;, e);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=o>----------------------------------------------</span></span></span></code></pre></div><p>These two methods are defined in the <a href=https://docs.oracle.com/javase/8/docs/api/java/awt/event/MouseMotionListener.html rel=external target=_blank>MouseMotionListener</a> interface. When the event happens, it sends along an instance of the <a href=https://docs.oracle.com/javase/8/docs/api/java/awt/event/MouseEvent.html rel=external target=_blank>MouseEvent</a> class that contains the information about the event, such as the location of the mouse and any buttons that are pressed.</p><h2 id=python-callbacks>Python Callbacks</h2><p>In Python, events are typically sent directly to a function that is sometimes referred to as a &ldquo;callback&rdquo; function. So, when we bind to an event in Python tkinter, we simply specify the function that&rsquo;d like to be called when the event happens. If we want to capture some additional data along with the function, we can do that using a lambda expression, which we saw in the earlier GUI example project.</p><p>Here&rsquo;s the example callback function from the previous page:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>action_performed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Event handler for GUI events.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Mouse Moved : </span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=n>y</span><span class=p>))</span></span></span></code></pre></div><p>When the <code>'&lt;Motion>'</code> event occurs, Python will call this function and pass along a second parameter, which we&rsquo;ve named <code>event</code> in this example. The <code>event</code> object contains the <code>x</code> and <code>y</code> coordinates of the mouse, but may also contain different information based on the event that was generated. Unfortunately, there isn&rsquo;t a good source of documentation for all of these events and what information they contain, so you may have to do a bit of digging to figure out what you can expect from each type of event.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=event-loop>Event Loop</h1><a href="https://www.youtube.com/watch?v=jUodljf8V30">YouTube Video</a><p><a href=/cc410/ii-gui/13-event-driven-programming/05-event-loop/video/>Video Materials</a></p><p>Most GUI frameworks, such as Java Swing and tkinter, handle user interactions through the use of a <strong>loop</strong>, which runs within the GUI thread and listens for events generated by the user.</p><p><a href=#R-image-bb8be52b99c3d1eb6568646587db2093 class=lightbox-link><img alt="Event Loop" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cc410/images/11/eventloop.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bb8be52b99c3d1eb6568646587db2093><img alt="Event Loop" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cc410/images/11/eventloop.png></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>When an event is generated by the user, it is first placed in an <strong>event queue</strong>, which is a queue-based data structure used to keep track of events generated by the user. The events are placed there by a thread in the program, usually part of the GUI framework, that is connected and &ldquo;listening&rdquo; for events from the operating system. We use a queue to keep track of events, just in case the user generates events more quickly than our program can handle them.</p><p>Then, in the GUI thread of our program, there is a loop of code that is constantly checking if the event queue contains any elements. We typically refer to this code as the <strong>event loop</strong>. If it does, it will take the first element from the queue and examine it. If that event is <strong>bound</strong> with a known <strong>event handler</strong> somewhere in our code, then the event loop will call the event handler, shown in the diagram above as a &ldquo;callback&rdquo; function.</p><p>Once the event handler has returned, the event loop will take the next event from the queue and act upon it, and it will continue to do so until there are no events left in the queue.</p><p>In some GUI frameworks, the event loop is also responsible for updating the GUI on the screen itself, as shown in the diagram above. So, while the event handlers are executing, the GUI screen itself cannot be updated and the application will appear to &ldquo;freeze.&rdquo;</p><p>So, it is <em>very important</em> for our event handlers to be very short and execute quickly, or else the user might notice that our application is not responsive. If the event requires a large amount of calculation, we may want to create a separate thread to handle that operation. Thankfully, most simple GUI programs will not require this, but it is always something to be aware of in case our application starts running slowly.</p><p>On the next two pages, we&rsquo;ll briefly discuss the event loop for both Java Swing and Python tkinter. As always, you may skip to the language you are learning, but it may be helpful to see how both languages perform a similar task.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://tkdocs.com/tutorial/eventloop.html rel=external target=_blank>https://tkdocs.com/tutorial/eventloop.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Event Loop</h1></section><article class=default><header class=headline></header><h1 id=swing-event-dispatch-thread>Swing Event Dispatch Thread</h1><p>The Java Swing GUI toolkit uses a special thread called the <a href=https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html rel=external target=_blank><strong>Event Dispatch Thread</strong></a> (abbreviated EDT) to handle events. This thread is where most of the code that interacts with a GUI written in Swing actually runs, leaving the main application thread to do other tasks as needed.</p><h2 id=starting-the-thread>Starting the Thread</h2><p>In all of our examples so far, we have observed a unique piece of code in the <code>main()</code> method that is used to actually launch our GUI-based programs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>SwingUtilities</span><span class=p>.</span><span class=na>invokeLater</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Runnable</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>new</span><span class=w> </span><span class=n>MouseDemo</span><span class=p>().</span><span class=na>setVisible</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>});</span></span></span></code></pre></div><p>The <code>SwingUtilities.invokeLater()</code> method is used within the application thread to run code within the EDT. So, when we launch our application, the first thing we do is construct a new anonymous class that implements the <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html rel=external target=_blank>Runnable</a> interface, which defines an object that can be run as a thread. Inside of that class, we place the to code to construct our GUI and make it visible in the <code>run()</code> method.</p><p>In the background, the first time we call <code>SwingUtilities.invokeLater()</code>, Java will see that there is no EDT running and will spawn that thread. Once it is running, then at some time in the future the <code>run()</code> method of our anonymous class will be called, which actually loads the GUI within the EDT.</p><h2 id=handling-events>Handling Events</h2><p>The other important task performed by the EDT is actually responding to events from the operating system. So, when it isn&rsquo;t actively running an event handler, the EDT is the thread that is constantly checking the event queue for any new events.</p><p>When an event is received, it looks up the event&rsquo;s associated GUI element, and then checks to see if any listeners are registered with that object for that type of event. If so, then it finds the listener object and calls the appropriate method for that event.</p><p>As discussed earlier, we need to make sure our event handlers do not take too long to complete. Otherwise, we&rsquo;ll end up slowing down the EDT and making it respond more slowly to events. In addition, this will make our entire GUI appear to &ldquo;lag&rdquo; for the user, which is definitely something we want to avoid.</p><h5 id=references>References</h5><ul><li><a href=https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html rel=external target=_blank>The Event Dispatch Thread</a> from Oracle</li><li><a href=https://en.wikipedia.org/wiki/Event_dispatching_thread rel=external target=_blank>Event Dispatching Thread</a> on Wikipedia</li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=tkinter-main-loop>tkinter Main Loop</h1><p>In Python tkinter, we have an event loop that runs in the background, handling all of the GUI updates as well as responding to any events in the event queue by calling the appropriate callback function.</p><h2 id=starting-the-thread>Starting the Thread</h2><p>In all of our examples so far, we have observed a unique piece of code in the <code>main()</code> method that is used to actually launch our GUI-based programs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>MainWindow</span><span class=p>()</span><span class=o>.</span><span class=n>mainloop</span><span class=p>()</span></span></span></code></pre></div><p>The <code>tk.Tk.mainloop()</code> method is used to start the event loop attached to the top-level <code>tk.Tk</code> object in our GUI. This is a <strong>blocking</strong> function, meaning that it will not return as long as the GUI is running, even when it isn&rsquo;t visible to the user. So, in effect, any code after this in our <code>main()</code> method that is after this function call will not be executed. Instead, that thread is constantly working to update the GUI on the screen and making sure that events are handled quickly.</p><p>Therefore, if we need to create an additional thread for our application, we typically will do so before calling this <code>mainloop()</code> method in our <code>main()</code> method. We can also create new threads from within the event loop thread as needed.</p><h2 id=handling-events>Handling Events</h2><p>The other important task performed by the event loop is actually responding to events from the operating system. So, when it isn&rsquo;t actively running a callback, the event loop is the thread that is constantly checking the event queue for any new events.</p><p>When an event is received, it looks up the event&rsquo;s associated GUI element, and then checks to see if any callbacks are registered with that object for that type of event. If so, then it calls the callback function for that event.</p><p>As discussed earlier, we need to make sure our event handlers do not take too long to complete. Otherwise, we&rsquo;ll end up slowing down the event loop and making it respond more slowly to events. In addition, this will make our entire GUI appear to &ldquo;lag&rdquo; for the user, which is definitely something we want to avoid.</p><h5 id=references>References</h5><ul><li><a href=https://tkdocs.com/tutorial/eventloop.html rel=external target=_blank>Event Loop</a> from Tkdocs</li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><p>In this chapter, we learned about <strong>event-driven programming</strong> and how to configure our GUI-based programs to respond to actions taken by the user.</p><p>When the user interacts with our GUI, an <strong>event</strong> is created by the operating system and placed in the <strong>event queue</strong>. Then, our program uses an <strong>event loop</strong> to check the queue for incoming events, and respond to them. When an event is found, our program determines if that event has been <strong>bound</strong> to a particular <strong>event handler</strong>, also known as a <strong>listener</strong> or <strong>callback</strong>. If so, it calls the appropriate function handle that event.</p><p>The <strong>event loop</strong> is typically run in a separate thread in our program, and we must make sure that any operations performed on that thread are quick enough to prevent any lag in our GUI.</p><p>In the example project for this chapter, we&rsquo;ll explore how to add some event handlers to our GUIs.</p><h2 id=review-quiz>Review Quiz</h2><p>Check your understanding of the new content introduced in this chapter below - this quiz is not graded and you can retake it as many times as you want.</p><i>Quizdown quiz omitted from print view.</i><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://gitlab.cs.ksu.edu/cc/410/generic/textbook/-/commit/2512e31ed7413085fb2b6a90abb854c5d1e43258>Aug 10, 2023</a></p></div></div><script src=/cc410/js/clipboard.min.js?1719505628 defer></script><script src=/cc410/js/perfect-scrollbar.min.js?1719505628 defer></script><script src=/cc410/js/theme.js?1719505628 defer></script></body></html>